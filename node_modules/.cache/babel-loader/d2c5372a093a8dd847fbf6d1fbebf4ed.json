{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/login/components/verification.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/login/components/verification.vue","mtime":1658287406632},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB0aXRsZTogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9LAogICAgYWN0aXZlOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHNjZW5lOiB7CiAgICAgIHR5cGU6IE51bWJlciwKICAgICAgZGVmYXVsdDogMAogICAgfSwKICAgIHBob25lX3ByZWZpeDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgcGhvbmU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIGVtYWlsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsOiAiIiwKICAgICAgZXJyb3JJbmZvOiAiIiwKICAgICAgc2hvd0tleWJvYXJkOiB0cnVlLAogICAgICBjb3VudDogMAogICAgfTsKICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRWZXJpZmljYXRpb25Db2RlKCk7CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHZhbCh2KSB7CiAgICAgIGlmICh2Lmxlbmd0aCA9PT0gNikgewogICAgICAgIHRoaXMudmFsaWRhdGlvbigpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZXJyb3JJbmZvOwogICAgICB9CiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgYXN5bmMgZ2V0VmVyaWZpY2F0aW9uQ29kZSgpIHsKICAgICAgdGhpcy5jb3VudCA9IDYwOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicmVnaXN0ZXJlZC9zZW5kQ29kZSIsIHsKICAgICAgICBzY2VuZTogdGhpcy5zY2VuZSwKICAgICAgICB0eXBlOiB0aGlzLnRpdGxlLmlkLAogICAgICAgIGVtYWlsOiB0aGlzLmVtYWlsLAogICAgICAgIHBob25lOiB0aGlzLnBob25lLAogICAgICAgIHBob25lX3ByZWZpeDogdGhpcy5waG9uZV9wcmVmaXgKICAgICAgfSk7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb2RlCiAgICAgIH0gPSByZXN1bHQ7CgogICAgICBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgdGhpcy5jb3VudCA9IDYwOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyB2YWxpZGF0aW9uKCkgewogICAgICBsZXQgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgicmVnaXN0ZXJlZC9jaGVja0NvZGUiLCB7CiAgICAgICAgc2NlbmU6IHRoaXMuc2NlbmUsCiAgICAgICAgcmVjZWl2ZXI6IHRoaXMuYWN0aXZlID09IDAgPyB0aGlzLnBob25lIDogdGhpcy5lbWFpbCwKICAgICAgICBjb2RlOiB0aGlzLnZhbAogICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgiY2xpY2siLCByZXNwb25zZSwgdGhpcy52YWwpOwogICAgfSwKCiAgICBvbkNsaWNrTGVmdCgpIHsKICAgICAgdGhpcy4kZW1pdCgiY2xpY2stbGVmdCIpOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AA+BA;EACAA;IACAC;MACAC,qBADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASAE;MACAH,YADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,YADA;MAEAC;IAFA,CAbA;IAiBAI;MACAL,YADA;MAEAC;IAFA,CAjBA;IAqBAK;MACAN,YADA;MAEAC;IAFA;EArBA,CADA;;EA2BAM;IACA;MACAC,OADA;MAEAC,aAFA;MAGAC,kBAHA;MAIAC;IAJA;EAMA,CAlCA;;EAmCAC;IACA;EACA,CArCA;;EAsCAC;IACAL;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EAPA,CAtCA;EA+CAM;IACA;MACA;MACA;QACAX,iBADA;QAEAH,mBAFA;QAGAM,iBAHA;QAIAD,iBAJA;QAKAD;MALA;MAOA;QAAAW;MAAA;;MACA;QACA;QACA;QACA;MACA;IACA,CAhBA;;IAiBA;MACA;QACAZ,iBADA;QAEAa,oDAFA;QAGAD;MAHA;MAKA;IACA,CAxBA;;IAyBAE;MACA;IACA;;EA3BA;AA/CA","names":["props","title","type","default","active","scene","phone_prefix","phone","email","data","val","errorInfo","showKeyboard","count","created","watch","methods","code","receiver","onClickLeft"],"sourceRoot":"src/views/login/components","sources":["verification.vue"],"sourcesContent":["<!--\n * @Name: 请输入手机或邮箱验证码\n * @Date: 2022-06-26 21:27:29\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:57:29\n-->\n<template>\n  <P-main class=\"login\">\n    <Navigation :ClickLeft=\"false\" @click-left=\"onClickLeft\" />\n    <h3>\n      {{ $t(\"请输入\") }}{{ title.VerificationName }}{{ $t(\"验证码\") }}\n      <div>{{ $t(\"验证码已发送至\") }}{{ active == 0 ? phone : email }}</div>\n    </h3>\n    <P-verification v-model=\"val\" />\n    <div class=\"getVerificationCode ui-flex-center\">\n      <div>\n        <div class=\"ui-col-hong\">{{ this.errorInfo }}</div>\n      </div>\n      <div>\n        <div @click=\"getVerificationCode\" v-if=\"count == 0\">\n          {{ $t(\"获取验证码\") }}\n        </div>\n        <B-data-theCountdown v-model=\"count\" v-else\n          >{{ count }} {{ $t(\"秒后重新获取\") }}</B-data-theCountdown\n        >\n      </div>\n    </div>\n  </P-main>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: [Object, Array],\n      default: () => [],\n    },\n    active: {\n      type: Number,\n      default: 0,\n    },\n    scene: {\n      type: Number,\n      default: 0,\n    },\n    phone_prefix: {\n      type: String,\n      default: \"\",\n    },\n    phone: {\n      type: String,\n      default: \"\",\n    },\n    email: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      val: \"\",\n      errorInfo: \"\",\n      showKeyboard: true,\n      count: 0,\n    };\n  },\n  created() {\n    this.getVerificationCode();\n  },\n  watch: {\n    val(v) {\n      if (v.length === 6) {\n        this.validation();\n      } else {\n        this.errorInfo;\n      }\n    },\n  },\n  methods: {\n    async getVerificationCode() {\n      this.count = 60;\n      const result = await this.$store.dispatch(\"registered/sendCode\", {\n        scene: this.scene,\n        type: this.title.id,\n        email: this.email,\n        phone: this.phone,\n        phone_prefix: this.phone_prefix,\n      });\n      const { code } = result;  \n      if (code != 200) {\n        this.$toast(result.message);\n        this.count = 60;\n        return;\n      }\n    },\n    async validation() {\n      let response = await this.$store.dispatch(\"registered/checkCode\", {\n        scene: this.scene,\n        receiver: this.active == 0 ? this.phone : this.email,\n        code: this.val,\n      });\n      this.$emit(\"click\", response, this.val);\n    },\n    onClickLeft() {\n      this.$emit(\"click-left\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.getVerificationCode {\n  font-size: 14px;\n  color: #2cbc94;\n  margin-top: 20px;\n}\n</style>"]}]}