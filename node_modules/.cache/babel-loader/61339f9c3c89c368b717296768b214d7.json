{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/order/components/IWantToBuy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/order/components/IWantToBuy.vue","mtime":1658713050077},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE9yZGVyTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvb3JkZXItbGlzdCI7CmltcG9ydCB7IE9yZGVyTGlzdFNlcnZpY2UsIFR5cGVzIH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FwaSI7CmltcG9ydCB7IHNldFR5cGVzIH0gZnJvbSAiLi4vLi4vLi4vdXRpbHMvaW5kZXgiOwppbXBvcnQgSW5maW5pdGVMb2FkaW5nIGZyb20gInZ1ZS1pbmZpbml0ZS1sb2FkaW5nIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIE9yZGVyTGlzdCwKICAgIEluZmluaXRlTG9hZGluZwogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgdHlwZTogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbGlzdDogW10sCiAgICAgIHBhZ2U6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlCiAgICB9OwogIH0sCgogIGNyZWF0ZWQoKSB7Ly8gdGhpcy5nZXRPcmRlckxpc3QoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluiuouWNleWIl+ihqAogICAgYXN5bmMgZ2V0T3JkZXJMaXN0KCkgewogICAgICBjb25zdCB0eXBlcyA9IGF3YWl0IFR5cGVzKHsKICAgICAgICBzY2VuZTogIkFkc09yZGVyU3RhdHVzIgogICAgICB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy52YWx1ZSk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIHNlYXJjaDogewogICAgICAgICAgZ3JvdXBfc3RhdHVzOiB0aGlzLnR5cGUsCiAgICAgICAgICBzdGF0dXM6IHRoaXMudmFsdWUKICAgICAgICB9CiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IE9yZGVyTGlzdFNlcnZpY2UocGFyYW1zKTsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgdGhpcy5saXN0ID0gcmVzdWx0LmRhdGEubGlzdDsKICAgICAgdGhpcy5saXN0LmZvckVhY2goZSA9PiB7CiAgICAgICAgdGhpcy4kc2V0KGUsICJlbmRfdGltZV90ZW1wIiwgbmV3IERhdGUoZS5leHBpcmVzX2F0KS5nZXRUaW1lKCkgLSBuZXcgRGF0ZSgpLmdldFRpbWUoKSk7CiAgICAgIH0pOwogICAgICB0aGlzLmxpc3QgPSBzZXRUeXBlcyh0aGlzLmxpc3QsIHR5cGVzLmRhdGEubWFwKTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCgogICAgb25SZWZyZXNoKCkgewogICAgICB0aGlzLnBhZ2UgPSAwOwogICAgICB0aGlzLmdldE9yZGVyTGlzdCgpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgNTAwKTsKICAgIH0sCgogICAgYXN5bmMgbG9hZE1vcmVFdmVudCgkc3RhdGUpIHsKICAgICAgLy8gICB0aGlzLnN0YXRlID0gJHN0YXRlOwogICAgICAvLyAgIHRoaXMubG9hZE1vcmVEb20gPSB0cnVlOwogICAgICB0aGlzLnBhZ2UgKz0gMTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRPcmRlckxpc3QoKTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IHJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID09IGRhdGEudG90YWwpIHsKICAgICAgICAkc3RhdGUuY29tcGxldGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkc3RhdGUubG9hZGVkKCk7CiAgICAgIH0KICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AA8BA;AACA;AACA;AACA;AAEA;EACAA;IACAC,SADA;IAEAC;EAFA,CADA;EAKAC;IACAC;MACAC,sBADA;MAEAC;IAFA,CADA;IAKAD;MACAA,YADA;MAEAC;IAFA;EALA,CALA;;EAeAC;IACA;MACAC,QADA;MAEAC,OAFA;MAGAC;IAHA;EAKA,CArBA;;EAsBAC,WACA;EACA,CAxBA;;EAyBAC;IACA;IACA;MACA;QAAAC;MAAA;MACAC;MACA;QACAL,eADA;QAEAM,SAFA;QAGAC;UACAC,uBADA;UAEAC;QAFA;MAHA;MAQA;MACAJ;MACA;MACA;QACA,UACAK,CADA,EAEA,eAFA,EAGA,uDAHA;MAKA,CANA;MAOA;MACA;IACA,CAzBA;;IA0BAC;MACA;MACA;MACAC;QACA;MACA,CAFA,EAEA,GAFA;IAGA,CAhCA;;IAiCA;MACA;MACA;MACA;MACA;MACA;QAAAd;MAAA;;MACA;QACAe;MACA,CAFA,MAEA;QACAA;MACA;IACA;;EA5CA;AAzBA","names":["components","OrderList","InfiniteLoading","props","value","type","default","data","list","page","loading","created","methods","scene","console","limit","search","group_status","status","e","onRefresh","setTimeout","$state"],"sourceRoot":"src/views/order/components","sources":["IWantToBuy.vue"],"sourcesContent":["<!--\n * @Name: 订单列表组件\n * @Date: 2022-06-17 16:47:03\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 20:19:49\n-->\n<template>\n  <div class=\"going-order\">\n    <div>\n      <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n        <ul>\n          <li v-for=\"(row, index) in list\" :key=\"index\">\n            <Order-list :row=\"row\"></Order-list>\n          </li>\n        </ul>\n        <infinite-loading\n          spinner=\"spiral\"\n          @infinite=\"loadMoreEvent\"\n          :distance=\"0\"\n        >\n          <div slot=\"spinner\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n        </infinite-loading>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport OrderList from \"@/components/order-list\";\nimport { OrderListService, Types } from \"../../../api/api\";\nimport { setTypes } from \"../../../utils/index\";\nimport InfiniteLoading from \"vue-infinite-loading\";\n\nexport default {\n  components: {\n    OrderList,\n    InfiniteLoading,\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      default: \"\",\n    },\n    type:{\n      type:Number,\n      default:1,\n    }\n  },\n  data() {\n    return {\n      list: [],\n      page: 0,\n      loading: false,\n    };\n  },\n  created() {\n    // this.getOrderList();\n  },\n  methods: {\n    //获取订单列表\n    async getOrderList() {\n      const types = await Types({ scene: \"AdsOrderStatus\" });\n      console.log(this.value);\n      const params = {\n        page: this.page,\n        limit: 10,\n        search: {\n          group_status: this.type,\n          status: this.value,\n        },\n      };\n      const result = await OrderListService(params);\n      console.log(result);\n      this.list = result.data.list;\n      this.list.forEach((e) => {\n        this.$set(\n          e,\n          \"end_time_temp\",\n          new Date(e.expires_at).getTime() - new Date().getTime()\n        );\n      });\n      this.list = setTypes(this.list, types.data.map);\n      return result;\n    },\n    onRefresh() {\n      this.page = 0;\n      this.getOrderList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 500);\n    },\n    async loadMoreEvent($state) {\n      //   this.state = $state;\n      //   this.loadMoreDom = true;\n      this.page += 1;\n      const result = await this.getOrderList();\n      const { data } = result;\n      if (this.list.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.going-order {\n  /deep/.van-pull-refresh{\n    height: 80vh;overflow: auto;\n  }\n  ul {\n    li {\n      padding: 12px;\n      background: white;\n      border-radius: 8px;\n      margin-bottom: 8px;\n    }\n  }\n}\n</style>"]}]}