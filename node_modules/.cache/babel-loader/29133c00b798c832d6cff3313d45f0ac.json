{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/mock/index.js","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/mock/index.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Y29uc3QgcXMgPSByZXF1aXJlKCdxcycpOwoKY29uc3QgTW9jayA9IHJlcXVpcmUoJ21vY2tqcycpOwoKY29uc3QgewogIHBhcmFtMk9iagp9ID0gcmVxdWlyZSgnLi91dGlscy5qcycpOwoKbGV0IG1vY2tzID0gW107CmxldCBmYU5hbWUgPSBbJ2FwaScsICd1c2VyJ107CmZhTmFtZS5mb3JFYWNoKGl0ZW0gPT4gewogIGxldCBwYWdlID0gcmVxdWlyZSgnLi9tb2R1bGVzLycgKyBpdGVtKTsKCiAgbW9ja3MucHVzaCguLi5wYWdlKTsKfSk7IC8vIGZvciBmcm9udCBtb2NrCi8vIHBsZWFzZSB1c2UgaXQgY2F1dGlvdXNseSwgaXQgd2lsbCByZWRlZmluZSBYTUxIdHRwUmVxdWVzdCwKLy8gd2hpY2ggd2lsbCBjYXVzZSBtYW55IG9mIHlvdXIgdGhpcmQtcGFydHkgbGlicmFyaWVzIHRvIGJlIGludmFsaWRhdGVkKGxpa2UgcHJvZ3Jlc3MgZXZlbnQpLgoKZnVuY3Rpb24gbW9ja1hIUigpIHsKICAvLyBtb2NrIHBhdGNoCiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL251eXNvZnQvTW9jay9pc3N1ZXMvMzAwCiAgTW9jay5YSFIucHJvdG90eXBlLnByb3h5X3NlbmQgPSBNb2NrLlhIUi5wcm90b3R5cGUuc2VuZDsKCiAgTW9jay5YSFIucHJvdG90eXBlLnNlbmQgPSBmdW5jdGlvbiAoKSB7CiAgICBpZiAodGhpcy5jdXN0b20ueGhyKSB7CiAgICAgIHRoaXMuY3VzdG9tLnhoci53aXRoQ3JlZGVudGlhbHMgPSB0aGlzLndpdGhDcmVkZW50aWFscyB8fCBmYWxzZTsKCiAgICAgIGlmICh0aGlzLnJlc3BvbnNlVHlwZSkgewogICAgICAgIHRoaXMuY3VzdG9tLnhoci5yZXNwb25zZVR5cGUgPSB0aGlzLnJlc3BvbnNlVHlwZTsKICAgICAgfQogICAgfQoKICAgIHRoaXMucHJveHlfc2VuZCguLi5hcmd1bWVudHMpOwogIH07CgogIGZ1bmN0aW9uIFhIUjJFeHByZXNzUmVxV3JhcChyZXNwb25kKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKG9wdGlvbnMpIHsKICAgICAgbGV0IHJlc3VsdCA9IG51bGw7CgogICAgICBpZiAocmVzcG9uZCBpbnN0YW5jZW9mIEZ1bmN0aW9uKSB7CiAgICAgICAgY29uc3QgewogICAgICAgICAgYm9keSwKICAgICAgICAgIHR5cGUsCiAgICAgICAgICB1cmwKICAgICAgICB9ID0gb3B0aW9uczsgLy8gaHR0cHM6Ly9leHByZXNzanMuY29tL2VuLzR4L2FwaS5odG1sI3JlcQoKICAgICAgICBsZXQgJGJvZHkgPSAnJzsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICRib2R5ID0gSlNPTi5wYXJzZShib2R5KTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICRib2R5ID0gcXMucGFyc2UoYm9keSk7CiAgICAgICAgfQoKICAgICAgICByZXN1bHQgPSByZXNwb25kKHsKICAgICAgICAgIG1ldGhvZDogdHlwZSwKICAgICAgICAgIGJvZHk6ICRib2R5LAogICAgICAgICAgcXVlcnk6IHBhcmFtMk9iaih1cmwpCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmVzdWx0ID0gcmVzcG9uZDsKICAgICAgfQoKICAgICAgcmV0dXJuIE1vY2subW9jayhyZXN1bHQpOwogICAgfTsKICB9CgogIGZvciAoY29uc3QgaSBvZiBtb2NrcykgewogICAgTW9jay5tb2NrKG5ldyBSZWdFeHAoaS51cmwpLCBpLnR5cGUgfHwgJ2dldCcsIFhIUjJFeHByZXNzUmVxV3JhcChpLnJlc3BvbnNlKSk7CiAgfQp9Cgptb2R1bGUuZXhwb3J0cyA9IHsKICBtb2NrcywKICBtb2NrWEhSCn07"},{"version":3,"names":["qs","require","Mock","param2Obj","mocks","faName","forEach","item","page","push","mockXHR","XHR","prototype","proxy_send","send","custom","xhr","withCredentials","responseType","arguments","XHR2ExpressReqWrap","respond","options","result","Function","body","type","url","$body","JSON","parse","err","method","query","mock","i","RegExp","response","module","exports"],"sources":["/Users/tql_yy/Documents/code/use_one/mock/index.js"],"sourcesContent":["const qs = require('qs');\n\nconst Mock = require('mockjs')\nconst { param2Obj } = require('./utils.js')\n\nlet mocks = [];\n\nlet faName = [\n    'api',\n    'user'\n]\n\nfaName.forEach((item) => {\n    let page = require('./modules/' + item)\n    mocks.push(...page)\n})\n\n// for front mock\n// please use it cautiously, it will redefine XMLHttpRequest,\n// which will cause many of your third-party libraries to be invalidated(like progress event).\nfunction mockXHR() {\n    // mock patch\n    // https://github.com/nuysoft/Mock/issues/300\n    Mock.XHR.prototype.proxy_send = Mock.XHR.prototype.send\n    Mock.XHR.prototype.send = function () {\n        if (this.custom.xhr) {\n            this.custom.xhr.withCredentials = this.withCredentials || false\n\n            if (this.responseType) {\n                this.custom.xhr.responseType = this.responseType\n            }\n        }\n        this.proxy_send(...arguments)\n    }\n\n    function XHR2ExpressReqWrap(respond) {\n        return function (options) {\n            let result = null\n            if (respond instanceof Function) {\n                const { body, type, url } = options\n                // https://expressjs.com/en/4x/api.html#req\n\n                let $body = ''\n                try {\n                    $body = JSON.parse(body)\n                }\n                catch (err) {\n                    $body = qs.parse(body)\n                }\n\n                result = respond({\n                    method: type,\n                    body: $body,\n                    query: param2Obj(url)\n                })\n            } else {\n                result = respond\n            }\n            return Mock.mock(result)\n        }\n    }\n\n    for (const i of mocks) {\n        Mock.mock(new RegExp(i.url), i.type || 'get', XHR2ExpressReqWrap(i.response))\n    }\n}\n\nmodule.exports = {\n    mocks,\n    mockXHR\n}\n"],"mappings":"AAAA,MAAMA,EAAE,GAAGC,OAAO,CAAC,IAAD,CAAlB;;AAEA,MAAMC,IAAI,GAAGD,OAAO,CAAC,QAAD,CAApB;;AACA,MAAM;EAAEE;AAAF,IAAgBF,OAAO,CAAC,YAAD,CAA7B;;AAEA,IAAIG,KAAK,GAAG,EAAZ;AAEA,IAAIC,MAAM,GAAG,CACT,KADS,EAET,MAFS,CAAb;AAKAA,MAAM,CAACC,OAAP,CAAgBC,IAAD,IAAU;EACrB,IAAIC,IAAI,GAAGP,OAAO,CAAC,eAAeM,IAAhB,CAAlB;;EACAH,KAAK,CAACK,IAAN,CAAW,GAAGD,IAAd;AACH,CAHD,E,CAKA;AACA;AACA;;AACA,SAASE,OAAT,GAAmB;EACf;EACA;EACAR,IAAI,CAACS,GAAL,CAASC,SAAT,CAAmBC,UAAnB,GAAgCX,IAAI,CAACS,GAAL,CAASC,SAAT,CAAmBE,IAAnD;;EACAZ,IAAI,CAACS,GAAL,CAASC,SAAT,CAAmBE,IAAnB,GAA0B,YAAY;IAClC,IAAI,KAAKC,MAAL,CAAYC,GAAhB,EAAqB;MACjB,KAAKD,MAAL,CAAYC,GAAZ,CAAgBC,eAAhB,GAAkC,KAAKA,eAAL,IAAwB,KAA1D;;MAEA,IAAI,KAAKC,YAAT,EAAuB;QACnB,KAAKH,MAAL,CAAYC,GAAZ,CAAgBE,YAAhB,GAA+B,KAAKA,YAApC;MACH;IACJ;;IACD,KAAKL,UAAL,CAAgB,GAAGM,SAAnB;EACH,CATD;;EAWA,SAASC,kBAAT,CAA4BC,OAA5B,EAAqC;IACjC,OAAO,UAAUC,OAAV,EAAmB;MACtB,IAAIC,MAAM,GAAG,IAAb;;MACA,IAAIF,OAAO,YAAYG,QAAvB,EAAiC;QAC7B,MAAM;UAAEC,IAAF;UAAQC,IAAR;UAAcC;QAAd,IAAsBL,OAA5B,CAD6B,CAE7B;;QAEA,IAAIM,KAAK,GAAG,EAAZ;;QACA,IAAI;UACAA,KAAK,GAAGC,IAAI,CAACC,KAAL,CAAWL,IAAX,CAAR;QACH,CAFD,CAGA,OAAOM,GAAP,EAAY;UACRH,KAAK,GAAG5B,EAAE,CAAC8B,KAAH,CAASL,IAAT,CAAR;QACH;;QAEDF,MAAM,GAAGF,OAAO,CAAC;UACbW,MAAM,EAAEN,IADK;UAEbD,IAAI,EAAEG,KAFO;UAGbK,KAAK,EAAE9B,SAAS,CAACwB,GAAD;QAHH,CAAD,CAAhB;MAKH,CAjBD,MAiBO;QACHJ,MAAM,GAAGF,OAAT;MACH;;MACD,OAAOnB,IAAI,CAACgC,IAAL,CAAUX,MAAV,CAAP;IACH,CAvBD;EAwBH;;EAED,KAAK,MAAMY,CAAX,IAAgB/B,KAAhB,EAAuB;IACnBF,IAAI,CAACgC,IAAL,CAAU,IAAIE,MAAJ,CAAWD,CAAC,CAACR,GAAb,CAAV,EAA6BQ,CAAC,CAACT,IAAF,IAAU,KAAvC,EAA8CN,kBAAkB,CAACe,CAAC,CAACE,QAAH,CAAhE;EACH;AACJ;;AAEDC,MAAM,CAACC,OAAP,GAAiB;EACbnC,KADa;EAEbM;AAFa,CAAjB"}]}