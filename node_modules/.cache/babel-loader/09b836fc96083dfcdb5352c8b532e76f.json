{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/login/components/phoneOrEmail.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/login/components/phoneOrEmail.vue","mtime":1658115717482},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvdHFsX3l5L0RvY3VtZW50cy9jb2RlL3VzZV9vbmUvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE4LjZAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7CgpyZXF1aXJlKCJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiKTsKCnZhciBfcXVlcnlzdHJpbmcgPSByZXF1aXJlKCJxdWVyeXN0cmluZyIpOwoKdmFyIF9zZWxlY3RBcmVhID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKCIuL3NlbGVjdEFyZWEiKSk7Cgp2YXIgX2FwaSA9IHJlcXVpcmUoIi4uLy4uLy4uL2FwaS9hcGkiKTsKCnZhciBfZGVmYXVsdCA9IHsKICBjb21wb25lbnRzOiB7CiAgICBTZWxlY3RBcmVhOiBfc2VsZWN0QXJlYS5kZWZhdWx0CiAgfSwKICBwcm9wczogewogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIHRhYnNBY3RpdmU6IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwCiAgICB9LAogICAgbGlzdDogewogICAgICB0eXBlOiBbT2JqZWN0LCBBcnJheV0sCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdCiAgICB9LAogICAgcGhvbmVfcHJlZml4OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBwaG9uZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgZW1haWw6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAiIgogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICBjb25zdCB2YWxpZGF0aW9uUGhvbmUgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh0aGlzLnJ1bGVGb3JtLnBob25lX3ByZWZpeCA9PSAiIikgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcih0aGlzLiR0KCLor7fpgInmi6nlm73lrrbljLrlj7ciKSkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgYm9vbDogewogICAgICAgIFNlbGVjdEFyZWE6IGZhbHNlCiAgICAgIH0sCiAgICAgIGFjdGl2ZTogMCwKICAgICAgTmF0aW9uYWxOdW1iZXI6IHsKICAgICAgICBsb2dvOiAiIgogICAgICB9LAogICAgICBpbWdDb2RlOiByZXF1aXJlKCcuLi8uLi8uLi9hc3NldHMvaW1hZ2VzL3Rlc3QucG5nJyksCiAgICAgIC8v5Zu+54mH6aqM6K+B56CBCiAgICAgIGNvZGVLZXk6IG51bGwsCiAgICAgIC8v6aqM6K+B56CBa2V5CiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgcGhvbmVfcHJlZml4OiAiIiwKICAgICAgICBwaG9uZTogIiIsCiAgICAgICAgZW1haWw6ICIiLAogICAgICAgIGNvZGU6ICIiCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgcGhvbmU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+i+k+WFpeaJi+acuuWPt+eggSIpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0aW9uUGhvbmUsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBlbWFpbDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgi6K+36L6T5YWl6YKu566xIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IG5ldyBSZWdFeHAoKS5lbWFpbCwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGNvZGU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+i+k+WFpeWbvuW9oumqjOivgeeggSIpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgYWN0aXZlKHYpIHsKICAgICAgdGhpcy4kZW1pdCgidXBkYXRlOnRhYnNBY3RpdmUiLCB2KTsKICAgIH0sCgogICAgdGFic0FjdGl2ZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgdGhpcy5hY3RpdmUgPSB2OwogICAgICB9CiAgICB9LAogICAgcGhvbmVfcHJlZml4OiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHYpIHsKICAgICAgICB0aGlzLnJ1bGVGb3JtLnBob25lX3ByZWZpeCA9IHY7CiAgICAgIH0KICAgIH0sCiAgICBwaG9uZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgdGhpcy5ydWxlRm9ybS5waG9uZSA9IHY7CiAgICAgIH0KICAgIH0sCiAgICBlbWFpbDogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgdGhpcy5ydWxlRm9ybS5lbWFpbCA9IHY7CiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRJbWdDb2RlKCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgY2xvc2VBcmVhKCkgewogICAgICBjb25zb2xlLmxvZygxMjEyMzEzKTsKICAgICAgdGhpcy5ib29sLlNlbGVjdEFyZWEgPSBmYWxzZTsKICAgIH0sCgogICAgb25TZWxlY3RBcmVhKHJvdykgewogICAgICB0aGlzLk5hdGlvbmFsTnVtYmVyID0gcm93OwogICAgICB0aGlzLnJ1bGVGb3JtLnBob25lX3ByZWZpeCA9IHJvdy5wcmVmaXg7CiAgICAgIHRoaXMuJHJlZnMucGhvbmUuY2xlYXJWYWxpZGF0ZSgpOwogICAgfSwKCiAgICBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuY2hlY2tBdmFpbGFibGUoKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKCiAgICAvL+iOt+WPluWbvuW9oumqjOivgeeggQogICAgYXN5bmMgZ2V0SW1nQ29kZSgpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgKDAsIF9hcGkuSW1nQ29kZSkoKTsKICAgICAgdGhpcy5pbWdDb2RlID0gcmVzdWx0LmRhdGEuaW1nOwogICAgICB0aGlzLmNvZGVLZXkgPSByZXN1bHQuZGF0YS5rZXk7CiAgICB9LAoKICAgIGFzeW5jIGNoZWNrQXZhaWxhYmxlKCkgewogICAgICAvLyBjb25zb2xlLmxvZyh0eXBlb2YgcGFyc2VJbnQodGhpcy5saXN0W3RoaXMuYWN0aXZlXS5pZCkpCiAgICAgIC8vIGNvbnNvbGUubG9nKHR5cGVvZiB0aGlzLnJ1bGVGb3JtLmVtYWlsKQogICAgICAvLyBjb25zb2xlLmxvZyh0eXBlb2YgdGhpcy5ydWxlRm9ybS5waG9uZSkKICAgICAgLy8gY29uc29sZS5sb2codHlwZW9mIHRoaXMucnVsZUZvcm0ucGhvbmVfcHJlZml4KQogICAgICAvLyByZXR1cm4KICAgICAgbGV0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInJlZ2lzdGVyZWQvY2hlY2tBdmFpbGFibGUiLCB7CiAgICAgICAgdHlwZTogcGFyc2VJbnQodGhpcy5saXN0W3RoaXMuYWN0aXZlXS5pZCksCiAgICAgICAgZW1haWw6IHRoaXMucnVsZUZvcm0uZW1haWwgPyB0aGlzLnJ1bGVGb3JtLmVtYWlsIDogIiIsCiAgICAgICAgcGhvbmU6IHRoaXMucnVsZUZvcm0ucGhvbmUsCiAgICAgICAgcGhvbmVfcHJlZml4OiBTdHJpbmcodGhpcy5ydWxlRm9ybS5waG9uZV9wcmVmaXgpLAogICAgICAgIGNhcHRjaGFfa2V5OiB0aGlzLmNvZGVLZXksCiAgICAgICAgY2FwdGNoYV92YWw6IHRoaXMucnVsZUZvcm0uY29kZQogICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgiY2xpY2siLCByZXNwb25zZSwgdGhpcy5ydWxlRm9ybSk7CiAgICB9CgogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;;;AA2EA;;AACA;;AACA;;eAEA;EACAA;IAAAC;EAAA,CADA;EAEAC;IACAC;MACAC,YADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASAE;MACAH,qBADA;MAEAC;IAFA,CATA;IAaAG;MACAJ,YADA;MAEAC;IAFA,CAbA;IAiBAI;MACAL,YADA;MAEAC;IAFA,CAjBA;IAqBAK;MACAN,YADA;MAEAC;IAFA;EArBA,CAFA;;EA4BAM;IACA;MACA;QACAC;MACA,CAFA,MAEA;QACAA;MACA;IACA,CANA;;IAQA;MACAC;QACAZ;MADA,CADA;MAIAa,SAJA;MAKAC;QACAC;MADA,CALA;MAQAC,mDARA;MAQA;MACAC,aATA;MASA;MACAC;QACAX,gBADA;QAEAC,SAFA;QAGAC,SAHA;QAIAU;MAJA,CAVA;MAgBAC;QACAZ,QACA;UACAa,cADA;UAEAC,2BAFA;UAGAC;QAHA,CADA,EAMA;UAAAC;UAAAD;QAAA,CANA,CADA;QASAd,QACA;UAAAY;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAD;QAAA,CAFA,CATA;QAaAJ,OACA;UACAE,cADA;UAEAC,4BAFA;UAGAC;QAHA,CADA;MAbA;IAhBA;EAsCA,CA3EA;;EA4EAE;IACAZ;MACA;IACA,CAHA;;IAIAR;MACAqB,eADA;MAEAC;QACA;MACA;IAJA,CAJA;IAUApB;MACAmB,eADA;MAEAC;QACA;MACA;IAJA,CAVA;IAgBAnB;MACAkB,eADA;MAEAC;QACA;MACA;IAJA,CAhBA;IAsBAlB;MACAiB,eADA;MAEAC;QACA;MACA;IAJA;EAtBA,CA5EA;;EAyGAC;IACA;EACA,CA3GA;;EA4GAC;IACAC;MACAC;MACA;IACA,CAJA;;IAKAC;MACA;MACA;MACA;IACA,CATA;;IAUAC;MACA;QACA;UACA;QACA;MACA,CAJA;IAKA,CAhBA;;IAiBA;IACA;MACA;MACA;MACA;IACA,CAtBA;;IAuBA;MACA;MACA;MACA;MACA;MACA;MACA;QACA9B,yCADA;QAEAM,qDAFA;QAGAD,0BAHA;QAIAD,gDAJA;QAKA2B,yBALA;QAMAC;MANA;MAQA;IACA;;EAtCA;AA5GA,C","names":["components","SelectArea","props","title","type","default","tabsActive","list","phone_prefix","phone","email","data","callback","bool","active","NationalNumber","logo","imgCode","codeKey","ruleForm","code","rules","required","message","trigger","validator","watch","immediate","handler","created","methods","closeArea","console","onSelectArea","submitForm","captcha_key","captcha_val"],"sourceRoot":"src/views/login/components","sources":["phoneOrEmail.vue"],"sourcesContent":["<!--\n * @Name: 忘记密码\n * @Date: 2022-06-29 11:08:30\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:57:12\n-->\n\n<template>\n  <div>\n    <P-main class=\"login registered\" v-show=\"!bool.SelectArea\">\n      <Navigation />\n      <h3>{{ $t(title) }}</h3>\n\n      <P-tabs v-model=\"active\" :list=\"list\" :lineWidth=\"36\" />\n\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"p-30-t\">\n        <el-form-item ref=\"phone\" prop=\"phone\" v-if=\"active == 0\">\n          <P-input\n            v-model=\"ruleForm.phone\"\n            :iconBorder=\"true\"\n            :placeholder=\"$t('请输入手机号码')\"\n          >\n            <div slot=\"icon\">\n              <div\n                class=\"user-left ui-flex-row\"\n                @click=\"bool.SelectArea = true\"\n              >\n                <div v-if=\"ruleForm.phone_prefix\">\n                  <img :src=\"NationalNumber.logo\" class=\"theNationalFlag\" />\n                </div>\n                <div v-if=\"ruleForm.phone_prefix\" class=\"name\">\n                  {{ ruleForm.phone_prefix }}\n                </div>\n                <div v-if=\"!ruleForm.phone_prefix\" class=\"ui-col-fei m-5-r\">\n                  {{ $t(\"请选择\") }}\n                </div>\n                <B-svg name=\"jianTouXia\" class-name=\"jianTouXia\" />\n              </div>\n            </div>\n          </P-input>\n        </el-form-item>\n\n        <el-form-item prop=\"email\" v-if=\"active == 1\">\n          <P-input\n            v-model=\"ruleForm.email\"\n            icon=\"icon-youxiang\"\n            :placeholder=\"$t('请输入邮箱')\"\n          />\n        </el-form-item>\n\n        <el-form-item prop=\"code\">\n          <P-input\n            title=\"图片验证码\"\n            v-model=\"ruleForm.code\"\n            placeholder=\"请输入图形验证码\"\n          >\n          </P-input>\n          <div class=\"img-code\">\n            <img :src=\"imgCode\" alt=\"\">\n          </div>\n          <p class=\"re-send-code\" @click=\"getImgCode\">看不清？换一张</p>\n        </el-form-item>\n      </el-form>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i m-60-t-i\"\n        @click=\"submitForm('ruleForm')\"\n        >{{ $t(\"下一步\") }}\n      </P-button>\n    </P-main>\n    <SelectArea v-model=\"bool.SelectArea\" @click=\"onSelectArea\" @close-area=\"closeArea\"/>\n  </div>\n</template>\n\n<script>\nimport { stringify } from \"querystring\";\nimport SelectArea from \"./selectArea\";\nimport { ImgCode } from \"../../../api/api\";\n\nexport default {\n  components: { SelectArea },\n  props: {\n    title: {\n      type: String,\n      default: \"\",\n    },\n    tabsActive: {\n      type: Number,\n      default: 0,\n    },\n    list: {\n      type: [Object, Array],\n      default: () => [],\n    },\n    phone_prefix: {\n      type: String,\n      default: \"\",\n    },\n    phone: {\n      type: String,\n      default: \"\",\n    },\n    email: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    const validationPhone = (rule, value, callback) => {\n      if (this.ruleForm.phone_prefix == \"\") {\n        callback(new Error(this.$t(\"请选择国家区号\")));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      bool: {\n        SelectArea: false,\n      },\n      active: 0,\n      NationalNumber: {\n        logo: \"\",\n      },\n      imgCode:require('../../../assets/images/test.png'),//图片验证码\n      codeKey:null,//验证码key\n      ruleForm: {\n        phone_prefix: \"\",\n        phone: \"\",\n        email: \"\",\n        code: \"\",\n      },\n      rules: {\n        phone: [\n          {\n            required: true,\n            message: this.$t(\"请输入手机号码\"),\n            trigger: \"blur\",\n          },\n          { validator: validationPhone, trigger: \"blur\" },\n        ],\n        email: [\n          { required: true, message: this.$t(\"请输入邮箱\"), trigger: \"blur\" },\n          { validator: new RegExp().email, trigger: \"blur\" },\n        ],\n        code: [\n          {\n            required: true,\n            message: this.$t(\"请输入图形验证码\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  watch: {\n    active(v) {\n      this.$emit(\"update:tabsActive\", v);\n    },\n    tabsActive: {\n      immediate: true,\n      handler: function (v) {\n        this.active = v;\n      },\n    },\n    phone_prefix: {\n      immediate: true,\n      handler: function (v) {\n        this.ruleForm.phone_prefix = v;\n      },\n    },\n    phone: {\n      immediate: true,\n      handler: function (v) {\n        this.ruleForm.phone = v;\n      },\n    },\n    email: {\n      immediate: true,\n      handler: function (v) {\n        this.ruleForm.email = v;\n      },\n    },\n  },\n  created(){\n    this.getImgCode();\n  },    \n  methods: {\n    closeArea(){\n        console.log(1212313)\n        this.bool.SelectArea = false;\n    },  \n    onSelectArea(row) {\n      this.NationalNumber = row;\n      this.ruleForm.phone_prefix = row.prefix;\n      this.$refs.phone.clearValidate();\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.checkAvailable();\n        }\n      });\n    },\n    //获取图形验证码\n    async getImgCode(){\n        const result = await ImgCode();\n        this.imgCode = result.data.img;\n        this.codeKey = result.data.key;\n    },  \n    async checkAvailable() {\n      // console.log(typeof parseInt(this.list[this.active].id))\n      // console.log(typeof this.ruleForm.email)\n      // console.log(typeof this.ruleForm.phone)\n      // console.log(typeof this.ruleForm.phone_prefix)\n      // return\n      let response = await this.$store.dispatch(\"registered/checkAvailable\", {\n        type: parseInt(this.list[this.active].id),\n        email: this.ruleForm.email ? this.ruleForm.email : \"\",\n        phone: this.ruleForm.phone,\n        phone_prefix: String(this.ruleForm.phone_prefix),\n        captcha_key:this.codeKey,\n        captcha_val:this.ruleForm.code\n      });\n      this.$emit(\"click\", response, this.ruleForm);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.registered {\n  .theNationalFlag {\n    height: 15px;\n    width: 15px;\n  }\n  .user-left {\n    .jianTouXia {\n      width: 13px;\n      height: 13px;\n      fill: #2cbc94;\n    }\n    .name {\n      color: #2cbc94;\n      margin: 0px 3px;\n    }\n  }\n  /deep/.van-tabs {\n    .van-tab {\n      margin-right: 20px;\n      .van-tab__text--ellipsis {\n        font-size: 16px;\n        color: #666666;\n      }\n      &.van-tab--active {\n        .van-tab__text--ellipsis {\n          color: #333333;\n          font-size: 18px;\n        }\n      }\n    }\n  }\n  /deep/.el-form-item{\n    position: relative;\n    .img-code{\n        width: 92px;\n        height: 40px;\n        position: absolute;\n        right: 4px;\n        top: 58px;\n        img{\n            width: 100%;\n            height: 100%;\n        }\n    }\n    .re-send-code{\n        font-size: 12px;\n        text-align: right;\n        color: #6580FF;\n    }\n  }\n}\n</style>\n"]}]}