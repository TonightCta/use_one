{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToBuy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToBuy.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhlbW9MaXN0IGZyb20gIkAvY29tcG9uZW50cy9oZW1vLWxpc3QiOwppbXBvcnQgQnRuQnV5aW5nQW5kU2VsbGluZyBmcm9tICIuL0J0bkJ1eWluZ0FuZFNlbGxpbmciOwppbXBvcnQgTmVlZEF1dGggZnJvbSAiLi9uZWVkX2F1dGgiOwppbXBvcnQgeyBBZHZUcmFkZUxpc3QsIFRyYWRlVmVyaWZ5IH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FwaSI7CmltcG9ydCBJbmZpbml0ZUxvYWRpbmcgZnJvbSAidnVlLWluZmluaXRlLWxvYWRpbmciOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgSGVtb0xpc3QsCiAgICBCdG5CdXlpbmdBbmRTZWxsaW5nLAogICAgTmVlZEF1dGgsCiAgICBJbmZpbml0ZUxvYWRpbmcKICB9LAogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiAiIgogICAgfSwKICAgIGZpbHRlckFtb3VudDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgZmlsdGVyTWVudHM6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBib29sOiB7CiAgICAgICAgQnV5aW5nQW5kU2VsbGluZzogZmFsc2UsCiAgICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgICBpc19uZWVkX2F1dGg6IGZhbHNlCiAgICAgIH0sCiAgICAgIHRlc3Q6IHRydWUsCiAgICAgIGxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLAogICAgICAvL+aYr+WQpuW3suWKoOi9veWujOaIkO+8jOWKoOi9veWujOaIkOWQjuS4jeWGjeinpuWPkWxvYWTkuovku7YKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHBhZ2U6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgcGxhY2VNc2c6IHt9IC8v5LiL5Y2V5L+h5oGvCgogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgLy8gdmFsdWUodmFsKXsKICAgIC8vICAgY29uc29sZS5sb2codmFsKQogICAgLy8gfQogICAgZmlsdGVyQW1vdW50KHZhbCkgewogICAgICB0aGlzLm9uTGlzdCgpOwogICAgICBjb25zb2xlLmxvZyh2YWwpOwogICAgfSwKCiAgICBmaWx0ZXJNZW50cyh2YWwpIHsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgIH0sCgogICAgY3VycmVuY3koX3ZhbCkgewogICAgICB0aGlzLm9uTGlzdCgpOwogICAgfQoKICB9LAoKICBjcmVhdGVkKCkgey8vIHRoaXMub25MaXN0KCk7CiAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmZpbHRlckFtb3VudCkKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbImN1cnJlbnQiXSksCgogICAgY3VycmVuY3koKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuYW1vdW50X3dheTsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluS6pOaYk+WIl+ihqAogICAgYXN5bmMgb25MaXN0KCkgewogICAgICBjb25zb2xlLmxvZygxKTsKICAgICAgY29uc29sZS5sb2codGhpcy52YWx1ZSk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICB0eXBlOiAxLAogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgc2VhcmNoOiB7CiAgICAgICAgICBjdXJyZW5jeTogdGhpcy5jdXJyZW50LmFtb3VudF93YXksCiAgICAgICAgICBjb2luOiB0aGlzLnZhbHVlLAogICAgICAgICAgcGF5bWVudHM6IHRoaXMuZmlsdGVyTWVudHMsCiAgICAgICAgICBhbW91bnQ6IHRoaXMuZmlsdGVyQW1vdW50CiAgICAgICAgfQogICAgICB9OwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBZHZUcmFkZUxpc3QocGFyYW1zKTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IHJlc3VsdDsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgdGhpcy5saXN0ID0gZGF0YS5saXN0OwogICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKCiAgICAvLyDliqDovb3mm7TlpJoKICAgIGFzeW5jIGxvYWRNb3JlRXZlbnQoJHN0YXRlKSB7CiAgICAgIHRoaXMucGFnZSArPSAxOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm9uTGlzdCgpOwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gcmVzdWx0OwoKICAgICAgaWYgKHRoaXMubGlzdC5sZW5ndGggPT0gZGF0YS50b3RhbCkgewogICAgICAgICRzdGF0ZS5jb21wbGV0ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgICRzdGF0ZS5sb2FkZWQoKTsKICAgICAgfQogICAgfSwKCiAgICAvL+WIt+aWsAogICAgb25SZWZyZXNoKCkgewogICAgICB0aGlzLnBhZ2UgPSAwOwogICAgICB0aGlzLm9uTGlzdCgpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgMTAwMCk7CiAgICB9LAoKICAgIC8v54K55Ye76LSt5LmwCiAgICBhc3luYyBidG5DbGljayhyb3cpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVHJhZGVWZXJpZnkoewogICAgICAgIHR5cGU6IDIsCiAgICAgICAgYWR2SWQ6IHJvdy5pZAogICAgICB9KTsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUsCiAgICAgICAgZGF0YQogICAgICB9ID0gcmVzdWx0OwoKICAgICAgaWYgKGNvZGUgPT0gMTAwMDE2KSB7CiAgICAgICAgdGhpcy5ib29sLmRpYWxvZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRhdGEucnVsZXMua3ljLnJlcXVpcmVkKSB7CiAgICAgICAgaWYgKCFkYXRhLnJ1bGVzLmt5Yy52YWwpIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KCLmgqjlsJrmnKrlrozmiJDlrp7lkI3orqTor4EiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChkYXRhLnJ1bGVzLnBheV9wYXNzd29yZC5yZXF1aXJlZCkgewogICAgICAgIGlmICghZGF0YS5ydWxlcy5wYXlfcGFzc3dvcmQudmFsKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdCgi5oKo5bCa5pyq6K6+572u5Lqk5piT5a+G56CBIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICA7CiAgICAgIHRoaXMucGxhY2VNc2cgPSByb3c7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGxhY2VNc2cpOwogICAgICB0aGlzLmJvb2wuQnV5aW5nQW5kU2VsbGluZyA9IHRydWU7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;IACAC,QADA;IAEAC,mBAFA;IAGAC,QAHA;IAIAC;EAJA,CADA;EAOAC;IACAC;MACAC,sBADA;MAEAC;IAFA,CADA;IAKAC;MACAF,sBADA;MAEAC;IAFA,CALA;IASAE;MACAH,sBADA;MAEAC;IAFA;EATA,CAPA;;EAqBAG;IACA;MACAC;QACAC,uBADA;QAEAC,aAFA;QAGAC;MAHA,CADA;MAMAC,UANA;MAOAC,QAPA;MAQAC,cARA;MASAC,eATA;MASA;MACAC,iBAVA;MAWAC,OAXA;MAYAH,cAZA;MAaAD,QAbA;MAcAK,YAdA,CAcA;;IAdA;EAgBA,CAtCA;;EAuCAC;IACA;IACA;IACA;IACAd;MACA;MACAe;IACA,CAPA;;IAQAd;MACA;MACAc;IACA,CAXA;;IAYAC;MACA;IACA;;EAdA,CAvCA;;EAuDAC,WACA;IACA;EACA,CA1DA;;EA2DAC,YACA,wBADA;;IAEAF;MACA;IACA;;EAJA,CA3DA;EAiEAG;IACA;IACA;MACAJ;MACAA;MACA;QACAjB,OADA;QAEAc,eAFA;QAGAQ,SAHA;QAIAC;UACAL,iCADA;UAEAM,gBAFA;UAGAC,0BAHA;UAIAC;QAJA;MAJA;MAWA;MACA;QAAAtB;MAAA;MACAa;MACA;MACAA;MACA;IACA,CAtBA;;IAuBA;IACA;MACA;MACA;MACA;QAAAb;MAAA;;MACA;QACAuB;MACA,CAFA,MAEA;QACAA;MACA;IACA,CAjCA;;IAkCA;IACAC;MACA;MACA;MACAC;QACA;MACA,CAFA,EAEA,IAFA;IAGA,CAzCA;;IA0CA;IACA;MACA;QAAA7B;QAAA8B;MAAA;MACAb;MACA;QAAAc;QAAA3B;MAAA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;;MACA;QACA;UACA;UACA;QACA;MACA;;MACA;QACA;UACA;UACA;QACA;MACA;;MAAA;MACA;MACAa;MACA;IACA;;EArEA;AAjEA","names":["components","HemoList","BtnBuyingAndSelling","NeedAuth","InfiniteLoading","props","value","type","default","filterAmount","filterMents","data","bool","BuyingAndSelling","dialog","is_need_auth","test","list","loading","finished","refreshing","page","placeMsg","watch","console","currency","created","computed","methods","limit","search","coin","payments","amount","$state","onRefresh","setTimeout","advId","code"],"sourceRoot":"src/views/home/components","sources":["IWantToBuy.vue"],"sourcesContent":["<!--\n * @Name: 我要买\n * @Date: 2022-06-17 16:47:03\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 20:12:13\n-->\n<template>\n  <div>\n    <!-- <P-list ref=\"P-list\" :footer=\"true\" @refresh=\"onRefresh\" @load=\"onList\">\n      <template v-slot=\"{ row, index }\">\n        <template v-if=\"index == 0\">\n          \n        </template>\n        <template v-else>\n          <Hemo-list\n            :name=\"row.title\"\n            :Price=\"row.Price\"\n            @btnClick=\"btnClick(row)\"\n          ></Hemo-list>\n        </template>\n      </template>\n    </P-list> -->\n    <div class=\"c2c-list\">\n      <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n        <ul>\n          <li v-for=\"(row, index) in list\" :key=\"index\">\n            <Hemo-list :row=\"row\" @btnClick=\"btnClick(row)\"></Hemo-list>\n          </li>\n        </ul>\n        <infinite-loading\n          spinner=\"spiral\"\n          @infinite=\"loadMoreEvent\"\n          :distance=\"0\"\n        >\n          <div slot=\"spinner\" class=\"p-t-40\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n        </infinite-loading>\n      </van-pull-refresh>\n    </div>\n    <BtnBuyingAndSelling\n      v-model=\"bool.BuyingAndSelling\"\n      :currency=\"value\"\n      :row=\"placeMsg\"\n    />\n    <P-alert v-model=\"bool.dialog\">\n      <div class=\"m-20-b size16 h-25-l\">广告已被商家修改，该广告已失效</div>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i size-14-i\"\n        @click=\"\n          bool.dialog = false;\n          bool.is_need_auth = true;\n        \"\n        >好的</P-button\n      >\n    </P-alert>\n    <!-- <NeedAuth v-model=\"bool.is_need_auth\"/> -->\n  </div>\n</template>\n\n<script>\nimport HemoList from \"@/components/hemo-list\";\nimport BtnBuyingAndSelling from \"./BtnBuyingAndSelling\";\nimport NeedAuth from \"./need_auth\";\nimport { AdvTradeList, TradeVerify } from \"../../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: {\n    HemoList,\n    BtnBuyingAndSelling,\n    NeedAuth,\n    InfiniteLoading,\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      default: \"\",\n    },\n    filterAmount: {\n      type: [String, Number],\n      default: null,\n    },\n    filterMents: {\n      type: [String, Number],\n      default: null,\n    },\n  },\n  data() {\n    return {\n      bool: {\n        BuyingAndSelling: false,\n        dialog: false,\n        is_need_auth: false,\n      },\n      test: true,\n      list: [],\n      loading: false,\n      finished: false, //是否已加载完成，加载完成后不再触发load事件\n      refreshing: false,\n      page: 0,\n      loading: false,\n      list: [],\n      placeMsg: {}, //下单信息\n    };\n  },\n  watch: {\n    // value(val){\n    //   console.log(val)\n    // }\n    filterAmount(val) {\n      this.onList();\n      console.log(val);\n    },\n    filterMents(val) {\n      this.onList();\n      console.log(val);\n    },\n    currency(_val) {\n      this.onList();\n    },\n  },\n  created() {\n    // this.onList();\n    // console.log(this.filterAmount)\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    currency() {\n      return this.current.amount_way;\n    },\n  },\n  methods: {\n    //获取交易列表\n    async onList() {\n      console.log(1);\n      console.log(this.value);\n      const params = {\n        type: 1,\n        page: this.page,\n        limit: 10,\n        search: {\n          currency: this.current.amount_way,\n          coin: this.value,\n          payments: this.filterMents,\n          amount: this.filterAmount,\n        },\n      };\n      const result = await AdvTradeList(params);\n      const { data } = result;\n      console.log(result);\n      this.list = data.list;\n      console.log(this.list);\n      return result;\n    },\n    // 加载更多\n    async loadMoreEvent($state) {\n      this.page += 1;\n      const result = await this.onList();\n      const { data } = result;\n      if (this.list.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    //刷新\n    onRefresh() {\n      this.page = 0;\n      this.onList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    //点击购买\n    async btnClick(row) {\n      const result = await TradeVerify({ type: 2, advId: row.id });\n      console.log(result);\n      const { code, data } = result;\n      if (code == 100016) {\n        this.bool.dialog = true;\n        return;\n      } else if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      if (data.rules.kyc.required) {\n        if (!data.rules.kyc.val) {\n          this.$toast(\"您尚未完成实名认证\");\n          return;\n        }\n      }\n      if (data.rules.pay_password.required) {\n        if (!data.rules.pay_password.val) {\n          this.$toast(\"您尚未设置交易密码\");\n          return;\n        }\n      };\n      this.placeMsg = row;\n      console.log(this.placeMsg);\n      this.bool.BuyingAndSelling = true;\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.c2c-list {\n  /deep/.van-pull-refresh {\n    height: 70vh;\n    overflow: auto;\n  }\n}\n</style>"]}]}