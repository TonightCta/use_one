{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/bankCard/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/bankCard/index.vue","mtime":1658220335478},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvdHFsX3l5L0RvY3VtZW50cy9jb2RlL3VzZV9vbmUvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE4LjZAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX3Z1ZXggPSByZXF1aXJlKCJ2dWV4Iik7Cgp2YXIgX3Z1ZUluZmluaXRlTG9hZGluZyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgidnVlLWluZmluaXRlLWxvYWRpbmciKSk7Cgp2YXIgX2RlZmF1bHQgPSB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhcmFtczogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgbGltaXQ6IDEwCiAgICAgIH0sCiAgICAgIHR5cGVMaXN0OiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGNhcmRMaXN0OiBbXSwKICAgICAgY2hlY2tlZDogZmFsc2UKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsgLi4uKDAsIF92dWV4Lm1hcFN0YXRlKShbImN1cnJlbnQiXSkKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEluZmluaXRlTG9hZGluZzogX3Z1ZUluZmluaXRlTG9hZGluZy5kZWZhdWx0CiAgfSwKCiAgY3JlYXRlZCgpIHsvLyB0aGlzLm9uTGlzdCgpOwogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLm9uVHlwZSgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDEwMDApOwogICAgfSwKCiAgICBhc3luYyBvblR5cGUoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlTWFwID0gYXdhaXQgQVBJLkdldERhdGEodGhpcywgImNhcmQvbWFwIik7CiAgICAgIHRoaXMudHlwZUxpc3QgPSByZXNwb25zZU1hcDsKICAgIH0sCgogICAgYXN5bmMgbG9hZE1vcmVFdmVudCgkc3RhdGUpIHsKICAgICAgdGhpcy5wYXJhbXMubGltaXQgKz0gMTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5vbkxpc3QoKTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IHJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmNhcmRMaXN0Lmxlbmd0aCA9PSBkYXRhLnRvdGFsKSB7CiAgICAgICAgJHN0YXRlLmNvbXBsZXRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHN0YXRlLmxvYWRlZCgpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIG9uTGlzdCgpIHsKICAgICAgLy8gICBBUEkuR2V0RGF0YSh0aGlzLCAiY2FyZC9saXN0IiwgdGhpcy5wYXJhbXMpLnRoZW4ocmVzcG9uc2UgPT4gewogICAgICAvLyAgICAgICBjb25zdCB7IGNvZGUsIGRhdGEsIG1lc3NhZ2UgfSA9IHJlc3BvbnNlCiAgICAgIC8vICAgICAgIGlmIChjb2RlID09IDIwMCkgewogICAgICAvLyAgICAgICAgICAgY29uc3QgeyBsaXN0LCB0b3RhbCB9ID0gZGF0YQogICAgICAvLyAgICAgICAgICAgdGhpcy4kcmVmc1snUC1saXN0J10uQWRkKGxpc3QsIHRvdGFsKQogICAgICAvLyAgICAgICB9IGVsc2UgewogICAgICAvLyAgICAgICAgICAgdGhpcy4kcmVmc1snUC1saXN0J10ub25PdmVybGF5KGZhbHNlKQogICAgICAvLyAgICAgICAgICAgdGhpcy4kdG9hc3QuZmFpbChtZXNzYWdlKTsKICAgICAgLy8gICAgICAgfQogICAgICAvLyAgIH0pLmNhdGNoKGVycm9yID0+IHsKICAgICAgLy8gICAgICAgdGhpcy4kdG9hc3QuZmFpbChlcnJvcik7CiAgICAgIC8vICAgfSk7CiAgICAgIC8vICAgdGhpcy5wYXJhbXMucGFnZSsrOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBUEkuR2V0RGF0YSh0aGlzLCAiY2FyZC9saXN0IiwgdGhpcy5wYXJhbXMpOwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gcmVzdWx0OwogICAgICBjb25zdCB7CiAgICAgICAgbGlzdAogICAgICB9ID0gZGF0YTsKICAgICAgdGhpcy5jYXJkTGlzdCA9IGxpc3Q7CiAgICAgIHRoaXMuY2FyZExpc3QuZm9yRWFjaChlID0+IHsKICAgICAgICB0aGlzLiRzZXQoZSwgImNoZWNrZWQiLCBlLnN0YXR1cyA9PSAxID8gdHJ1ZSA6IGZhbHNlKTsKICAgICAgfSk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAoKICAgIC8vIG9uUmVmcmVzaCgpIHsKICAgIC8vICAgdGhpcy5wYXJhbXMucGFnZSA9IDA7CiAgICAvLyAgIHRoaXMub25MaXN0KCk7CiAgICAvLyB9LAogICAgY2FyZFR5cGUoaWQpIHsKICAgICAgbGV0IHJvdyA9IHRoaXMudHlwZUxpc3QuZmlsdGVyKGl0ZW0gPT4gewogICAgICAgIGlmIChpdGVtLmlkID09PSBpZCkgewogICAgICAgICAgcmV0dXJuIGl0ZW07CiAgICAgICAgfQogICAgICB9KTsKICAgICAgbGV0IG5hbWUgPSAi5pyq55+lIjsKCiAgICAgIGlmIChyb3cubGVuZ3RoICE9IDApIHsKICAgICAgICBuYW1lID0gcm93WzBdLm5hbWU7CiAgICAgIH0KCiAgICAgIHJldHVybiBuYW1lOwogICAgfSwKCiAgICBhc3luYyB1cENhcmRTdGF0dXMoX2lkLCBfc3RhdHVzKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBpZDogX2lkLAogICAgICAgIHN0YXR1czogX3N0YXR1cyA/IDEgOiAwCiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFQSS5VcGRhdGUodGhpcywgImNhcmQvc3RhdHVzIiwgcGFyYW1zKTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUsCiAgICAgICAgZGF0YSwKICAgICAgICBtZXNzYWdlCiAgICAgIH0gPSByZXN1bHQ7CgogICAgICBpZiAoY29kZSA9PSAyMDApIHsKICAgICAgICB0aGlzLmZvcm0gPSBkYXRhOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucm91dGVyLmJhY2soLTEpOwogICAgICB9CiAgICB9CgogIH0KfTsKZXhwb3J0cy5kZWZhdWx0ID0gX2RlZmF1bHQ7"},{"version":3,"mappings":";;;;;;;;;AAiGA;;AACA;;eACA;EACAA;IACA;MACAC;QACAC,OADA;QAEAC;MAFA,CADA;MAKAC,YALA;MAMAC,cANA;MAOAC,YAPA;MAQAC;IARA;EAUA,CAZA;;EAaAC,YACA;EADA,CAbA;EAgBAC;IACAC;EADA,CAhBA;;EAmBAC,WACA;EACA,CArBA;;EAsBAC;IACA;EACA,CAxBA;;EAyBAC;IACAC;MACA;MACAC;QACA;MACA,CAFA,EAEA,IAFA;IAGA,CANA;;IAOA;MACA;MACA;IACA,CAVA;;IAWA;MACA;MACA;MACA;QAAAf;MAAA;;MACA;QACAgB;MACA,CAFA,MAEA;QACAA;MACA;IACA,CApBA;;IAqBA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QAAAhB;MAAA;MACA;QAAAiB;MAAA;MACA;MACA;QACA;MACA,CAFA;MAGA;IACA,CA3CA;;IA4CA;IACA;IACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA,CAJA;MAKA;;MACA;QACAC;MACA;;MACA;IACA,CA3DA;;IA4DA;MACA;QACAC,OADA;QAEAC;MAFA;MAIA;MACA;QAAAC;QAAAtB;QAAAuB;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EAxEA;AAzBA,C","names":["data","params","page","limit","typeList","loading","cardList","checked","computed","components","InfiniteLoading","created","mounted","methods","onRefresh","setTimeout","$state","list","cardType","name","id","status","code","message"],"sourceRoot":"src/views/bankCard","sources":["index.vue"],"sourcesContent":["<!--\n * @Name: 收款方式管理\n * @Date: 2022-07-04 14:45:50\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 18:20:01\n-->\n<template>\n  <P-main>\n    <Navigation />\n    <P-body type=\"Fei\" class=\"m-60-b\">\n      <h1>收款方式管理</h1>\n      <!-- <P-list ref=\"P-list\" theme=\"card\" :footer=\"true\" @refresh=\"onRefresh\" @load=\"onList\">\n                <template v-slot=\"{row}\">\n                    <div class=\"cardPackage ui-flex-center\">\n                        <B-a :href=\"`/bankcard/operation/${row.id}`\">\n                            <div class=\"ui-flex-left\">\n                                <B-svg name=\"qianBao\" width=\"14px\" />\n                                <div class=\"whereItIs\">{{row.id}}-{{ cardType(row.p_id) }} {{row.bank}}</div>\n                                <div class=\"INR\">{{current.amount_way}}</div>\n                            </div>\n                            <div class=\"ui-flex-left info\">\n                                <div>{{row.username}}</div>\n                                <div class=\"m-10-l\">{{row.account}}</div>\n                            </div>\n                        </B-a>\n                        <div>\n                            <B-switch v-model=\"row.status\" open=\"\" close=\"\" size=\"default\" @on-change=\"updateStatus\"\n                                :item=\"row\" />\n                        </div>\n                    </div>\n                </template>\n                <template #footer>\n                    <ul class=\"ui-list-xing\">\n                        <li><span class=\"ui-col-hong\">请确保您设置的账户为本人实名账户</span>，非本人实名账户收款会导致订单失败且账号被冻结</li>\n                        <li>向买家仅展示已开启的收款账号</li>\n                    </ul>\n                </template>\n            </P-list> -->\n\n      <div class=\"card-list\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <ul>\n            <li v-for=\"(card, index) in cardList\" :key=\"index\">\n              <div class=\"card-msg\">\n                <p class=\"iconfont icon-a-bianzu3beifen\" type=\"icon\"></p>\n                <div class=\"bank-name\">\n                  <div class=\"flex-box\">\n                    <p>\n                      {{ card.id }}-{{ cardType(card.p_id) }} {{ card.bank }}\n                    </p>\n                    <p class=\"label-cur\">{{ current.amount_way }}</p>\n                  </div>\n                  <p>{{ card.username }}&nbsp;&nbsp;{{ card.account }}</p>\n                </div>\n              </div>\n              <div class=\"card-oper\">\n                <van-switch\n                  v-model=\"card.checked\"\n                  @change=\"upCardStatus(card.id, card.checked)\"\n                  size=\"18px\"\n                  active-color=\"#2CBC94\"\n                  inactive-color=\"#f8f8f8\"\n                />\n              </div>\n            </li>\n          </ul>\n          <infinite-loading\n            spinner=\"spiral\"\n            @infinite=\"loadMoreEvent\"\n            :distance=\"0\"\n          >\n            <div slot=\"spinner\">\n              <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n            </div>\n            <div slot=\"no-more\">没有更多了</div>\n            <div slot=\"no-results\">没有数据了</div>\n          </infinite-loading>\n          <p class=\"other-li m-t-22\">\n            *<span class=\"ui-col-hong\">请确保您设置的账户为本人实名账户</span\n            >，非本人实名账户收款会导致订单失败且账号被冻结\n          </p>\n          <p class=\"other-li m-b-60\">向买家仅展示已开启的收款账号</p>\n        </van-pull-refresh>\n      </div>\n    </P-body>\n    <Foo-ter>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i\"\n        @click=\"$router.push('/bankcard/addtype')\"\n        >添加收款方式</P-button\n      >\n    </Foo-ter>\n  </P-main>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nexport default {\n  data() {\n    return {\n      params: {\n        page: 1,\n        limit: 10,\n      },\n      typeList: [],\n      loading: false,\n      cardList: [],\n      checked: false,\n    };\n  },\n  computed: {\n    ...mapState([\"current\"]),\n  },\n  components: {\n    InfiniteLoading,\n  },\n  created() {\n    // this.onList();\n  },\n  mounted() {\n    this.onType();\n  },\n  methods: {\n    onRefresh() {\n      this.onList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    async onType() {\n      const responseMap = await API.GetData(this, \"card/map\");\n      this.typeList = responseMap;\n    },\n    async loadMoreEvent($state) {\n      this.params.limit += 1;\n      const result = await this.onList();\n      const { data } = result;\n      if (this.cardList.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    async onList() {\n      //   API.GetData(this, \"card/list\", this.params).then(response => {\n      //       const { code, data, message } = response\n      //       if (code == 200) {\n      //           const { list, total } = data\n      //           this.$refs['P-list'].Add(list, total)\n      //       } else {\n      //           this.$refs['P-list'].onOverlay(false)\n      //           this.$toast.fail(message);\n      //       }\n      //   }).catch(error => {\n      //       this.$toast.fail(error);\n      //   });\n      //   this.params.page++;\n      const result = await API.GetData(this, \"card/list\", this.params);\n      const { data } = result;\n      const { list } = data;\n      this.cardList = list;\n      this.cardList.forEach((e) => {\n        this.$set(e, \"checked\", e.status == 1 ? true : false);\n      });\n      return result;\n    },\n    // onRefresh() {\n    //   this.params.page = 0;\n    //   this.onList();\n    // },\n    cardType(id) {\n      let row = this.typeList.filter((item) => {\n        if (item.id === id) {\n          return item;\n        }\n      });\n      let name = \"未知\";\n      if (row.length != 0) {\n        name = row[0].name;\n      }\n      return name;\n    },\n    async upCardStatus(_id, _status) {\n      const params = {\n        id: _id,\n        status: _status ? 1 : 0,\n      };\n      const result = await API.Update(this, \"card/status\", params);\n      const { code, data, message } = result;\n      if (code == 200) {\n        this.form = data;\n      } else {\n        this.router.back(-1);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\nh1 {\n  font-size: 22px;\n  font-weight: 500;\n  color: #333333;\n  margin-bottom: 22px;\n}\n\n.cardPackage {\n  .whereItIs {\n    font-size: 14px;\n    font-weight: bold;\n    color: #333333;\n    margin: 0px 5px;\n  }\n  .INR {\n    font-size: 10px;\n    color: #666666;\n    background: #efefef;\n    border-radius: 2px;\n    padding: 0px 5px;\n    transform: scale(0.8);\n  }\n  .info {\n    padding-top: 5px;\n    padding-left: 20px;\n    font-size: 12px;\n    color: #666666;\n  }\n}\n\n.ui-list-xing {\n  margin-top: 22px;\n  font-size: 12px;\n  color: #999999;\n}\n</style>\n"]}]}