{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/login/ForgotPassword.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/login/ForgotPassword.vue","mtime":1657511087066},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:InVzZSBzdHJpY3QiOwoKdmFyIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQgPSByZXF1aXJlKCIvVXNlcnMvdHFsX3l5L0RvY3VtZW50cy9jb2RlL3VzZV9vbmUvbm9kZV9tb2R1bGVzL19AYmFiZWxfcnVudGltZUA3LjE4LjZAQGJhYmVsL3J1bnRpbWUvaGVscGVycy9pbnRlcm9wUmVxdWlyZURlZmF1bHQuanMiKS5kZWZhdWx0OwoKT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgewogIHZhbHVlOiB0cnVlCn0pOwpleHBvcnRzLmRlZmF1bHQgPSB2b2lkIDA7Cgp2YXIgX21peGlucyA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZSgiLi9taXhpbnMiKSk7Cgp2YXIgX2RlZmF1bHQgPSB7CiAgbWl4aW5zOiBbX21peGlucy5kZWZhdWx0XSwKICBjb21wdXRlZDogewogICAgYWNjb3VudCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlID09IDAgPyB0aGlzLkZvcm0ucGhvbmUgOiB0aGlzLkZvcm0uZW1haWw7CiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgb25QaG9uZU9yRW1haWwocmVzcG9uc2UsIHJ1bGVGb3JtKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb2RlLAogICAgICAgIG1lc3NhZ2UKICAgICAgfSA9IHJlc3BvbnNlOwoKICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgbWVzc2FnZTogJ+eUqOaIt+S4jeWtmOWcqCcsCiAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmNvbU5hbWUgPSAnVmVyaWZpY2F0aW9uJzsKICAgICAgICB0aGlzLkZvcm0ucGhvbmUgPSBydWxlRm9ybS5waG9uZTsKICAgICAgICB0aGlzLkZvcm0uZW1haWwgPSBydWxlRm9ybS5lbWFpbDsKICAgICAgICB0aGlzLkZvcm0ucGhvbmVfcHJlZml4ID0gcnVsZUZvcm0ucGhvbmVfcHJlZml4OwogICAgICB9CiAgICB9LAoKICAgIG9uVmVyaWZpY2F0aW9uKHJlc3BvbnNlLCBydWxlRm9ybSkgewogICAgICBjb25zdCB7CiAgICAgICAgY29kZSwKICAgICAgICBtZXNzYWdlCiAgICAgIH0gPSByZXNwb25zZTsKCiAgICAgIGlmIChjb2RlID09IDIwMCkgewogICAgICAgIHRoaXMuY29tTmFtZSA9ICdQYXNzd29yZCc7CiAgICAgICAgdGhpcy5Gb3JtLmNvZGUgPSBydWxlRm9ybTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICBtZXNzYWdlOiBtZXNzYWdlLAogICAgICAgICAgcG9zaXRpb246ICdib3R0b20nCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgb25QYXNzd29yZChydWxlRm9ybSkgewogICAgICB0aGlzLiR0b2FzdC5sb2FkaW5nKHsKICAgICAgICBkdXJhdGlvbjogMCwKICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCfkv67mlLknKQogICAgICB9KTsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncmVnaXN0ZXJlZC9mb3JnZXQnLCB7CiAgICAgICAgdHlwZTogdGhpcy5saXN0W3RoaXMuYWN0aXZlXS5pZCwKICAgICAgICBlbWFpbDogdGhpcy5Gb3JtLmVtYWlsLAogICAgICAgIHBob25lOiB0aGlzLkZvcm0ucGhvbmUsCiAgICAgICAgcGhvbmVfcHJlZml4OiB0aGlzLkZvcm0ucGhvbmVfcHJlZml4LAogICAgICAgIGNvZGU6IHRoaXMuRm9ybS5jb2RlLAogICAgICAgIHBhc3N3b3JkOiBydWxlRm9ybS5wYXNzd29yZCwKICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHJ1bGVGb3JtLmNvbmZpcm1QYXNzd29yZAogICAgICB9KTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUsCiAgICAgICAgbWVzc2FnZQogICAgICB9ID0gcmVzcG9uc2U7CgogICAgICBpZiAoY29kZSA9PSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdC5zdWNjZXNzKCfkv67mlLnmiJDlip8nKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgcGF0aDogJy9sb2dpbicKICAgICAgICAgIH0pOwogICAgICAgIH0sIDE1MDApOwogICAgICB9IGVsc2UgaWYgKGNvZGUgPT0gMTAwMDA1KSB7CiAgICAgICAgdGhpcy4kdG9hc3QuZmFpbChtZXNzYWdlKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIHRoaXMuY29tTmFtZSA9ICdWZXJpZmljYXRpb24nOwogICAgICAgIH0sIDE1MDApOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0LmZhaWwoJ+ivt+mHjeaWsOaJvuWbnicpOwogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5jb21OYW1lID0gJ1Bob25lT3JFbWFpbCc7CiAgICAgICAgfSwgMTUwMCk7CiAgICAgIH0KICAgIH0sCgogICAgb25WQ2xpY2tMZWZ0KCkgewogICAgICB0aGlzLmNvbU5hbWUgPSAnUGhvbmVPckVtYWlsJzsKICAgIH0sCgogICAgb25QQ2xpY2tMZWZ0KCkgewogICAgICB0aGlzLmNvbU5hbWUgPSAnVmVyaWZpY2F0aW9uJzsKICAgIH0KCiAgfQp9OwpleHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDs="},{"version":3,"mappings":";;;;;;;;;AAkBA;;eAEA;EACAA,yBADA;EAEAC;IACAC;MACA;IACA;;EAHA,CAFA;EAOAC;IACAC;MACA;QAAAC;QAAAC;MAAA;;MACA;QACA;UACAA,gBADA;UAEAC;QAFA;MAIA,CALA,MAKA;QACA;QACA;QACA;QACA;MACA;IACA,CAdA;;IAeAC;MACA;QAAAH;QAAAC;MAAA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;UACAA,gBADA;UAEAC;QAFA;MAIA;IACA,CA1BA;;IA2BA;MACA;QACAE,WADA;QAEAC,iBAFA;QAGAJ;MAHA;MAMA;QACAK,+BADA;QAEAC,sBAFA;QAGAC,sBAHA;QAIAC,oCAJA;QAKAT,oBALA;QAMAU,2BANA;QAOAC;MAPA;MASA;QAAAX;QAAAC;MAAA;;MACA;QACA;QACAW;UACA;YACAC;UADA;QAGA,CAJA,EAIA,IAJA;MAKA,CAPA,MAOA;QACA;QACAD;UACA;QACA,CAFA,EAEA,IAFA;MAGA,CALA,MAKA;QACA;QACAA;UACA;QACA,CAFA,EAEA,IAFA;MAGA;IACA,CA9DA;;IA+DAE;MACA;IACA,CAjEA;;IAkEAC;MACA;IACA;;EApEA;AAPA,C","names":["mixins","computed","account","methods","onPhoneOrEmail","code","message","position","onVerification","duration","forbidClick","type","email","phone","phone_prefix","password","password_confirmation","setTimeout","path","onVClickLeft","onPClickLeft"],"sourceRoot":"src/views/login","sources":["ForgotPassword.vue"],"sourcesContent":["<!--\n * @Name: 忘记密码\n * @Date: 2022-06-29 11:08:30\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:18:48\n-->\n<template>\n    <div>\n        <PhoneOrEmail v-if=\"comName == 'PhoneOrEmail'\" title=\"重置密码\" :tabs-active.sync=\"active\" :list=\"list\"\n            :phone_prefix=\"Form.phone_prefix\" :phone=\"Form.phone\" :email=\"Form.email\" @click=\"onPhoneOrEmail\" />\n        <Verification v-if=\"comName == 'Verification'\" :title=\"list[active]\" :active=\"active\" :scene=\"2\"\n            :phone_prefix=\"Form.phone_prefix\" :phone=\"Form.phone\" :email=\"Form.email\" @click=\"onVerification\"\n            @click-left=\"onVClickLeft\" />\n        <Password v-if=\"comName == 'Password'\" @click=\"onPassword\" @click-left=\"onPClickLeft\" btnName=\"修改\" />\n    </div>\n</template>\n\n<script>\nimport Mixins from './mixins'\n\nexport default {\n    mixins: [Mixins],\n    computed: {\n        account() {\n            return this.active == 0 ? this.Form.phone : this.Form.email\n        }\n    },\n    methods: {\n        onPhoneOrEmail(response, ruleForm) {\n            const { code, message } = response\n            if (code == 200) {\n                this.$toast({\n                    message: '用户不存在',\n                    position: 'bottom'\n                });\n            } else {\n                this.comName = 'Verification'\n                this.Form.phone = ruleForm.phone\n                this.Form.email = ruleForm.email\n                this.Form.phone_prefix = ruleForm.phone_prefix\n            }\n        },\n        onVerification(response, ruleForm) {\n            const { code, message } = response;\n            if (code == 200) {\n                this.comName = 'Password'\n                this.Form.code = ruleForm\n            } else {\n                this.$toast({\n                    message: message,\n                    position: 'bottom'\n                });\n            }\n        },\n        async onPassword(ruleForm) {\n            this.$toast.loading({\n                duration: 0,\n                forbidClick: true,\n                message: this.$t('修改')\n            });\n\n            const response = await this.$store.dispatch('registered/forget', {\n                type: this.list[this.active].id,\n                email: this.Form.email,\n                phone: this.Form.phone,\n                phone_prefix: this.Form.phone_prefix,\n                code: this.Form.code,\n                password: ruleForm.password,\n                password_confirmation: ruleForm.confirmPassword,\n            })\n            const { code, message } = response\n            if (code == 200) {\n                this.$toast.success('修改成功');\n                setTimeout(() => {\n                    this.$router.push({\n                        path: '/login'\n                    })\n                }, 1500)\n            } else if (code == 100005) {\n                this.$toast.fail(message);\n                setTimeout(() => {\n                    this.comName = 'Verification'\n                }, 1500)\n            } else {\n                this.$toast.fail('请重新找回');\n                setTimeout(() => {\n                    this.comName = 'PhoneOrEmail'\n                }, 1500)\n            }\n        },\n        onVClickLeft() {\n            this.comName = 'PhoneOrEmail'\n        },\n        onPClickLeft() {\n            this.comName = 'Verification'\n        }\n    }\n};\n</script>"]}]}