{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/order/PleasePayment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/order/PleasePayment.vue","mtime":1658713050076},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFuUXVhbkJhb1poYW5nIGZyb20gIkAvY29tcG9uZW50cy9BblF1YW5CYW9aaGFuZyI7CmltcG9ydCBQYXlDaG9vc2UgZnJvbSAiQC9jb21wb25lbnRzL3BheS13YXkvcGF5LWNob29zZSI7CmltcG9ydCBDYW5jZWxBbGVydE9yZGVyIGZyb20gIi4vY29tcG9uZW50cy9jYW5jZWxBbGVydE9yZGVyIjsKaW1wb3J0IHsgT3JkZXJEZXRhaWxzLCBUeXBlcywgQ2FuY2VsT3JkZXIgfSBmcm9tICIuLi8uLi9hcGkvYXBpIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFuUXVhbkJhb1poYW5nLAogICAgUGF5Q2hvb3NlLAogICAgQ2FuY2VsQWxlcnRPcmRlcgogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZDogIiIsCiAgICAgIHN0YXRlOiB7CiAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgdGl0bGU6IFsi6K+35LuY5qy+IiwgIuiuouWNleW3suWPlua2iCIsICLorqLljZXlt7LlrozmiJAiXQogICAgICB9LAogICAgICBib29sOiB7CiAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgY2FuY2VsOiBmYWxzZQogICAgICB9LAogICAgICBvcmRlck1zZzoge30sCiAgICAgIC8v6K6i5Y2V5L+h5oGvCiAgICAgIGRhdGU6IDAgLy/nu5PmnZ/lgJLorqHml7YKCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7IC4uLm1hcFN0YXRlKFsnY3VycmVudCddKSwKCiAgICBvcmRlcklEKCkgewogICAgICByZXR1cm4gdGhpcy5jdXJyZW50Lm9yZGVySUQ7CiAgICB9LAoKICAgIGxpc3QoKSB7CiAgICAgIHZhciBfbXNnJGFtb3VudF9jdXJyZW5jeSwgX051bWJlciwgX21zZyRhbW91bnRfY29pbjsKCiAgICAgIGNvbnN0IG1zZyA9IHRoaXMub3JkZXJNc2c7CiAgICAgIHJldHVybiBbewogICAgICAgIHRpdGxlOiAi5oC76YeR6aKdIiwKICAgICAgICB2YWx1ZTogKF9tc2ckYW1vdW50X2N1cnJlbmN5ID0gbXNnLmFtb3VudF9jdXJyZW5jeSkgPT09IG51bGwgfHwgX21zZyRhbW91bnRfY3VycmVuY3kgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9tc2ckYW1vdW50X2N1cnJlbmN5LnRvRml4ZWQoMiksCiAgICAgICAgYm9yZGVyOiBmYWxzZQogICAgICB9LCB7CiAgICAgICAgdGl0bGU6ICLljZXku7ciLAogICAgICAgIHZhbHVlOiAoX051bWJlciA9IE51bWJlcihtc2cucHJpY2UpKSA9PT0gbnVsbCB8fCBfTnVtYmVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfTnVtYmVyLnRvRml4ZWQoNCksCiAgICAgICAgZXh0cmE6IG1zZy5jdXJyZW5jeSwKICAgICAgICBib3JkZXI6IGZhbHNlCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuaVsOmHjyIsCiAgICAgICAgdmFsdWU6IChfbXNnJGFtb3VudF9jb2luID0gbXNnLmFtb3VudF9jb2luKSA9PT0gbnVsbCB8fCBfbXNnJGFtb3VudF9jb2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbXNnJGFtb3VudF9jb2luLnRvRml4ZWQoNCksCiAgICAgICAgZXh0cmE6IG1zZy5jb2luLAogICAgICAgIGJvcmRlcjogZmFsc2UKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi6K6i5Y2V57yW5Y+3IiwKICAgICAgICB2YWx1ZTogbXNnLm9yZGVyX3NuLAogICAgICAgIGJvcmRlcjogZmFsc2UKICAgICAgfSwgewogICAgICAgIHRpdGxlOiAi5LiL5Y2V5pe26Ze0IiwKICAgICAgICB2YWx1ZTogbXNnLmNyZWF0ZWRfYXQsCiAgICAgICAgYm9yZGVyOiBmYWxzZQogICAgICB9XTsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgIiRyb3V0ZS5wYXJhbXMiOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHYpIHsKICAgICAgICBpZiAodi5pZCkgewogICAgICAgICAgdGhpcy5pZCA9IHYuaWQ7CiAgICAgICAgICBjb25zb2xlLmxvZyh2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRPcmRlckRldGFpbCgpOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8v6I635Y+W6K6i5Y2V6K+m5oOFCiAgICBhc3luYyBnZXRPcmRlckRldGFpbCgpIHsKICAgICAgY29uc3QgdHlwZXMgPSBhd2FpdCBUeXBlcyh7CiAgICAgICAgc2NlbmU6ICJBZHNPcmRlclN0YXR1cyIKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHR5cGVzKTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgT3JkZXJEZXRhaWxzKHsKICAgICAgICBpZDogdGhpcy5vcmRlcklECiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICB0aGlzLm9yZGVyTXNnID0gcmVzdWx0LmRhdGE7CiAgICAgIHR5cGVzLmRhdGEubWFwLmZvckVhY2goZSA9PiB7CiAgICAgICAgaWYgKHRoaXMub3JkZXJNc2cuc3RhdHVzID09IGUudmFsKSB7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5vcmRlck1zZywgInN0YXR1c190ZXh0IiwgZS5uYW1lKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmRhdGUgPSBuZXcgRGF0ZSh0aGlzLm9yZGVyTXNnLmV4cGlyZXNfYXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgfSwKCiAgICAvL+WPlua2iOiuouWNlQogICAgYXN5bmMgY2FuY2VsVGhlT3JkZXIodikgewogICAgICAvLyAgIHRoaXMuc3RhdGUuaW5kZXggPSAxOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDYW5jZWxPcmRlcih7CiAgICAgICAgdHlwZTogdGhpcy5vcmRlck1zZy50eXBlLAogICAgICAgIGlkOiB0aGlzLm9yZGVyTXNnLmlkCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICBjb25zdCB7CiAgICAgICAgY29kZQogICAgICB9ID0gcmVzdWx0OwoKICAgICAgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdi5zaG93ID0gZmFsc2U7CiAgICAgIHRoaXMuJHRvYXN0KCLorqLljZXlj5bmtojmiJDlip8iKTsKICAgICAgdGhpcy5nZXRPcmRlckRldGFpbCgpOwogICAgfSwKCiAgICBvblBheUNob29zZShyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvcGF5bWVudCIKICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AAyIA;AACA;AACA;AACA;AACA;AACA;EACAA;IAAAC;IAAAC;IAAAC;EAAA,CADA;;EAEAC;IACA;MACAC,MADA;MAEAC;QACAC,QADA;QAEAC;MAFA,CAFA;MAMAC;QACAC,WADA;QAEAC;MAFA,CANA;MAUAC,YAVA;MAUA;MACAC,OAXA,CAWA;;IAXA;EAaA,CAhBA;;EAiBAC,YACA,wBADA;;IAEAC;MACA;IACA,CAJA;;IAKAC;MAAA;;MACA;MACA,QACA;QACAR,YADA;QAEAS,0IAFA;QAGAC;MAHA,CADA,EAMA;QACAV,WADA;QAEAS,iGAFA;QAGAE,mBAHA;QAIAD;MAJA,CANA,EAYA;QACAV,WADA;QAEAS,0HAFA;QAGAE,eAHA;QAIAD;MAJA,CAZA,EAkBA;QAAAV;QAAAS;QAAAC;MAAA,CAlBA,EAmBA;QAAAV;QAAAS;QAAAC;MAAA,CAnBA;IAqBA;;EA5BA,CAjBA;EA+CAE;IACA;MACAC,UADA;MAEAC,eAFA;MAGAC;QACA;UACA;UACAC;QACA;MACA;IARA;EADA,CA/CA;;EA2DAC;IACA;EACA,CA7DA;;EA8DAC;IACA;IACA;MACA;QAAAC;MAAA;MACAH;MACA;QAAAnB;MAAA;MACAmB;MACA;MACAI;QACA;UACA;QACA;MACA,CAJA;MAKA,YACA,mEADA;IAEA,CAfA;;IAgBA;IACA;MACA;MACA;QACAC,wBADA;QAEAxB;MAFA;MAIAmB;MACA;QAAAM;MAAA;;MACA;QACA;QACA;MACA;;MACAC;MACA;MACA;IACA,CAhCA;;IAiCAC;MACA;QACAC;MADA;IAGA;;EArCA;AA9DA","names":["components","AnQuanBaoZhang","PayChoose","CancelAlertOrder","data","id","state","index","title","bool","show","cancel","orderMsg","date","computed","orderID","list","value","border","extra","watch","deep","immediate","handler","console","created","methods","scene","types","type","code","v","onPayChoose","path"],"sourceRoot":"src/views/order","sources":["PleasePayment.vue"],"sourcesContent":["<!--\n * @Name: '请付款', '订单已取消', '订单已完成'\n * @Date: 2022-06-21 14:28:01\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 17:52:22\n-->\n<template>\n  <P-main type=\"Fei\">\n    <Navigation class-name=\"Fei\" :WeiXinXiSwitch=\"true\" />\n    <div class=\"prompt\">\n      <div class=\"title\">{{ orderMsg.status_text }}</div>\n      <div class=\"note\">\n        <template v-if=\"orderMsg.status == 0\">\n          <div class=\"note-count\" v-if=\"orderMsg.type == 2\">\n            <p>请在</p>\n            <van-count-down :time=\"date\" />\n            <p>内付款给卖家，超时自动取消</p>\n          </div>\n          <div class=\"note-count\" v-else>\n            <p>买家将在</p>\n            <van-count-down :time=\"date\" />\n            <p>内付款</p>\n          </div>\n        </template>\n        <template v-if=\"orderMsg.status == 1\">{{\n          orderMsg.type == 2 ? \"等待卖家放行\" : \"买家已付款，请放行\"\n        }}</template>\n        <template v-if=\"orderMsg.status == 2\">您的订单申诉中</template>\n        <template v-if=\"orderMsg.status == 3\"\n          >您购买的资产已放入发币账户</template\n        >\n        <template v-if=\"orderMsg.status == 4\">您已取消订单</template>\n      </div>\n    </div>\n    <h4 class=\"h4\" :class=\"orderMsg.type == 1 && 'red-line'\">\n      {{ orderMsg.type == 1 ? \"出售\" : \"购买\" }} {{ orderMsg.coin }}\n    </h4>\n    <div class=\"content ui-flex-1\">\n      <P-cell :list=\"list\" theme=\"cell\">\n        <template #value_0=\"scope\">\n          <div\n            class=\"theAmountOf\"\n            :class=\"{ 'theAmountOf-hong': orderMsg.type == 1 }\"\n          >\n            <div class=\"fh\">{{ orderMsg.currency }}</div>\n            <div class=\"jg\">{{ scope.row.value }}</div>\n          </div>\n        </template>\n        <template #value_3=\"scope\">\n          <ul class=\"ui-list ui-list-hx\">\n            <li>{{ scope.row.value }}</li>\n            <li>\n              <P-copy v-model=\"scope.row.value\">\n                <B-svg name=\"copy\" style=\"width: 17px; height: 17px\"></B-svg>\n              </P-copy>\n            </li>\n          </ul>\n        </template>\n      </P-cell>\n\n      <van-cell-group :border=\"false\" class=\"m-30-t cell\">\n        <!-- <van-cell\n          v-if=\"state.index == 2\"\n          :border=\"false\"\n          title=\"买家昵称\"\n          value=\"彭于晏快递\"\n          is-link\n        ></van-cell> -->\n        <van-cell\n          v-if=\"orderMsg.type == 1\"\n          :border=\"false\"\n          title=\"买家姓名\"\n          :value=\"orderMsg.order_user.name\"\n        ></van-cell>\n        <van-cell\n          v-if=\"orderMsg.type == 2\"\n          :border=\"false\"\n          title=\"卖家昵称\"\n          :value=\"orderMsg.adv_user.name\"\n        >\n          <template #extra>\n            <div class=\"ui-flex-row\">\n              <div class=\"p-5-l\">\n                <B-svg\n                  name=\"renzhengxinxi\"\n                  style=\"width:12px; height:;13px\"\n                ></B-svg>\n              </div>\n              <van-icon name=\"arrow\" />\n            </div>\n          </template>\n        </van-cell>\n        <!-- v-if=\"state.index == 0 || state.index == 2\" -->\n        <van-cell :border=\"false\" title=\"收款方式\">\n          <template #right-icon>\n            <img\n              v-if=\"orderMsg?.adv_payments\"\n              :src=\"orderMsg?.adv_payments[0].logo\"\n              alt=\"\"\n            />\n          </template>\n        </van-cell>\n      </van-cell-group>\n\n      <template v-if=\"orderMsg.status == 0\">\n        <div class=\"Footer ui-flex\">\n          <div class=\"ui-flex-1\" v-if=\"orderMsg.type == 2\">\n            <van-button\n              type=\"default\"\n              class=\"btn-default\"\n              @click=\"bool.cancel = true\"\n              >取消订单</van-button\n            >\n          </div>\n          <div class=\"ui-flex-2 m-10-l\">\n            <van-button\n              type=\"info\"\n              class=\"btn-info\"\n              @click=\"bool.show = true\"\n              v-if=\"orderMsg.type == 2\"\n              >去付款</van-button\n            >\n            <van-button type=\"info\" class=\"btn-info\" v-else>去放行</van-button>\n          </div>\n        </div>\n      </template>\n    </div>\n    <AnQuanBaoZhang v-if=\"orderMsg.status == 0\"></AnQuanBaoZhang>\n    <PayChoose v-model=\"bool.show\" @click=\"onPayChoose\"></PayChoose>\n    <CancelAlertOrder\n      v-model=\"bool.cancel\"\n      @click=\"cancelTheOrder\"\n    ></CancelAlertOrder>\n  </P-main>\n</template>\n\n<script>\nimport AnQuanBaoZhang from \"@/components/AnQuanBaoZhang\";\nimport PayChoose from \"@/components/pay-way/pay-choose\";\nimport CancelAlertOrder from \"./components/cancelAlertOrder\";\nimport { OrderDetails, Types, CancelOrder } from \"../../api/api\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: { AnQuanBaoZhang, PayChoose, CancelAlertOrder },\n  data() {\n    return {\n      id: \"\",\n      state: {\n        index: 0,\n        title: [\"请付款\", \"订单已取消\", \"订单已完成\"],\n      },\n      bool: {\n        show: false,\n        cancel: false,\n      },\n      orderMsg: {}, //订单信息\n      date: 0, //结束倒计时\n    };\n  },\n  computed: {\n    ...mapState(['current']),\n    orderID() {\n      return this.current.orderID\n    },\n    list() {\n      const msg = this.orderMsg;\n      return [\n        {\n          title: \"总金额\",\n          value: msg.amount_currency?.toFixed(2),\n          border: false,\n        },\n        {\n          title: \"单价\",\n          value: Number(msg.price)?.toFixed(4),\n          extra: msg.currency,\n          border: false,\n        },\n        {\n          title: \"数量\",\n          value: msg.amount_coin?.toFixed(4),\n          extra: msg.coin,\n          border: false,\n        },\n        { title: \"订单编号\", value: msg.order_sn, border: false },\n        { title: \"下单时间\", value: msg.created_at, border: false },\n      ];\n    },\n  },\n  watch: {\n    \"$route.params\": {\n      deep: true,\n      immediate: true,\n      handler: function (v) {\n        if (v.id) {\n          this.id = v.id;\n          console.log(v);\n        }\n      },\n    },\n  },\n  created() {\n    this.getOrderDetail();\n  },\n  methods: {\n    //获取订单详情\n    async getOrderDetail() {\n      const types = await Types({ scene: \"AdsOrderStatus\" });\n      console.log(types);\n      const result = await OrderDetails({ id: this.orderID });\n      console.log(result);\n      this.orderMsg = result.data;\n      types.data.map.forEach((e) => {\n        if (this.orderMsg.status == e.val) {\n          this.$set(this.orderMsg, \"status_text\", e.name);\n        }\n      });\n      this.date =\n        new Date(this.orderMsg.expires_at).getTime() - new Date().getTime();\n    },\n    //取消订单\n    async cancelTheOrder(v) {\n      //   this.state.index = 1;\n      const result = await CancelOrder({\n        type: this.orderMsg.type,\n        id: this.orderMsg.id,\n      });\n      console.log(result);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      v.show = false;\n      this.$toast(\"订单取消成功\");\n      this.getOrderDetail();\n    },\n    onPayChoose(row) {\n      this.$router.push({\n        path: \"/payment\",\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.red-line::before {\n  background: #fd5656;\n}\n.prompt {\n  padding: 18px 12px;\n  background: #fff;\n\n  .title {\n    font-size: 22px;\n    color: #333333;\n    font-weight: bold;\n  }\n  .note {\n    font-size: 12px;\n    color: #666666;\n    margin-top: 10px;\n    .note-count {\n      display: flex;\n      align-items: center;\n      p {\n        transform: translateY(1px);\n      }\n    }\n    /deep/.van-count-down {\n      font-size: 17px;\n      color: #fd5656;\n      margin: 0px 3px;\n      font-weight: bold;\n    }\n  }\n}\n\n.content {\n  padding: 10px 0px;\n  background: #fff;\n  .theAmountOf {\n    position: absolute;\n    right: 16px;\n    top: 6px;\n  }\n  img {\n    width: 16px;\n    height: 16px;\n    vertical-align: middle;\n  }\n  /deep/.van-cell {\n    align-items: center;\n  }\n  /deep/.svg-icon {\n    width: 15px;\n    height: 15px;\n  }\n}\n</style>"]}]}