{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToSell.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToSell.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEhlbW9MaXN0IGZyb20gIkAvY29tcG9uZW50cy9oZW1vLWxpc3QiOwppbXBvcnQgQnRuQnV5aW5nQW5kU2VsbGluZyBmcm9tICIuL0J0bkJ1eWluZ0FuZFNlbGxpbmciOwppbXBvcnQgeyBBZHZUcmFkZUxpc3QsIFRyYWRlVmVyaWZ5IH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FwaSI7CmltcG9ydCBJbmZpbml0ZUxvYWRpbmcgZnJvbSAidnVlLWluZmluaXRlLWxvYWRpbmciOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgSGVtb0xpc3QsCiAgICBCdG5CdXlpbmdBbmRTZWxsaW5nLAogICAgSW5maW5pdGVMb2FkaW5nCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogIiIKICAgIH0sCiAgICBmaWx0ZXJBbW91bnQ6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGZpbHRlck1lbnRzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9vbDogewogICAgICAgIEJ1eWluZ0FuZFNlbGxpbmc6IGZhbHNlLAogICAgICAgIGRpYWxvZzogZmFsc2UKICAgICAgfSwKICAgICAgbGlzdDogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBmaW5pc2hlZDogZmFsc2UsCiAgICAgIC8v5piv5ZCm5bey5Yqg6L295a6M5oiQ77yM5Yqg6L295a6M5oiQ5ZCO5LiN5YaN6Kem5Y+RbG9hZOS6i+S7tgogICAgICByZWZyZXNoaW5nOiBmYWxzZSwKICAgICAgcGFnZTogMCwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGxpc3Q6IFtdLAogICAgICBwbGFjZU1zZzoge30KICAgIH07CiAgfSwKCiAgd2F0Y2g6IHsKICAgIC8vIHZhbHVlKHZhbCl7CiAgICAvLyAgIGNvbnNvbGUubG9nKHZhbCkKICAgIC8vIH0KICAgIGZpbHRlckFtb3VudCh2YWwpIHsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgICAgY29uc29sZS5sb2codmFsKTsKICAgIH0sCgogICAgZmlsdGVyTWVudHModmFsKSB7CiAgICAgIHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAoKICAgIGN1cnJlbmN5KF92YWwpIHsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgIH0KCiAgfSwKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbImN1cnJlbnQiXSksCgogICAgY3VycmVuY3koKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuYW1vdW50X3dheTsKICAgIH0KCiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBvbkxpc3QoKSB7CiAgICAgIGNvbnNvbGUubG9nKDEpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnZhbHVlKTsKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIHR5cGU6IDIsCiAgICAgICAgcGFnZTogdGhpcy5wYWdlLAogICAgICAgIGxpbWl0OiAxMCwKICAgICAgICBzZWFyY2g6IHsKICAgICAgICAgIGN1cnJlbmN5OiB0aGlzLmN1cnJlbnQuYW1vdW50X3dheSwKICAgICAgICAgIGNvaW46IHRoaXMudmFsdWUsCiAgICAgICAgICBwYXltZW50czogdGhpcy5maWx0ZXJNZW50cywKICAgICAgICAgIGFtb3VudDogdGhpcy5maWx0ZXJBbW91bnQKICAgICAgICB9CiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFkdlRyYWRlTGlzdChwYXJhbXMpOwogICAgICBjb25zdCB7CiAgICAgICAgZGF0YQogICAgICB9ID0gcmVzdWx0OwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICB0aGlzLmxpc3QgPSBkYXRhLmxpc3Q7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubGlzdCk7CiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9LAoKICAgIC8vIOWKoOi9veabtOWkmgogICAgYXN5bmMgbG9hZE1vcmVFdmVudCgkc3RhdGUpIHsKICAgICAgdGhpcy5wYWdlICs9IDE7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSByZXN1bHQ7CgogICAgICBpZiAodGhpcy5saXN0Lmxlbmd0aCA9PSBkYXRhLnRvdGFsKSB7CiAgICAgICAgJHN0YXRlLmNvbXBsZXRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHN0YXRlLmxvYWRlZCgpOwogICAgICB9CiAgICB9LAoKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5wYWdlID0gMDsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDEwMDApOwogICAgfSwKCiAgICBhc3luYyBidG5DbGljayhyb3cpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVHJhZGVWZXJpZnkoewogICAgICAgIHR5cGU6IDEsCiAgICAgICAgYWR2SWQ6IHJvdy5pZAogICAgICB9KTsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUsCiAgICAgICAgZGF0YQogICAgICB9ID0gcmVzdWx0OwoKICAgICAgaWYgKGNvZGUgPT0gMTAwMDE2KSB7CiAgICAgICAgdGhpcy5ib29sLmRpYWxvZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGRhdGEucnVsZXMua3ljLnJlcXVpcmVkKSB7CiAgICAgICAgaWYgKCFkYXRhLnJ1bGVzLmt5Yy52YWwpIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KCLmgqjlsJrmnKrlrozmiJDlrp7lkI3orqTor4EiKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChkYXRhLnJ1bGVzLnBheV9wYXNzd29yZC5yZXF1aXJlZCkgewogICAgICAgIGlmICghZGF0YS5ydWxlcy5wYXlfcGFzc3dvcmQudmFsKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdCgi5oKo5bCa5pyq6K6+572u5Lqk5piT5a+G56CBIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLnBsYWNlTXNnID0gcm93OwogICAgICBjb25zb2xlLmxvZyh0aGlzLnBsYWNlTXNnKTsKICAgICAgdGhpcy5ib29sLkJ1eWluZ0FuZFNlbGxpbmcgPSB0cnVlOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AA0DA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACAC,QADA;IAEAC,mBAFA;IAGAC;EAHA,CADA;EAMAC;IACAC;MACAC,sBADA;MAEAC;IAFA,CADA;IAKAC;MACAF,sBADA;MAEAC;IAFA,CALA;IASAE;MACAH,sBADA;MAEAC;IAFA;EATA,CANA;;EAoBAG;IACA;MACAC;QACAC,uBADA;QAEAC;MAFA,CADA;MAKAC,QALA;MAMAC,cANA;MAOAC,eAPA;MAOA;MACAC,iBARA;MASAC,OATA;MAUAH,cAVA;MAWAD,QAXA;MAYAK;IAZA;EAcA,CAnCA;;EAoCAC;IACA;IACA;IACA;IACAZ;MACA;MACAa;IACA,CAPA;;IAQAZ;MACA;MACAY;IACA,CAXA;;IAYAC;MACA;IACA;;EAdA,CApCA;EAoDAC,YACA,wBADA;;IAEAD;MACA;IACA;;EAJA,CApDA;EA0DAE;IACA;MACAH;MACAA;MACA;QACAf,OADA;QAEAY,eAFA;QAGAO,SAHA;QAIAC;UACAJ,iCADA;UAEAK,gBAFA;UAGAC,0BAHA;UAIAC;QAJA;MAJA;MAWA;MACA;QAAAnB;MAAA;MACAW;MACA;MACAA;MACA;IACA,CArBA;;IAsBA;IACA;MACA;MACA;MACA;QAAAX;MAAA;;MACA;QACAoB;MACA,CAFA,MAEA;QACAA;MACA;IACA,CAhCA;;IAiCAC;MACA;MACA;MACAC;QACA;MACA,CAFA,EAEA,IAFA;IAGA,CAvCA;;IAwCA;MACA;QAAA1B;QAAA2B;MAAA;MACAZ;MACA;QAAAa;QAAAxB;MAAA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;QACA;MACA;;MACA;QACA;UACA;UACA;QACA;MACA;;MACA;QACA;UACA;UACA;QACA;MACA;;MACA;MACAW;MACA;IACA;;EAlEA;AA1DA","names":["components","HemoList","BtnBuyingAndSelling","InfiniteLoading","props","value","type","default","filterAmount","filterMents","data","bool","BuyingAndSelling","dialog","list","loading","finished","refreshing","page","placeMsg","watch","console","currency","computed","methods","limit","search","coin","payments","amount","$state","onRefresh","setTimeout","advId","code"],"sourceRoot":"src/views/home/components","sources":["IWantToSell.vue"],"sourcesContent":["<!--\n * @Name: 我要卖\n * @Date: 2022-06-17 16:47:03\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 20:17:14\n-->\n<template>\n  <div>\n    <!-- <P-list ref=\"P-list\" :footer=\"true\" @refresh=\"onRefresh\" @load=\"onList\">\n            <template v-slot=\"{row, index}\">\n                <template v-if=\"index == 0\">\n                    <Hemo-list btn-name=\"出售\" color=\"#FD5656\" :name=\"row.title\" :Price=\"row.Price\"\n                        @btnClick=\"bool.dialog = true\">\n                    </Hemo-list>\n                </template>\n                <template v-else>\n                    <Hemo-list btn-name=\"出售\" color=\"#FD5656\" :name=\"row.title\" :Price=\"row.Price\"\n                        @btnClick=\"btnClick(row)\">\n                    </Hemo-list>\n                </template>\n            </template>\n        </P-list> -->\n    <div class=\"c2c-list\">\n      <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n        <ul>\n          <li v-for=\"(row, index) in list\" :key=\"index\">\n            <Hemo-list\n              btn-name=\"出售\"\n              color=\"#FD5656\"\n              :row=\"row\"\n              @btnClick=\"btnClick(row)\"\n            ></Hemo-list>\n          </li>\n        </ul>\n        <infinite-loading\n          spinner=\"spiral\"\n          @infinite=\"loadMoreEvent\"\n          :distance=\"0\"\n        >\n          <div slot=\"spinner\" class=\"p-top-40\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n        </infinite-loading>\n      </van-pull-refresh>\n    </div>\n    <BtnBuyingAndSelling\n      v-model=\"bool.BuyingAndSelling\"\n      title=\"出售\"\n      :row=\"placeMsg\"\n      :currency=\"value\"\n    />\n    <Alert v-model=\"bool.dialog\" btn-determine-name=\"添加\">\n      买家仅支持xxx向您付款，您需要添加并开启相应的收款方式。\n    </Alert>\n  </div>\n</template>\n\n<script>\nimport HemoList from \"@/components/hemo-list\";\nimport BtnBuyingAndSelling from \"./BtnBuyingAndSelling\";\nimport { AdvTradeList, TradeVerify } from \"../../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  components: {\n    HemoList,\n    BtnBuyingAndSelling,\n    InfiniteLoading,\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      default: \"\",\n    },\n    filterAmount: {\n      type: [String, Number],\n      default: null,\n    },\n    filterMents: {\n      type: [String, Number],\n      default: null,\n    },\n  },\n  data() {\n    return {\n      bool: {\n        BuyingAndSelling: false,\n        dialog: false,\n      },\n      list: [],\n      loading: false,\n      finished: false, //是否已加载完成，加载完成后不再触发load事件\n      refreshing: false,\n      page: 0,\n      loading: false,\n      list: [],\n      placeMsg: {},\n    };\n  },\n  watch: {\n    // value(val){\n    //   console.log(val)\n    // }\n    filterAmount(val) {\n      this.onList();\n      console.log(val);\n    },\n    filterMents(val) {\n      this.onList();\n      console.log(val);\n    },\n    currency(_val) {\n      this.onList();\n    },\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    currency() {\n      return this.current.amount_way;\n    },\n  },\n  methods: {\n    async onList() {\n      console.log(1);\n      console.log(this.value);\n      const params = {\n        type: 2,\n        page: this.page,\n        limit: 10,\n        search: {\n          currency: this.current.amount_way,\n          coin: this.value,\n          payments: this.filterMents,\n          amount: this.filterAmount,\n        },\n      };\n      const result = await AdvTradeList(params);\n      const { data } = result;\n      console.log(result);\n      this.list = data.list;\n      console.log(this.list);\n      return result;\n    },\n    // 加载更多\n    async loadMoreEvent($state) {\n      this.page += 1;\n      const result = await this.onList();\n      const { data } = result;\n      if (this.list.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    onRefresh() {\n      this.page = 0;\n      this.onList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    async btnClick(row) {\n      const result = await TradeVerify({ type: 1, advId: row.id });\n      console.log(result);\n      const { code, data } = result;\n      if (code == 100016) {\n        this.bool.dialog = true;\n        return;\n      } else if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      if (data.rules.kyc.required) {\n        if (!data.rules.kyc.val) {\n          this.$toast(\"您尚未完成实名认证\");\n          return;\n        }\n      }\n      if (data.rules.pay_password.required) {\n        if (!data.rules.pay_password.val) {\n          this.$toast(\"您尚未设置交易密码\");\n          return;\n        }\n      }\n      this.placeMsg = row;\n      console.log(this.placeMsg);\n      this.bool.BuyingAndSelling = true;\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.c2c-list {\n  /deep/.van-pull-refresh {\n    height: 70vh;\n    overflow: auto;\n  }\n}\n</style>"]}]}