{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/bankCard/addUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/bankCard/addUpdate.vue","mtime":1657511087064},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBib29sOiB7CiAgICAgICAgY2hlY2tUaGU6IGZhbHNlCiAgICAgIH0sCiAgICAgIGZvcm06IHsKICAgICAgICBpZDogJycsCiAgICAgICAgcF9pZDogdGhpcy4kc3RvcmUuc3RhdGUuY2FyZC5hZGR0eXBlLAogICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICBhY2NvdW50OiAnJywKICAgICAgICBiYW5rOiAnJywKICAgICAgICBiYW5rX2JyYW5jaDogJycsCiAgICAgICAgcXJjb2RlOiAnJywKICAgICAgICBzdGF0dXM6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXmgqjnmoTlp5PlkI0nLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAyLAogICAgICAgICAgbWF4OiAxMCwKICAgICAgICAgIG1lc3NhZ2U6ICfplb/luqblnKggMiDliLAgMTAg5Liq5a2X56ymJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH1dLAogICAgICAgIGFjY291bnQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICfor7fovpPlhaXpk7booYzljaHlj7cnLAogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiBuZXcgUmVnRXhwKCkuYmFua0NhcmQsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XSwKICAgICAgICBiYW5rOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5byA5oi36ZO26KGMJywKICAgICAgICAgIHRyaWdnZXI6ICdibHVyJwogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogMywKICAgICAgICAgIG1heDogMjAsCiAgICAgICAgICBtZXNzYWdlOiAn6ZW/5bqm5ZyoIDMg5YiwIDIwIOS4quWtl+espicsCiAgICAgICAgICB0cmlnZ2VyOiAnYmx1cicKICAgICAgICB9XQogICAgICB9LAogICAgICBhbGVydDogewogICAgICAgIHNob3c6IGZhbHNlLAogICAgICAgIGNhbmNlbFN3aXRjaDogZmFsc2UsCiAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgbWVzc2FnZTogJycKICAgICAgfQogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgJyRyb3V0ZS5wYXJhbXMnOiB7CiAgICAgIGRlZXA6IHRydWUsCiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlcjogZnVuY3Rpb24gKHYpIHsKICAgICAgICBpZiAodi5pZCkgewogICAgICAgICAgdGhpcy5mb3JtLmlkID0gdi5pZDsKICAgICAgICAgIHRoaXMub25MaXN0KHYuaWQpOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCgogIG1vdW50ZWQoKSB7CiAgICBpZiAodGhpcy5mb3JtLnBfaWQgPT0gJycgJiYgdGhpcy5mb3JtLmlkID09ICcnKSB7CiAgICAgIHRoaXMuJHJvdXRlci5iYWNrKC0xKTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBvbkFsZXJ0KCkgewogICAgICB0aGlzLmFsZXJ0LnNob3cgPSBmYWxzZTsKCiAgICAgIGlmICh0aGlzLmFsZXJ0LmluZGV4ID09PSAxKSB7CiAgICAgICAgdGhpcy5kZWwoKTsKICAgICAgfQogICAgfSwKCiAgICBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZShyZXMgPT4gewogICAgICAgIGlmIChyZXMpIHsKICAgICAgICAgIGlmICh0aGlzLmJvb2wuY2hlY2tUaGUpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZm9ybS5pZCA9PSAnJykgewogICAgICAgICAgICAgIHRoaXMuU3VibWl0KCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdGhpcy5VcGRhdGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5hbGVydC5zaG93ID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5hbGVydC5jYW5jZWxTd2l0Y2ggPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5hbGVydC5pbmRleCA9IDA7CiAgICAgICAgICAgIHRoaXMuYWxlcnQubWVzc2FnZSA9ICfor7fli77pgInkuqTmmJPpo47pmaknOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICAgIGNoZWNrVGhlKCkgewogICAgICB0aGlzLmJvb2wuY2hlY2tUaGUgPSAhdGhpcy5ib29sLmNoZWNrVGhlOwogICAgfSwKCiAgICBhc3luYyBTdWJtaXQoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLlN1Ym1pdCh0aGlzLCAnY2FyZC9hZGQnLCB0aGlzLmZvcm0pOwogICAgICBjb25zdCB7CiAgICAgICAgY29kZSwKICAgICAgICBtZXNzYWdlCiAgICAgIH0gPSByZXNwb25zZTsKCiAgICAgIGlmIChjb2RlID09IDIwMCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2FyZC9TRVRfQUREVFlQRScsICcnKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL2JhbmtjYXJkJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHRvYXN0LmZhaWwobWVzc2FnZSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgb25MaXN0KGlkKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLkdldERhdGEodGhpcywgJ2NhcmQvZ2V0aW5mbycsIGlkKTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUsCiAgICAgICAgZGF0YSwKICAgICAgICBtZXNzYWdlCiAgICAgIH0gPSByZXNwb25zZTsKCiAgICAgIGlmIChjb2RlID09IDIwMCkgewogICAgICAgIHRoaXMuZm9ybSA9IGRhdGE7CiAgICAgICAgdGhpcy5ib29sLmNoZWNrVGhlID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIuYmFjaygtMSk7CiAgICAgIH0KICAgIH0sCgogICAgYXN5bmMgVXBkYXRlKCkgewogICAgICBBUEkuVXBkYXRlKHRoaXMsICdjYXJkL3VwZGF0ZScsIHRoaXMuZm9ybSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgPT0gMjAwKSB7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgIHRoaXMuJHRvYXN0LmZhaWwoZXJyb3IubWVzc2FnZSk7CiAgICAgIH0pOwogICAgfSwKCiAgICBjbGlja0ljb24odikgewogICAgICBpZiAodiA9PSAnZGVsJykgewogICAgICAgIHRoaXMuYWxlcnQuc2hvdyA9IHRydWU7CiAgICAgICAgdGhpcy5hbGVydC5jYW5jZWxTd2l0Y2ggPSB0cnVlOwogICAgICAgIHRoaXMuYWxlcnQuaW5kZXggPSAxOwogICAgICAgIHRoaXMuYWxlcnQubWVzc2FnZSA9ICfnoa7orqTliKDpmaTor6XmlLbmrL7mlrnlvI8/JzsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBkZWwoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLkRlbCh0aGlzLCAnY2FyZC9kZWwnLCB0aGlzLmZvcm0uaWQpOwogICAgICBjb25zdCB7CiAgICAgICAgY29kZSwKICAgICAgICBkYXRhLAogICAgICAgIG1lc3NhZ2UKICAgICAgfSA9IHJlc3BvbnNlOwoKICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJy9iYW5rY2FyZCcKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AAgFA;EACAA;IACA;MACAC;QACAC;MADA,CADA;MAIAC;QACAC,MADA;QAEAC,oCAFA;QAGAC,YAHA;QAIAC,WAJA;QAKAC,QALA;QAMAC,eANA;QAOAC,UAPA;QAQAC;MARA,CAJA;MAcAC;QACAN,WACA;UAAAO;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,CAFA,CADA;QAKAR,UACA;UAAAM;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAG;UAAAH;QAAA,CAFA,CALA;QASAP,OACA;UAAAK;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,CAFA;MATA,CAdA;MA4BAI;QACAC,WADA;QAEAC,mBAFA;QAGAC,QAHA;QAIAR;MAJA;IA5BA;EAoCA,CAtCA;;EAuCAS;IACA;MACAC,UADA;MAEAC,eAFA;MAGAC;QACA;UACA;UACA;QACA;MACA;IARA;EADA,CAvCA;;EAmDAC;IACA;MACA;IACA;EACA,CAvDA;;EAwDAC;IACAC;MACA;;MACA;QACA;MACA;IACA,CANA;;IAOAC;MACA;QACA;UACA;YACA;cACA;YACA,CAFA,MAEA;cACA;YACA;UACA,CANA,MAMA;YACA;YACA;YACA;YACA;UACA;QACA;MACA,CAfA;IAgBA,CAxBA;;IAyBA5B;MACA;IACA,CA3BA;;IA4BA;MACA;MACA;QAAA6B;QAAAjB;MAAA;;MACA;QACA;QACA;UAAAkB;QAAA;MACA,CAHA,MAGA;QACA;MACA;IACA,CArCA;;IAsCA;MACA;MACA;QAAAD;QAAA/B;QAAAc;MAAA;;MACA;QACA;QACA;MACA,CAHA,MAGA;QACA;MACA;IACA,CA/CA;;IAgDA;MACAmB;QACA;UACA;QACA;MACA,CAJA,EAIAC,KAJA,CAIAC;QACA;MACA,CANA;IAOA,CAxDA;;IAyDAC;MACA;QACA;QACA;QACA;QACA;MACA;IACA,CAhEA;;IAiEA;MACA;MACA;QAAAL;QAAA/B;QAAAc;MAAA;;MACA;QACA;UAAAkB;QAAA;MACA;IACA;;EAvEA;AAxDA","names":["data","bool","checkThe","form","id","p_id","username","account","bank","bank_branch","qrcode","status","rules","required","message","trigger","min","max","validator","alert","show","cancelSwitch","index","watch","deep","immediate","handler","mounted","methods","onAlert","onSubmit","code","path","API","catch","error","clickIcon"],"sourceRoot":"src/views/bankCard","sources":["addUpdate.vue"],"sourcesContent":["<!--\n * @Name: 添加银行卡\n * @Date: 2022-07-04 16:09:36\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-06 14:12:28\n-->\n\n<template>\n    <P-main>\n        <Navigation v-if=\"form.id == ''\" />\n        <Navigation v-else :delSwitch=\"true\" @click-icon=\"clickIcon\" />\n        <P-body type=\"Fei\" class=\"m-55-b\">\n            <h1>{{form.id === '' ? '添加':''}}银行卡</h1>\n            <el-form :model=\"form\" ref=\"form\" :rules=\"rules\" label-width=\"130px\" class=\"main\" label-position=\"top\"\n                :hide-required-asterisk=\"true\">\n                <div class=\"form-item\">\n                    <el-form-item prop=\"username\">\n                        <template #label>\n                            <div class=\"label\">\n                                姓名<span>*</span>\n                            </div>\n                        </template>\n                        <el-input v-model=\"form.username\" class=\"ui-input\" placeholder=\"请输入您的姓名\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"account\">\n                        <template #label>\n                            <div class=\"label\">\n                                银行卡号<span>*</span>\n                            </div>\n                        </template>\n                        <el-input v-model=\"form.account\" class=\"ui-input\" placeholder=\"请输入银行卡号\" :maxlength=\"19\">\n                        </el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"bank\">\n                        <template #label>\n                            <div class=\"label\">\n                                开户银行<span>*</span>\n                            </div>\n                        </template>\n                        <el-input v-model=\"form.bank\" class=\"ui-input\" placeholder=\"请输入开户银行\"></el-input>\n                    </el-form-item>\n                </div>\n                <div class=\"form-item m-10-t\">\n                    <el-form-item label=\"开户支行 (选填）\">\n                        <el-input v-model=\"form.bank_branch\" class=\"ui-input\" placeholder=\"请输入开户支行\"></el-input>\n                    </el-form-item>\n                </div>\n            </el-form>\n\n            <B-typographya class=\"prompt\">\n                <template #icon>\n                    <i class=\"el-icon-warning\" />\n                </template>\n                <template #title>\n                    风险提示:C2C属于场外交易，法币不经过平台，平台不会自动扣款，需要您手动自行转账给对方，对方才能收到款项。当您在法币交易出售资产时，您选择的收款方式将会展示给买方，请确认信息准确无误。\n                </template>\n            </B-typographya>\n\n            <B-typographya class=\"text-yesNo\">\n                <template #icon>\n                    <B-svg name=\"Gou1\" class-name=\"b-icon-svg\" :class=\"[bool.checkThe ? 'active':'']\"\n                        @click=\"checkThe\" />\n                </template>\n                <template #title>\n                    <div @click=\"checkThe\">我已阅读并充分理解上述内容，由于款项造成的交易风险自行承担</div>\n                </template>\n            </B-typographya>\n        </P-body>\n        <Foo-ter>\n            <P-button type=\"primary\" class=\"btn-primary h-44-i\" @click=\"onSubmit('form')\">{{form.id === '' ? '保存':'修改'}}\n            </P-button>\n        </Foo-ter>\n\n        <Alert v-model=\"alert.show\" title=\"提示\" :cancel-switch=\"alert.cancelSwitch\" @click=\"onAlert\">\n            <div class=\"ui-flex-row\">{{alert.message}}</div>\n        </Alert>\n    </P-main>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            bool: {\n                checkThe: false\n            },\n            form: {\n                id: '',\n                p_id: this.$store.state.card.addtype,\n                username: '',\n                account: '',\n                bank: '',\n                bank_branch: '',\n                qrcode: '',\n                status: ''\n            },\n            rules: {\n                username: [\n                    { required: true, message: '请输入您的姓名', trigger: 'blur' },\n                    { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n                ],\n                account: [\n                    { required: true, message: '请输入银行卡号', trigger: 'blur' },\n                    { validator: new RegExp().bankCard, trigger: 'blur' }\n                ],\n                bank: [\n                    { required: true, message: '请输入开户银行', trigger: 'blur' },\n                    { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n                ]\n            },\n            alert: {\n                show: false,\n                cancelSwitch: false,\n                index: 0,\n                message: ''\n            }\n\n        }\n    },\n    watch: {\n        '$route.params': {\n            deep: true,\n            immediate: true,\n            handler: function (v) {\n                if (v.id) {\n                    this.form.id = v.id\n                    this.onList(v.id)\n                }\n            }\n        },\n    },\n    mounted() {\n        if (this.form.p_id == '' && this.form.id == '') {\n            this.$router.back(-1)\n        }\n    },\n    methods: {\n        onAlert() {\n            this.alert.show = false\n            if (this.alert.index === 1) {\n                this.del()\n            }\n        },\n        onSubmit(formName) {\n            this.$refs[formName].validate((res) => {\n                if (res) {\n                    if (this.bool.checkThe) {\n                        if (this.form.id == '') {\n                            this.Submit()\n                        } else {\n                            this.Update()\n                        }\n                    } else {\n                        this.alert.show = true\n                        this.alert.cancelSwitch = false\n                        this.alert.index = 0\n                        this.alert.message = '请勾选交易风险'\n                    }\n                }\n            });\n        },\n        checkThe() {\n            this.bool.checkThe = !this.bool.checkThe\n        },\n        async Submit() {\n            const response = await API.Submit(this, 'card/add', this.form)\n            const { code, message } = response\n            if (code == 200) {\n                this.$store.commit('card/SET_ADDTYPE', '');\n                this.$router.push({ path: '/bankcard' })\n            } else {\n                this.$toast.fail(message);\n            }\n        },\n        async onList(id) {\n            const response = await API.GetData(this, 'card/getinfo', id)\n            const { code, data, message } = response\n            if (code == 200) {\n                this.form = data\n                this.bool.checkThe = true\n            } else {\n                this.$router.back(-1)\n            }\n        },\n        async Update() {\n            API.Update(this, 'card/update', this.form).then(response => {\n                if (response.code == 200) {\n                    this.$router.go(-1)\n                }\n            }).catch(error => {\n                this.$toast.fail(error.message);\n            });\n        },\n        clickIcon(v) {\n            if (v == 'del') {\n                this.alert.show = true\n                this.alert.cancelSwitch = true\n                this.alert.index = 1\n                this.alert.message = '确认删除该收款方式?'\n            }\n        },\n        async del() {\n            const response = await API.Del(this, 'card/del', this.form.id)\n            const { code, data, message } = response\n            if (code == 200) {\n                this.$router.push({ path: '/bankcard' })\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\nh1 {\n    padding: 12px;\n    padding-bottom: 15px;\n    font-size: 23px;\n    color: #333333;\n}\n.body {\n    padding: 0px;\n    .form-item {\n        padding: 12px;\n        background: #fff;\n        /deep/.el-form-item {\n            margin-bottom: 10px;\n            &.is-error {\n                margin-bottom: 22px;\n            }\n            .el-form-item__label {\n                padding: 0px;\n            }\n            .el-input__inner {\n                height: 40px;\n                padding: 0 10px;\n                border: 1px solid #eeeeee;\n            }\n        }\n        .label {\n            span {\n                vertical-align: -7px;\n                color: #ff4d4d;\n                font-size: 20px;\n                margin-left: 3px;\n            }\n        }\n    }\n}\n\n.prompt {\n    margin-top: 12px;\n    padding: 10px;\n    background: #ffebeb;\n    border-radius: 4px;\n    /deep/.title {\n        font-size: 12px;\n        font-weight: 400;\n        color: #ff7676;\n        .el-icon-warning {\n            font-size: 14px;\n        }\n    }\n}\n\n.text-yesNo {\n    padding: 12px;\n    /deep/.title {\n        font-size: 12px;\n        color: #666666;\n        .icon-svg {\n            width: 11px;\n            height: 20px;\n            .b-icon-svg {\n                width: 11px;\n                height: 11px;\n            }\n        }\n    }\n    .b-icon-svg {\n        width: 11px;\n        height: 11px;\n        border-radius: 2px;\n        border: 1px solid #666666;\n        /deep/use {\n            display: none;\n        }\n        &.active {\n            /deep/use {\n                display: block;\n            }\n        }\n    }\n}\n</style>"]}]}