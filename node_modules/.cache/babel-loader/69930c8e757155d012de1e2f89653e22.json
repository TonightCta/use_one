{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/chant/components/step_three.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/chant/components/step_three.vue","mtime":1658312858683},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgQ2hhbnRTdGVwVHdvIH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGljTGlzdDogW3sKICAgICAgICB0aXRsZTogIuS4iuS8oOi6q+S7veivgeS6uuWDj+mdoiIsCiAgICAgICAgZmlsZTogIiIsCiAgICAgICAgaW1nU3JjOiBudWxsCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuS4iuS8oOi6q+S7veivgeWbveW+vemdoiIsCiAgICAgICAgZmlsZTogIiIsCiAgICAgICAgaW1nU3JjOiBudWxsCiAgICAgIH0sIHsKICAgICAgICB0aXRsZTogIuS4iuS8oOaJi+aMgei6q+S7veivgSIsCiAgICAgICAgZmlsZTogIiIsCiAgICAgICAgaW1nU3JjOiBudWxsCiAgICAgIH1dCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHRlc3QoJGUsIGluZGV4KSB7CiAgICAgIGNvbnNvbGUubG9nKCRlLnRhcmdldC5maWxlc1swXSk7CiAgICAgIGNvbnN0IGZpbGUgPSAkZS50YXJnZXQuZmlsZXNbMF07CiAgICAgIGxldCBpbWdTcmM7CiAgICAgIGNvbnN0IGZpbGVSZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICBmaWxlUmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7CgogICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IHRlbXAgPT4gewogICAgICAgIGltZ1NyYyA9IHRlbXAudGFyZ2V0LnJlc3VsdDsKICAgICAgICBjb25zb2xlLmxvZyhpbWdTcmMpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnBpY0xpc3RbaW5kZXhdLCAiZmlsZSIsIGZpbGUpOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnBpY0xpc3RbaW5kZXhdLCAiaW1nU3JjIiwgaW1nU3JjKTsKICAgICAgfTsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGljTGlzdCk7CiAgICB9LAoKICAgIC8v5LiK5Lyg6Lqr5Lu95paH5Lu2CiAgICBhc3luYyBzdWJtaXRTdGVwVHdvKCkgewogICAgICAvLyAgIGNvbnNvbGUubG9nKDIxMyk7CiAgICAgIC8vICAgdGhpcy5waWNMaXN0LmZvckVhY2goKGUpID0+IHsKICAgICAgLy8gICAgIGlmICghZS5maWxlKSB7CiAgICAgIC8vICAgICAgIHRoaXMuJHRvYXN0KCLor7fkuIrkvKDouqvku73mlofku7YiKTsKICAgICAgLy8gICAgICAgcmV0dXJuOwogICAgICAvLyAgICAgfQogICAgICAvLyAgIH0pOwogICAgICBpZiAoIXRoaXMucGljTGlzdFswXS5maWxlKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIuivt+S4iuS8oOi6q+S7veivgeS6uuWDj+mdoiIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKCF0aGlzLnBpY0xpc3RbMV0uZmlsZSkgewogICAgICAgIHRoaXMuJHRvYXN0KCLor7fkuIrkvKDouqvku73or4Hlm73lvr3pnaIiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICghdGhpcy5waWNMaXN0WzJdLmZpbGUpIHsKICAgICAgICB0aGlzLiR0b2FzdCgi6K+35LiK5Lyg5omL5oyB6Lqr5Lu96K+BIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICA7CiAgICAgIHRoaXMuJHRvYXN0LmxvYWRpbmcoewogICAgICAgIG1lc3NhZ2U6ICfliqDovb3kuK0uLi4nLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlCiAgICAgIH0pOwogICAgICBjb25zdCBmb3JtZGF0YSA9IG5ldyBGb3JtRGF0YSgpOwogICAgICBmb3JtZGF0YS5hcHBlbmQoImNhcmRfZnJvbnQiLCB0aGlzLnBpY0xpc3RbMF0uZmlsZSk7CiAgICAgIGZvcm1kYXRhLmFwcGVuZCgiY2FyZF9iYWNrIiwgdGhpcy5waWNMaXN0WzFdLmZpbGUpOwogICAgICBmb3JtZGF0YS5hcHBlbmQoImNhcmRfaGFuZCIsIHRoaXMucGljTGlzdFsyXS5maWxlKTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2hhbnRTdGVwVHdvKGZvcm1kYXRhKTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUKICAgICAgfSA9IHJlc3VsdDsKCiAgICAgIGlmIChjb2RlICE9IDIwMCkgewogICAgICAgIHRoaXMuJHRvYXN0KHJlc3VsdC5tZXNzYWdlKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoInVwU3RlcCIsIDIpOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AAsDA;AACA;EACAA;IACA;MACAC,UACA;QACAC,iBADA;QAEAC,QAFA;QAGAC;MAHA,CADA,EAMA;QACAF,iBADA;QAEAC,QAFA;QAGAC;MAHA,CANA,EAWA;QACAF,gBADA;QAEAC,QAFA;QAGAC;MAHA,CAXA;IADA;EAmBA,CArBA;;EAsBAC;IACAC;MACAC;MACA;MACA;MACA;MACAC;;MACAA;QACAJ;QACAG;QACA;QACA;MACA,CALA;;MAOAA;IACA,CAfA;;IAgBA;IACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MAAA;MACA;QACAE,iBADA;QAEAC;MAFA;MAIA;MACAC;MACAA;MACAA;MACA;MACA;QAAAC;MAAA;;MACA;QACA;QACA;MACA;;MACA;IACA;;EApDA;AAtBA","names":["data","picList","title","file","imgSrc","methods","test","console","fileReader","message","forbidClick","formdata","code"],"sourceRoot":"src/views/chant/components","sources":["step_three.vue"],"sourcesContent":["<!-- 视频证明 -->\n<template>\n  <div class=\"stwp-two step-public\">\n    <p class=\"step-title\">身份证明</p>\n    <div class=\"step-content\">\n      <div class=\"content-msg\">\n        <p class=\"msg-title\">请上传身份证照片</p>\n        <div class=\"up-pic\">\n          <ul>\n            <li v-for=\"(pic, index) in picList\" :key=\"index\">\n              <img\n                v-if=\"!pic.imgSrc\"\n                :src=\"require('../../../assets/images/up_pic.png')\"\n                class=\"up-icon\"\n                alt=\"\"\n              />\n              <p v-if=\"!pic.imgSrc\">{{ pic.title }}</p>\n              <img :src=\"pic.imgSrc\" v-if=\"pic.imgSrc\" class=\"up-img\" alt=\"\" />\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                @change=\"test($event, index)\"\n              />\n              <div class=\"re-up\" v-if=\"pic.imgSrc\">\n                <p class=\"iconfont icon-shangchuan-copy\"></p>\n                <p>重新上传</p>\n              </div>\n            </li>\n          </ul>\n        </div>\n        <p class=\"msg-remark\">\n          *拍摄时，手持身份证人像面，将持证的手臂和上身整个拍进照片，脸部、身份证上所有信息清晰且不能被遮挡。\n        </p>\n        <p class=\"msg-remark\">*仅支持 .jpg/.jpeg/.png格式</p>\n      </div>\n      <div class=\"content-btn\">\n        <div class=\"btn-label\"></div>\n        <div class=\"btn-box\">\n          <P-button\n            type=\"primary\"\n            class=\"btn-primary default-btn\"\n            @click=\"$emit('upStep', 0)\"\n            >上一步</P-button\n          >\n          <P-button type=\"primary\" class=\"btn-primary\" @click=\"submitStepTwo\"\n            >下一步</P-button\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ChantStepTwo } from \"../../../api/api\";\nexport default {\n  data() {\n    return {\n      picList: [\n        {\n          title: \"上传身份证人像面\",\n          file: \"\",\n          imgSrc: null,\n        },\n        {\n          title: \"上传身份证国徽面\",\n          file: \"\",\n          imgSrc: null,\n        },\n        {\n          title: \"上传手持身份证\",\n          file: \"\",\n          imgSrc: null,\n        },\n      ],\n    };\n  },\n  methods: {\n    test($e, index) {\n      console.log($e.target.files[0]);\n      const file = $e.target.files[0];\n      let imgSrc;\n      const fileReader = new FileReader();\n      fileReader.readAsDataURL(file);\n      fileReader.onload = (temp) => {\n        imgSrc = temp.target.result;\n        console.log(imgSrc);\n        this.$set(this.picList[index], \"file\", file);\n        this.$set(this.picList[index], \"imgSrc\", imgSrc);\n      };\n\n      console.log(this.picList);\n    },\n    //上传身份文件\n    async submitStepTwo() {\n    //   console.log(213);\n    //   this.picList.forEach((e) => {\n    //     if (!e.file) {\n    //       this.$toast(\"请上传身份文件\");\n    //       return;\n    //     }\n    //   });\n      if (!this.picList[0].file) {\n        this.$toast(\"请上传身份证人像面\");\n        return;\n      }\n      if (!this.picList[1].file) {\n        this.$toast(\"请上传身份证国徽面\");\n        return;\n      }\n      if (!this.picList[2].file) {\n        this.$toast(\"请上传手持身份证\");\n        return;\n      };\n      this.$toast.loading({\n        message:'加载中...',\n        forbidClick:true\n      })\n      const formdata = new FormData();\n      formdata.append(\"card_front\", this.picList[0].file);\n      formdata.append(\"card_back\", this.picList[1].file);\n      formdata.append(\"card_hand\", this.picList[2].file);\n      const result = await ChantStepTwo(formdata);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      this.$emit(\"upStep\", 2);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./step.less\");\n.step-content {\n  width: 100%;\n  height: calc(100vh - 48px - 156px - 48px);\n}\n.content-msg {\n  padding: 10px 12px !important;\n  .msg-title {\n    color: #333;\n    font-weight: bold;\n    margin-bottom: 8px;\n  }\n  p {\n    font-size: 14px;\n    color: #999999;\n  }\n  .up-pic {\n    ul {\n      display: flex;\n      flex-wrap: wrap;\n      justify-content: space-between;\n      li {\n        width: 47%;\n        height: 108px;\n        border: 1px dashed #d8dbe4;\n        border-radius: 4px;\n        margin-bottom: 12px;\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n        p {\n          font-size: 14px;\n          margin-top: 8px;\n          color: #c3cad2;\n        }\n        .up-icon {\n          width: 44px;\n          height: 44px;\n        }\n        .up-img {\n          width: 100%;\n          height: 100%;\n        }\n        input {\n          width: 100%;\n          height: 100%;\n          position: absolute;\n          top: 0;\n          left: 0;\n          opacity: 0;\n          z-index: 200;\n        }\n        .re-up {\n          position: absolute;\n          z-index: 100;\n          width: 100%;\n          height: 100%;\n          background: rgba(0, 0, 0, 0.6);\n          display: flex;\n          flex-direction: column;\n          justify-content: center;\n          align-items: center;\n          p {\n            // font-weight: bold;\n            color: rgba(255, 255, 255, 0.8);\n          }\n          p:last-child {\n            color: white;\n            font-size: 12px;\n            transform: translateY(-12px);\n          }\n          .iconfont {\n            font-size: 32px;\n          }\n        }\n      }\n    }\n    ul::after {\n      display: none;\n    }\n    ul::before {\n      display: none;\n    }\n  }\n}\n.btn-box {\n  display: flex;\n  .default-btn {\n    width: 40%;\n    margin-right: 16px;\n    background: #ffffff !important;\n    border: 1px solid #e6e6e6;\n    color: #999999;\n  }\n}\n</style>"]}]}