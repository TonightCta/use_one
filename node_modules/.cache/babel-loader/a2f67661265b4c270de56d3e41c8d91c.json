{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/mine/safty/reset_password.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/mine/safty/reset_password.vue","mtime":1658283874578},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgeyBDaGFuZ2VQYXNzIH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgY29uc3QgdmVyaWZ5X2ZuID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAoIXZhbHVlKSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLor7flho3mrKHovpPlhaXmlrDlr4bnoIEiKSk7CiAgICAgIH0gZWxzZSBpZiAodmFsdWUgIT09IHRoaXMucnVsZUZvcm0ucGFzc19uZXcpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgcGFzc19iZWZvcmU6ICIiLAogICAgICAgIHBhc3NfbmV3OiAiIiwKICAgICAgICBwYXNzX3ZlcmlmeTogIiIKICAgICAgfSwKICAgICAgcnVsZXM6IHsKICAgICAgICBwYXNzX2JlZm9yZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgi6K+36L6T5YWl5Y6f5a+G56CBIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDgsCiAgICAgICAgICBtYXg6IDEyLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgi6ZW/5bqm5ZyoOOWIsDEy5Liq5a2X56ymIiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICB2YWxpZGF0b3I6IG5ldyBSZWdFeHAoKS5wYXNzX2JlZm9yZSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHBhc3NfbmV3OiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fovpPlhaXmlrDlr4bnoIEiKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIG1pbjogOCwKICAgICAgICAgIG1heDogMTIsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLplb/luqblnKg45YiwMTLkuKrlrZfnrKYiKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogbmV3IFJlZ0V4cCgpLnBhc3NfbmV3LAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcGFzc192ZXJpZnk6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+WGjeasoei+k+WFpeaWsOWvhueggSIpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiA4LAogICAgICAgICAgbWF4OiAxMiwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIumVv+W6puWcqDjliLAxMuS4quWtl+espiIpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgdmFsaWRhdG9yOiB2ZXJpZnlfZm4sCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XQogICAgICB9CiAgICB9OwogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIE5hdmlnYXRpb246IHJlc29sdmUgPT4gcmVxdWlyZShbIi4uLy4uLy4uL2NvbXBvbmVudHMvbmF2L05hdmlnYXRpb24iXSwgcmVzb2x2ZSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdFJlc2V0KGZvcm1OYW1lKSB7CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgICBwYXNzd29yZF9vbGQ6IHRoaXMucnVsZUZvcm0ucGFzc19iZWZvcmUsCiAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnJ1bGVGb3JtLnBhc3NfbmV3LAogICAgICAgICAgICBwYXNzd29yZF9jb25maXJtYXRpb246IHRoaXMucnVsZUZvcm0ucGFzc192ZXJpZnkKICAgICAgICAgIH07CiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBDaGFuZ2VQYXNzKHBhcmFtcyk7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGNvZGUKICAgICAgICAgIH0gPSByZXN1bHQ7CgogICAgICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoJ+WvhueggeabtOaWsOaIkOWKnycpOwogICAgICAgICAgICB0aGlzLiRyb3V0ZXIuZ28oLTEpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":";AAgDA;AACA;EACAA;IACA;MACA;QACAC;MACA,CAFA,MAEA;QACAA;MACA,CAFA,MAEA;QACAA;MACA;IACA,CARA;;IASA;MACAC;QACAC,eADA;QAEAC,YAFA;QAGAC;MAHA,CADA;MAMAC;QACAH,cACA;UAAAI;UAAAC;UAAAC;QAAA,CADA,EAEA;UACAC,MADA;UAEAC,OAFA;UAGAH,8BAHA;UAIAC;QAJA,CAFA,EAQA;UAAAG;UAAAH;QAAA,CARA,CADA;QAWAL,WACA;UAAAG;UAAAC;UAAAC;QAAA,CADA,EAEA;UACAC,MADA;UAEAC,OAFA;UAGAH,8BAHA;UAIAC;QAJA,CAFA,EAQA;UAAAG;UAAAH;QAAA,CARA,CAXA;QAqBAJ,cACA;UACAE,cADA;UAEAC,4BAFA;UAGAC;QAHA,CADA,EAMA;UACAC,MADA;UAEAC,OAFA;UAGAH,8BAHA;UAIAC;QAJA,CANA,EAYA;UAAAG;UAAAH;QAAA,CAZA;MArBA;IANA;EA2CA,CAtDA;;EAuDAI;IACAC,uBACAC;EAFA,CAvDA;EA2DAC;IACAC;MACA;QACA;UACA;YACAC,uCADA;YAEAC,gCAFA;YAGAC;UAHA;UAKA;UACA;YAAAC;UAAA;;UACA;YACA;YACA;UACA;QACA;MACA,CAdA;IAeA;;EAjBA;AA3DA","names":["data","callback","ruleForm","pass_before","pass_new","pass_verify","rules","required","message","trigger","min","max","validator","components","Navigation","require","methods","submitReset","password_old","password","password_confirmation","code"],"sourceRoot":"src/views/mine/safty","sources":["reset_password.vue"],"sourcesContent":["<!-- 重置密码 -->\n<template>\n  <div class=\"reset-password\">\n    <Navigation />\n    <div class=\"reset-content\">\n      <h3>登录密码</h3>\n      <el-form\n        :model=\"ruleForm\"\n        ref=\"ruleForm\"\n        :rules=\"rules\"\n        label-position=\"top\"\n      >\n        <el-form-item prop=\"pass_before\">\n          <P-input\n            title=\"原密码\"\n            :show-password=\"true\"\n            v-model=\"ruleForm.pass_before\"\n            placeholder=\"请输入原密码\"\n          ></P-input>\n        </el-form-item>\n        <el-form-item prop=\"pass_new\">\n          <P-input\n            title=\"新密码\"\n            :show-password=\"true\"\n            v-model=\"ruleForm.pass_new\"\n            placeholder=\"请输入新密码\"\n          ></P-input>\n        </el-form-item>\n        <el-form-item prop=\"pass_verify\">\n          <P-input\n            title=\"验证密码\"\n            :show-password=\"true\"\n            v-model=\"ruleForm.pass_verify\"\n            placeholder=\"请再次输入新密码\"\n          ></P-input>\n        </el-form-item>\n      </el-form>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i m-60-t-i\"\n        @click=\"submitReset('ruleForm')\"\n        >提交</P-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ChangePass } from \"../../../api/api\";\nexport default {\n  data() {\n    const verify_fn = (rule, value, callback) => {\n      if (!value) {\n        callback(new Error(\"请再次输入新密码\"));\n      } else if (value !== this.ruleForm.pass_new) {\n        callback(new Error(\"两次输入密码不一致\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      ruleForm: {\n        pass_before: \"\",\n        pass_new: \"\",\n        pass_verify: \"\",\n      },\n      rules: {\n        pass_before: [\n          { required: true, message: this.$t(\"请输入原密码\"), trigger: \"blur\" },\n          {\n            min: 8,\n            max: 12,\n            message: this.$t(\"长度在8到12个字符\"),\n            trigger: \"blur\",\n          },\n          { validator: new RegExp().pass_before, trigger: \"blur\" },\n        ],\n        pass_new: [\n          { required: true, message: this.$t(\"请输入新密码\"), trigger: \"blur\" },\n          {\n            min: 8,\n            max: 12,\n            message: this.$t(\"长度在8到12个字符\"),\n            trigger: \"blur\",\n          },\n          { validator: new RegExp().pass_new, trigger: \"blur\" },\n        ],\n        pass_verify: [\n          {\n            required: true,\n            message: this.$t(\"请再次输入新密码\"),\n            trigger: \"blur\",\n          },\n          {\n            min: 8,\n            max: 12,\n            message: this.$t(\"长度在8到12个字符\"),\n            trigger: \"blur\",\n          },\n          { validator: verify_fn, trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  components: {\n    Navigation: (resolve) =>\n      require([\"../../../components/nav/Navigation\"], resolve),\n  },\n  methods: {\n    submitReset(formName) {\n      this.$refs[formName].validate(async (res) => {\n        if (res) {\n          const params = {\n            password_old: this.ruleForm.pass_before,\n            password: this.ruleForm.pass_new,\n            password_confirmation: this.ruleForm.pass_verify,\n          };\n          const result = await ChangePass(params);\n          const { code } = result;\n          if(code == 200){\n            this.$toast.success('密码更新成功');\n            this.$router.go(-1);\n          }\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.reset-content {\n  padding: 0 12px;\n  h3 {\n    font-size: 22px;\n    color: #333;\n    font-family: 500;\n    margin-bottom: 44px;\n    margin-top: 10px;\n  }\n  /deep/.el-form-item {\n    margin-bottom: 0;\n  }\n}\n</style>"]}]}