{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/BtnBuyingAndSelling.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/BtnBuyingAndSelling.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgUGxhY2VPcmRlciB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgdGl0bGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAi6LSt5LmwIgogICAgfSwKICAgIC8v5biB56eNCiAgICBjdXJyZW5jeTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiCiAgICB9LAogICAgLy/kuIvljZXkv6Hmga8KICAgIHJvdzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IHt9CiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZhbDogMCwKICAgICAgLy8gICB0aGVBbW91bnRPZlVuaXRzOiAiSU5SIiwgLy/ph5Hpop3ljZXkvY0KICAgICAgYWNjb3JkaW5nVG86IGZhbHNlLAogICAgICB0YWJzOiB7CiAgICAgICAgYWN0aXZlOiAwLAogICAgICAgIGxpc3Q6IFt7CiAgICAgICAgICBuYW1lOiAi5oyJ6YeR6aKdIiwKICAgICAgICAgIHNjcm9sbDogIiIKICAgICAgICB9LCB7CiAgICAgICAgICBuYW1lOiAi5oyJ5pWw6YePIiwKICAgICAgICAgIHNjcm9sbDogIiIKICAgICAgICB9XQogICAgICB9LAogICAgICBsaW1pdDogIjYyMi0xMjUzIiwKICAgICAgLy/pmZDpop0KICAgICAgdGhlVG90YWxOdW1iZXI6IDIzLjIyNTEsCiAgICAgIC8v5oC75pWw6YePCiAgICAgIHRoZVVuaXRQcmljZTogMi4zNSwKICAgICAgLy/ljZXku7cKICAgICAgY2FsVG90YWw6IDAgLy/orqHnrpfmlbDph48KCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICB2YWx1ZTogewogICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgdGhpcy5hY2NvcmRpbmdUbyA9IHY7CiAgICAgIH0KICAgIH0sCgogICAgYWNjb3JkaW5nVG8odikgewogICAgICB0aGlzLiRlbWl0KCJpbnB1dCIsIHYpOwogICAgfSwKCiAgICAidGFicy5hY3RpdmUiKHZhbCkgewogICAgICB0aGlzLnZhbCA9ICIiOwogICAgICB0aGlzLmNhbFRvdGFsID0gMDsKICAgIH0sCgogICAgdmFsKHZhbCkgewogICAgICBjb25zdCBjb21wdXRlZE1pbmUgPSAoKSA9PiB7CiAgICAgICAgaWYgKHRoaXMudGFicy5hY3RpdmUgPT0gMCkgewogICAgICAgICAgdmFyIF90aGlzJHJvdzsKCiAgICAgICAgICB0aGlzLmNhbFRvdGFsID0gTnVtYmVyKHZhbCkgLyBOdW1iZXIoKF90aGlzJHJvdyA9IHRoaXMucm93KSA9PT0gbnVsbCB8fCBfdGhpcyRyb3cgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHJvdy5wcmljZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciBfdGhpcyRyb3cyOwoKICAgICAgICAgIHRoaXMuY2FsVG90YWwgPSBOdW1iZXIodmFsKSAqIE51bWJlcigoX3RoaXMkcm93MiA9IHRoaXMucm93KSA9PT0gbnVsbCB8fCBfdGhpcyRyb3cyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRyb3cyLnByaWNlKTsKICAgICAgICB9CiAgICAgIH07CgogICAgICB2YWwgJiYgY29tcHV0ZWRNaW5lKCk7CiAgICB9CgogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRoZUFtb3VudE9mVW5pdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvdy5jdXJyZW5jeTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGNvbnNvbGUubG9nKHRoaXMucm93KTsKICB9LAoKICBtb3VudGVkKCkge30sCgogIG1ldGhvZHM6IHsKICAgIC8v5LiL5Y2VCiAgICBhc3luYyBwbGFjZU9yZGVyKCkgewogICAgICAvL+mAmui/h+mHkeminei0reS5sAogICAgICBjb25zdCB0cmFkZUZvclByaWNlID0gYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHByaWNlID0gTnVtYmVyKHRoaXMudmFsKTsKCiAgICAgICAgaWYgKHByaWNlIDwgdGhpcy5yb3cubWluX2N1cnJlbmN5IHx8IHByaWNlID4gdGhpcy5yb3cubWF4X2N1cnJlbmN5KSB7CiAgICAgICAgICB0aGlzLiR0b2FzdChg6K+36L6T5YWlJHt0aGlzLnJvdy5taW5fY3VycmVuY3kudG9GaXhlZCgyKX0tJHt0aGlzLnJvdy5tYXhfY3VycmVuY3kudG9GaXhlZCgyKX3ljLrpl7TnmoTph5Hpop1gKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAgIGFkdl9pZDogdGhpcy5yb3cuaWQsCiAgICAgICAgICBvcmRlcl90eXBlOiAxLAogICAgICAgICAgb3JkZXJfYW1vdW50OiBwcmljZQogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUGxhY2VPcmRlcihwYXJhbXMpOwogICAgICAgIGNvbnN0IHsKICAgICAgICAgIGNvZGUKICAgICAgICB9ID0gcmVzdWx0OwoKICAgICAgICBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KHJlc3VsdC5tZXNzYWdlKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIDsKICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgIGNvbnNvbGUubG9nKCLpgJrov4fph5Hpop3otK3kubAiKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAnL3BsZWFzZXBheW1lbnQnLAogICAgICAgICAgcXVlcnk6IHsKICAgICAgICAgICAgaWQ6IHJlc3VsdC5kYXRhLm9yZGVyX2lkCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH07IC8v6YCa6L+H5pWw6YeP6LSt5LmwCgoKICAgICAgY29uc3QgdHJhZGVGb3JBbW91bnQgPSBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgYW1vdW50ID0gTnVtYmVyKHRoaXMudmFsKTsKCiAgICAgICAgaWYgKGFtb3VudCA8IHRoaXMucm93Lm1pbl9hbW91bnQgfHwgYW1vdW50ID4gdGhpcy5yb3cuYW1vdW50KSB7CiAgICAgICAgICB0aGlzLiR0b2FzdChg6K+36L6T5YWlJHt0aGlzLnJvdy5taW5fYW1vdW50LnRvRml4ZWQoNCl9LSR7dGhpcy5yb3cuYW1vdW50LnRvRml4ZWQoNCl95Yy66Ze055qE5pWw6YePYCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICBhZHZfaWQ6IHRoaXMucm93LmlkLAogICAgICAgICAgb3JkZXJfdHlwZTogMiwKICAgICAgICAgIG9yZGVyX2Ftb3VudDogYW1vdW50CiAgICAgICAgfTsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQbGFjZU9yZGVyKHBhcmFtcyk7CiAgICAgICAgY29uc3QgewogICAgICAgICAgY29kZQogICAgICAgIH0gPSByZXN1bHQ7CgogICAgICAgIGlmIChjb2RlICE9IDIwMCkgewogICAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgOwogICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgICAgY29uc29sZS5sb2coIumAmui/h+aVsOmHj+i0reS5sCIpOwogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvcGxlYXNlcGF5bWVudCcpOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY3VycmVudC91cE9yZGVySUQnLCByZXN1bHQuZGF0YS5vcmRlcl9pZCk7CiAgICAgIH07CgogICAgICB0aGlzLnRhYnMuYWN0aXZlID09IDAgPyB0cmFkZUZvclByaWNlKCkgOiB0cmFkZUZvckFtb3VudCgpOwogICAgfQoKICB9LAoKICBkZXN0cm95ZWQoKSB7fQoKfTs="},{"version":3,"mappings":"AAuFA;AACA;EACAA;IACAC;MACAC,aADA;MAEAC;IAFA,CADA;IAKAC;MACAF,YADA;MAEAC;IAFA,CALA;IASA;IACAE;MACAH,YADA;MAEAC;IAFA,CAVA;IAcA;IACAG;MACAJ,YADA;MAEAC;IAFA;EAfA,CADA;;EAqBAI;IACA;MACAC,MADA;MAEA;MACAC,kBAHA;MAIAC;QACAC,SADA;QAEAC,OACA;UAAAC;UAAAC;QAAA,CADA,EAEA;UAAAD;UAAAC;QAAA,CAFA;MAFA,CAJA;MAWAC,iBAXA;MAWA;MACAC,uBAZA;MAYA;MACAC,kBAbA;MAaA;MACAC,WAdA,CAcA;;IAdA;EAgBA,CAtCA;;EAuCAC;IACAlB;MACAmB,eADA;MAEAC;QACA;MACA;IAJA,CADA;;IAOAZ;MACA;IACA,CATA;;IAUA;MACA;MACA;IACA,CAbA;;IAcAD;MACA;QACA;UAAA;;UACA;QACA,CAFA,MAEA;UAAA;;UACA;QACA;MACA,CANA;;MAOAA;IACA;;EAvBA,CAvCA;EAgEAc;IACAC;MACA;IACA;;EAHA,CAhEA;;EAqEAC;IACAC;EACA,CAvEA;;EAwEAC,YAxEA;;EAyEAC;IACA;IACA;MACA;MACA;QACA;;QACA;UACA,YACA,oCACA,CADA,CAEA,2CAHA;UAKA;QACA;;QACA;UACAC,mBADA;UAEAC,aAFA;UAGAC;QAHA;QAKA;QACA;UAAAC;QAAA;;QACA;UACA;UACA;QACA;;QAAA;QACAN;QACAA;QACA;UACAO,sBADA;UAEAC;YACAC;UADA;QAFA;MAMA,CA7BA,CAFA,CAgCA;;;MACA;QACA;;QACA;UACA,YACA,gEACA,CADA,CAEA,OAHA;UAKA;QACA;;QACA;UACAN,mBADA;UAEAC,aAFA;UAGAC;QAHA;QAKA;QACA;UAAAC;QAAA;;QACA;UACA;UACA;QACA;;QAAA;QACAN;QACAA;QACA;QACA;MACA,CAzBA;;MA0BA;IACA;;EA9DA,CAzEA;;EAyIAU;;AAzIA","names":["props","value","type","default","title","currency","row","data","val","accordingTo","tabs","active","list","name","scroll","limit","theTotalNumber","theUnitPrice","calTotal","watch","immediate","handler","computed","theAmountOfUnits","created","console","mounted","methods","adv_id","order_type","order_amount","code","path","query","id","destroyed"],"sourceRoot":"src/views/home/components","sources":["BtnBuyingAndSelling.vue"],"sourcesContent":["<!--\n * @Name: 首页买卖按钮弹出模块\n * @Date: 2022-06-25 09:32:20\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:19:18\n-->\n<template>\n  <P-popup\n    class=\"buyingAndSelling\"\n    v-model=\"accordingTo\"\n    :head=\"false\"\n    :closeable=\"false\"\n  >\n    <div class=\"head\">\n      <div class=\"top ui-flex-center\">\n        <div class=\"ui-flex-row\">\n          <B-svg name=\"USDT\" class-name=\"USDT\" />\n          <div class=\"title\">{{ title }}{{ currency }}</div>\n        </div>\n        <div>\n          <div class=\"theUnitPrice ui-flex-row\">\n            <B-svg name=\"dengPao\" class-name=\"dengPao\"></B-svg>\n            <div>\n              单价：{{ row.currency_symbol }}{{ row.price?.toFixed(2) }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <P-tabs v-model=\"tabs.active\" :list=\"tabs.list\" :lineWidth=\"32\">\n        <template #title=\"scope\"> {{ scope.row.name }}{{ title }} </template>\n        <template #title_1=\"row\">\n          <span v-if=\"false\">{{ row }}</span>\n        </template>\n      </P-tabs>\n    </div>\n    <div class=\"body ui-flex-row-center\">\n      <div class=\"ui-hx w-100-b\">\n        <div class=\"ui-flex-row p-10-tb\">\n          <div class=\"count\">\n            <B-input\n              type=\"int\"\n              v-model=\"val\"\n              placeholder=\"0\"\n              :append=\"tabs.active == 0 ? theAmountOfUnits : currency\"\n              :sinceTheGrowth=\"true\"\n              :sinceTheGrowthWidth=\"23\"\n            ></B-input>\n          </div>\n          <!-- <div class=\"all\">全部</div> -->\n        </div>\n      </div>\n      <div class=\"limit\">\n        限额\n        {{\n          tabs.active == 0\n            ? row.min_currency?.toFixed(2)\n            : row.min_amount?.toFixed(4)\n        }}-{{\n          tabs.active == 0\n            ? row.max_currency?.toFixed(2)\n            : row.amount?.toFixed(4)\n        }}\n        {{ tabs.active == 0 ? theAmountOfUnits : currency }}\n      </div>\n    </div>\n    <div class=\"theTotalNumber ui-flex-center\">\n      <div class=\"title\">{{ tabs.active == 0 ? \"总数量\" : \"总金额\" }}</div>\n      <dl class=\"ui-flex-dl\">\n        <dt>{{ calTotal.toFixed(4) }}</dt>\n        <dd>{{ tabs.active == 0 ? currency : theAmountOfUnits }}</dd>\n      </dl>\n    </div>\n    <div class=\"footer ui-grid-2\">\n      <P-button type=\"default\" class=\"btn-default\" @click=\"accordingTo = false\"\n        >取消</P-button\n      >\n      <P-button\n        :type=\"title == '购买' ? 'primary' : 'danger'\"\n        :class=\"title == '购买' ? 'btn-primary' : 'btn-danger'\"\n        @click=\"placeOrder\"\n        >{{ title }}</P-button\n      >\n    </div>\n  </P-popup>\n</template>\n\n<script>\nimport { PlaceOrder } from \"../../../api/api\";\nexport default {\n  props: {\n    value: {\n      type: Boolean,\n      default: false,\n    },\n    title: {\n      type: String,\n      default: \"购买\",\n    },\n    //币种\n    currency: {\n      type: String,\n      default: \"\",\n    },\n    //下单信息\n    row: {\n      type: Object,\n      default: {},\n    },\n  },\n  data() {\n    return {\n      val: 0,\n      //   theAmountOfUnits: \"INR\", //金额单位\n      accordingTo: false,\n      tabs: {\n        active: 0,\n        list: [\n          { name: \"按金额\", scroll: \"\" },\n          { name: \"按数量\", scroll: \"\" },\n        ],\n      },\n      limit: \"622-1253\", //限额\n      theTotalNumber: 23.2251, //总数量\n      theUnitPrice: 2.35, //单价\n      calTotal: 0, //计算数量\n    };\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler: function (v) {\n        this.accordingTo = v;\n      },\n    },\n    accordingTo(v) {\n      this.$emit(\"input\", v);\n    },\n    \"tabs.active\"(val) {\n      this.val = \"\";\n      this.calTotal = 0;\n    },\n    val(val) {\n      const computedMine = () => {\n        if (this.tabs.active == 0) {\n          this.calTotal = Number(val) / Number(this.row?.price);\n        } else {\n          this.calTotal = Number(val) * Number(this.row?.price);\n        }\n      };\n      val && computedMine();\n    },\n  },\n  computed: {\n    theAmountOfUnits() {\n      return this.row.currency;\n    },\n  },\n  created() {\n    console.log(this.row);\n  },\n  mounted() {},\n  methods: {\n    //下单\n    async placeOrder() {\n      //通过金额购买\n      const tradeForPrice = async () => {\n        const price = Number(this.val);\n        if (price < this.row.min_currency || price > this.row.max_currency) {\n          this.$toast(\n            `请输入${this.row.min_currency.toFixed(\n              2\n            )}-${this.row.max_currency.toFixed(2)}区间的金额`\n          );\n          return;\n        }\n        const params = {\n          adv_id: this.row.id,\n          order_type: 1,\n          order_amount: price,\n        };\n        const result = await PlaceOrder(params);\n        const { code } = result;\n        if(code != 200){\n            this.$toast(result.message);\n            return;\n        };\n        console.log(result);\n        console.log(\"通过金额购买\");\n        this.$router.push({\n            path:'/pleasepayment',\n            query:{\n                id:result.data.order_id\n            }\n        });\n      };\n      //通过数量购买\n      const tradeForAmount = async () => {\n        const amount = Number(this.val);\n        if (amount < this.row.min_amount || amount > this.row.amount) {\n          this.$toast(\n            `请输入${this.row.min_amount.toFixed(4)}-${this.row.amount.toFixed(\n              4\n            )}区间的数量`\n          );\n          return;\n        }\n        const params = {\n          adv_id: this.row.id,\n          order_type: 2,\n          order_amount: amount,\n        };\n        const result = await PlaceOrder(params);\n        const { code } = result;\n        if(code != 200){\n            this.$toast(result.message);\n            return;\n        };\n        console.log(result);\n        console.log(\"通过数量购买\");\n        this.$router.push('/pleasepayment');\n        this.$store.commit('current/upOrderID',result.data.order_id);\n      };\n      this.tabs.active == 0 ? tradeForPrice() : tradeForAmount();\n    },\n  },\n  destroyed() {},\n};\n</script>\n\n<style lang=\"less\" scoped>\n.buyingAndSelling {\n  transition: all 0.34s ease-out;\n  /deep/.container {\n    padding: 0px;\n  }\n  /deep/.el-input-group__append {\n    transform: translateY(-4px);\n  }\n  .head {\n    height: 77px;\n    padding: 12px 12px 0px 12px;\n    background: #f5f8ff;\n    .top {\n      .title {\n        font-size: 18px;\n        color: #333333;\n        font-weight: bold;\n      }\n      .USDT {\n        width: 19px;\n        height: 19px;\n        margin-right: 5px;\n      }\n      .theUnitPrice {\n        padding: 0px 10px;\n        height: 24px;\n        background: #ffffff;\n        border-radius: 12px;\n        font-size: 12px;\n        font-weight: 400;\n        color: #999999;\n        .dengPao {\n          width: 15px;\n          height: 15px;\n          margin-right: 5px;\n        }\n      }\n    }\n    /deep/.van-tabs {\n      margin-top: 5px;\n      .van-tabs__wrap {\n        height: 35px;\n        .van-tabs__nav--line {\n          padding-bottom: 0px;\n          background-color: transparent;\n          .van-tab {\n            margin-right: 15px;\n            font-size: 14px;\n            color: #666666;\n            &.van-tab--active {\n              font-size: 14px;\n              font-weight: bold;\n              color: #333333;\n            }\n          }\n        }\n        .van-tabs__line {\n          bottom: 0px;\n        }\n      }\n    }\n  }\n  .body {\n    height: 150px;\n    padding: 0px 12px;\n    .ui-hx {\n      position: relative;\n      &::after {\n        background: #eeeeee;\n      }\n      .count {\n        margin-right: 52px;\n      }\n      .all {\n        position: absolute;\n        right: 0px;\n        font-size: 14px;\n        color: #6580ff;\n        bottom: 14px;\n      }\n      /deep/.el-input {\n        input {\n          font-size: 30px;\n          font-weight: bold;\n          color: #333333;\n          &::placeholder {\n            color: #333333;\n          }\n        }\n        .el-input-group__append {\n          font-size: 22px;\n          font-weight: bold;\n          color: #999999;\n          margin-left: 8px;\n          align-self: flex-end;\n        }\n      }\n    }\n    .limit {\n      padding: 10px 0px;\n      font-size: 12px;\n      color: #adadad;\n    }\n  }\n\n  .theTotalNumber {\n    padding: 0px 12px;\n    width: 375px;\n    height: 38px;\n    background: #f2f2f2;\n    .title {\n      font-size: 12px;\n      color: #333330;\n    }\n    dl {\n      dt {\n        font-weight: bold;\n        color: #121314;\n      }\n      dd {\n        color: #9e9f9f;\n      }\n    }\n    .ui-flex-dl dd {\n      margin-bottom: 5px;\n    }\n  }\n\n  .footer {\n    padding: 12px;\n    .van-button {\n      height: 44px;\n    }\n  }\n}\n</style>"]}]}