{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/chant/components/step_one.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/chant/components/step_one.vue","mtime":1658308205925},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZXJyb3IuY2F1c2UuanMiOwppbXBvcnQgeyBDaGFudFN0ZXBPbmUgfSBmcm9tICIuLi8uLi8uLi9hcGkvYXBpIjsKaW1wb3J0IHsgY2hlY2tFbWFpbCB9IGZyb20gIi4uLy4uLy4uL3V0aWxzL2luZGV4IjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICBjb25zdCB2ZXJpZnlfZW1haWwgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICghY2hlY2tFbWFpbCh2YWx1ZSkpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuivt+i+k+WFpeato+ehrueahOmCrueuseagvOW8jyIpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjYWxsYmFjaygpOwogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIG9wdGlvbnM6IFt7CiAgICAgICAgdmFsdWU6ICIxIiwKICAgICAgICBsYWJlbDogIuaci+WPiyIKICAgICAgfSwgewogICAgICAgIHZhbHVlOiAiMiIsCiAgICAgICAgbGFiZWw6ICLlkIzkuosiCiAgICAgIH0sIHsKICAgICAgICB2YWx1ZTogIjMiLAogICAgICAgIGxhYmVsOiAi5Lqy5bGeIgogICAgICB9XSwKICAgICAgdmFsdWU6ICIiLAogICAgICBmb3JtOiB7CiAgICAgICAgbmFtZTogbnVsbCwKICAgICAgICAvL+ecn+WunuWnk+WQjQogICAgICAgIHBob25lOiBudWxsLAogICAgICAgIC8v5omL5py65Y+3CiAgICAgICAgZW1haWw6IG51bGwsCiAgICAgICAgLy/pgq7nrrEKICAgICAgICBjb250YWN0OiBudWxsLAogICAgICAgIC8v57Sn5oCl6IGU57O75Lq6CiAgICAgICAgY29udGFjdF9waG9uZTogbnVsbCwKICAgICAgICAvL+e0p+aApeiBlOezu+S6uueUteivnQogICAgICAgIHJlbGF0aW9uOiBudWxsLAogICAgICAgIC8v5LiO5pys5Lq655qE5YWz57O7CiAgICAgICAgYWRkcmVzczogbnVsbCAvL+W4uOeUqOWcsOWdgAoKICAgICAgfSwKICAgICAgcnVsZUZvcm06IHsKICAgICAgICBuYW1lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fovpPlhaXnnJ/lrp7lp5PlkI0iKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHBob25lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fovpPlhaXmiYvmnLrlj7ciKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGVtYWlsOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fovpPlhaXpgq7nrrHlnLDlnYAiKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH0sIHsKICAgICAgICAgIHZhbGlkYXRvcjogdmVyaWZ5X2VtYWlsLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgY29udGFjdDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgi6K+36L6T5YWl57Sn5oCl6IGU57O75Lq6IiksCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBjb250YWN0X3Bob25lOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fovpPlhaXntKfmgKXogZTns7vkurrnlLXor50iKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIHJlbGF0aW9uOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fpgInmi6nkuI7mnKzkurrnmoTlhbPns7siKSwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dLAogICAgICAgIGFkZHJlc3M6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+i+k+WFpeW4uOeUqOWcsOWdgCIpLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbJ2N1cnJlbnQnXSkKICB9LAoKICBjcmVhdGVkKCkgewogICAgY29uc3QgbXNnID0gdGhpcy5jdXJyZW50LmNoYW50TXNnOwogICAgY29uc29sZS5sb2cobXNnLnVzZXJuYW1lKTsKICAgIHRoaXMudmFsdWUgPSBtc2cuZW1lcmdlbmN5X2NvbnRhY3RfcmVsYXRpb247CiAgICB0aGlzLmZvcm0gPSB7CiAgICAgIG5hbWU6IG1zZy51c2VybmFtZSwKICAgICAgLy/nnJ/lrp7lp5PlkI0KICAgICAgcGhvbmU6IG1zZy5waG9uZSwKICAgICAgLy/miYvmnLrlj7cKICAgICAgZW1haWw6IG1zZy5lbWFpbCwKICAgICAgLy/pgq7nrrEKICAgICAgY29udGFjdDogbXNnLmVtZXJnZW5jeV9jb250YWN0LAogICAgICAvL+e0p+aApeiBlOezu+S6ugogICAgICBjb250YWN0X3Bob25lOiBtc2cuZW1lcmdlbmN5X2NvbnRhY3RfcGhvbmUsCiAgICAgIC8v57Sn5oCl6IGU57O75Lq655S16K+dCiAgICAgIHJlbGF0aW9uOiBudWxsLAogICAgICBhZGRyZXNzOiBtc2cuYWRkcmVzcyAvL+W4uOeUqOWcsOWdgAoKICAgIH07CiAgICBjb25zb2xlLmxvZyh0aGlzLmZvcm0pOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdFN0ZXBPbmUoZm9ybU5hbWUpIHsKICAgICAgLy8gICB0aGlzLiRlbWl0KCJ1cFN0ZXAiLCAxKTsKICAgICAgLy8gICByZXR1cm47CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGFzeW5jIHJlcyA9PiB7CiAgICAgICAgaWYgKHJlcykgewogICAgICAgICAgdGhpcy4kdG9hc3QubG9hZGluZyh7CiAgICAgICAgICAgIG1lc3NhZ2U6ICLliqDovb3kuK0uLi4iLAogICAgICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICAgICAgcGhvbmU6IHRoaXMuZm9ybS5waG9uZSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuZm9ybS5lbWFpbCwKICAgICAgICAgICAgZW1lcmdlbmN5X2NvbnRhY3Q6IHRoaXMuZm9ybS5jb250YWN0LAogICAgICAgICAgICBlbWVyZ2VuY3lfY29udGFjdF9waG9uZTogdGhpcy5mb3JtLmNvbnRhY3RfcGhvbmUsCiAgICAgICAgICAgIGVtZXJnZW5jeV9jb250YWN0X3JlbGF0aW9uOiB0aGlzLnZhbHVlLAogICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmZvcm0uYWRkcmVzcwogICAgICAgICAgfTsKICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY3VycmVudC91cENoYWluTXNnJywgcGFyYW1zKTsKICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENoYW50U3RlcE9uZShwYXJhbXMpOwogICAgICAgICAgY29uc3QgewogICAgICAgICAgICBjb2RlCiAgICAgICAgICB9ID0gcmVzdWx0OwoKICAgICAgICAgIGlmIChjb2RlICE9IDIwMCkgewogICAgICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBjb25zb2xlLmxvZygi6aqM6K+B6YCa6L+HIik7CiAgICAgICAgICB0aGlzLiRlbWl0KCJ1cFN0ZXAiLCAxKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";AAuFA;AACA;AACA;AACA;EACAA;IACA;MACA;QACAC;MACA,CAFA,MAEA;QACAA;MACA;IACA,CANA;;IAOA;MACAC,UACA;QACAC,UADA;QAEAC;MAFA,CADA,EAKA;QACAD,UADA;QAEAC;MAFA,CALA,EASA;QACAD,UADA;QAEAC;MAFA,CATA,CADA;MAeAD,SAfA;MAgBAE;QACAC,UADA;QACA;QACAC,WAFA;QAEA;QACAC,WAHA;QAGA;QACAC,aAJA;QAIA;QACAC,mBALA;QAKA;QACAC,cANA;QAMA;QACAC,aAPA,CAOA;;MAPA,CAhBA;MAyBAC;QACAP,OACA;UACAQ,cADA;UAEAC,2BAFA;UAGAC;QAHA,CADA,CADA;QAQAT,QACA;UAAAO;UAAAC;UAAAC;QAAA,CADA,CARA;QAWAR,QACA;UACAM,cADA;UAEAC,2BAFA;UAGAC;QAHA,CADA,EAMA;UAAAC;UAAAD;QAAA,CANA,CAXA;QAmBAP,UACA;UACAK,cADA;UAEAC,4BAFA;UAGAC;QAHA,CADA,CAnBA;QA0BAN,gBACA;UACAI,cADA;UAEAC,8BAFA;UAGAC;QAHA,CADA,CA1BA;QAiCAL,WACA;UACAG,cADA;UAEAC,6BAFA;UAGAC;QAHA,CADA,CAjCA;QAwCAJ,UACA;UACAE,cADA;UAEAC,2BAFA;UAGAC;QAHA,CADA;MAxCA;IAzBA;EA0EA,CAnFA;;EAoFAE,YACA;EADA,CApFA;;EAuFAC;IACA;IACAC;IACA;IACA;MACAd,kBADA;MACA;MACAC,gBAFA;MAEA;MACAC,gBAHA;MAGA;MACAC,8BAJA;MAIA;MACAC,0CALA;MAKA;MACAC,cANA;MAOAC,oBAPA,CAOA;;IAPA;IASAQ;EACA,CArGA;;EAsGAC;IACAC;MACA;MACA;MACA;QACA;UACA;YACAP,iBADA;YAEAQ;UAFA;UAIA;YACAC,wBADA;YAEAjB,sBAFA;YAGAC,sBAHA;YAIAiB,oCAJA;YAKAC,gDALA;YAMAC,sCANA;YAOAf;UAPA;UASA;UACA;UACA;YAAAgB;UAAA;;UACA;YACA;YACA;UACA;;UACAR;UACA;QACA;MACA,CAzBA;IA0BA;;EA9BA;AAtGA","names":["data","callback","options","value","label","form","name","phone","email","contact","contact_phone","relation","address","ruleForm","required","message","trigger","validator","computed","created","console","methods","submitStepOne","forbidClick","username","emergency_contact","emergency_contact_phone","emergency_contact_relation","code"],"sourceRoot":"src/views/chant/components","sources":["step_one.vue"],"sourcesContent":["<!-- 基本信息 -->\n<template>\n  <div class=\"step-one step-public\">\n    <p class=\"step-title\">基本信息</p>\n    <div class=\"step-content\">\n      <div class=\"content-msg\">\n        <el-form\n          ref=\"step-form\"\n          :model=\"form\"\n          :rules=\"ruleForm\"\n          label-position=\"top\"\n        >\n          <el-form-item prop=\"name\">\n            <P-input\n              title=\"姓名\"\n              v-model=\"form.name\"\n              placeholder=\"请输入真实姓名\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"phone\">\n            <P-input\n              title=\"手机号\"\n              v-model=\"form.phone\"\n              placeholder=\"请输入本人电话\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"email\">\n            <P-input\n              title=\"邮箱\"\n              v-model=\"form.email\"\n              placeholder=\"请输入本人邮箱\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"contact\">\n            <P-input\n              title=\"紧急联系人\"\n              v-model=\"form.contact\"\n              placeholder=\"请输入紧急联系人姓名\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"contact_phone\">\n            <P-input\n              title=\"紧急联系人电话\"\n              v-model=\"form.contact_phone\"\n              placeholder=\"请输入紧急联系人电话\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"与本人的关系\">\n            <div class=\"select-mine\">\n              <p class=\"other-title\">与本人的关系</p>\n              <el-select v-model=\"value\" placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in options\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n              <p class=\"select-error\" v-if=\"!value\">请选择与本人关系</p>\n            </div>\n          </el-form-item>\n          <el-form-item prop=\"address\">\n            <P-input\n              title=\"紧急联系人电话\"\n              v-model=\"form.address\"\n              placeholder=\"请输入本人现常住地址\"\n            ></P-input>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"content-btn\">\n        <div class=\"btn-label\"></div>\n        <div class=\"btn-box\">\n          <P-button\n            type=\"primary\"\n            class=\"btn-primary\"\n            @click=\"submitStepOne('step-form')\"\n            >下一步</P-button\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ChantStepOne } from \"../../../api/api\";\nimport { checkEmail } from \"../../../utils/index\";\nimport { mapState } from \"vuex\";\nexport default {\n  data() {\n    const verify_email = (rule, value, callback) => {\n      if (!checkEmail(value)) {\n        callback(new Error(\"请输入正确的邮箱格式\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      options: [\n        {\n          value: \"1\",\n          label: \"朋友\",\n        },\n        {\n          value: \"2\",\n          label: \"同事\",\n        },\n        {\n          value: \"3\",\n          label: \"亲属\",\n        },\n      ],\n      value: \"\",\n      form: {\n        name: null, //真实姓名\n        phone: null, //手机号\n        email: null, //邮箱\n        contact: null, //紧急联系人\n        contact_phone: null, //紧急联系人电话\n        relation: null, //与本人的关系\n        address: null, //常用地址\n      },\n      ruleForm: {\n        name: [\n          {\n            required: true,\n            message: this.$t(\"请输入真实姓名\"),\n            trigger: \"blur\",\n          },\n        ],\n        phone: [\n          { required: true, message: this.$t(\"请输入手机号\"), trigger: \"blur\" },\n        ],\n        email: [\n          {\n            required: true,\n            message: this.$t(\"请输入邮箱地址\"),\n            trigger: \"blur\",\n          },\n          { validator: verify_email, trigger: \"blur\" },\n        ],\n        contact: [\n          {\n            required: true,\n            message: this.$t(\"请输入紧急联系人\"),\n            trigger: \"blur\",\n          },\n        ],\n        contact_phone: [\n          {\n            required: true,\n            message: this.$t(\"请输入紧急联系人电话\"),\n            trigger: \"blur\",\n          },\n        ],\n        relation: [\n          {\n            required: true,\n            message: this.$t(\"请选择与本人的关系\"),\n            trigger: \"blur\",\n          },\n        ],\n        address: [\n          {\n            required: true,\n            message: this.$t(\"请输入常用地址\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed:{\n    ...mapState(['current'])\n  },\n  created(){\n    const msg = this.current.chantMsg;\n    console.log(msg.username)\n    this.value  = msg.emergency_contact_relation;\n    this.form = {\n        name: msg.username, //真实姓名\n        phone: msg.phone, //手机号\n        email: msg.email, //邮箱\n        contact: msg.emergency_contact, //紧急联系人\n        contact_phone: msg.emergency_contact_phone, //紧急联系人电话\n        relation:null,\n        address: msg.address, //常用地址\n    };\n    console.log(this.form)\n  },\n  methods: {\n    submitStepOne(formName) {\n      //   this.$emit(\"upStep\", 1);\n      //   return;\n      this.$refs[formName].validate(async (res) => {\n        if (res) {\n          this.$toast.loading({\n            message: \"加载中...\",\n            forbidClick: true,\n          });\n          const params = {\n            username: this.form.name,\n            phone: this.form.phone,\n            email: this.form.email,\n            emergency_contact: this.form.contact,\n            emergency_contact_phone: this.form.contact_phone,\n            emergency_contact_relation: this.value,\n            address: this.form.address,\n          };\n          this.$store.commit('current/upChainMsg',params)\n          const result = await ChantStepOne(params);\n          const { code } = result;\n          if (code != 200) {\n            this.$toast(result.message);\n            return;\n          }\n          console.log(\"验证通过\");\n          this.$emit(\"upStep\", 1);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./step.less\");\n.content-msg {\n  padding-bottom: 30px !important;\n  .other-title {\n    font-size: 14px;\n    font-weight: bold;\n    color: #333;\n    margin-top: 10px;\n  }\n  .select-mine {\n    position: relative;\n    .select-error {\n      position: absolute;\n      bottom: -27px;\n      font-size: 12px;\n      color: #f56c6c;\n    }\n  }\n  /deep/.el-select {\n    width: 100%;\n    .el-input__inner {\n      height: 44px;\n      border-color: #eee;\n      padding-left: 10px;\n      background: #fdfdfd;\n    }\n  }\n}\n</style>"]}]}