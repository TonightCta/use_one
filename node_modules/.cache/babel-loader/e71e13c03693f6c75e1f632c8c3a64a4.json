{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/bankCard/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/bankCard/index.vue","mtime":1658220335478},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IEluZmluaXRlTG9hZGluZyBmcm9tICJ2dWUtaW5maW5pdGUtbG9hZGluZyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcGFyYW1zOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBsaW1pdDogMTAKICAgICAgfSwKICAgICAgdHlwZUxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgY2FyZExpc3Q6IFtdLAogICAgICBjaGVja2VkOiBmYWxzZQogICAgfTsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbImN1cnJlbnQiXSkKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEluZmluaXRlTG9hZGluZwogIH0sCgogIGNyZWF0ZWQoKSB7Ly8gdGhpcy5vbkxpc3QoKTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy5vblR5cGUoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBvblJlZnJlc2goKSB7CiAgICAgIHRoaXMub25MaXN0KCk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAxMDAwKTsKICAgIH0sCgogICAgYXN5bmMgb25UeXBlKCkgewogICAgICBjb25zdCByZXNwb25zZU1hcCA9IGF3YWl0IEFQSS5HZXREYXRhKHRoaXMsICJjYXJkL21hcCIpOwogICAgICB0aGlzLnR5cGVMaXN0ID0gcmVzcG9uc2VNYXA7CiAgICB9LAoKICAgIGFzeW5jIGxvYWRNb3JlRXZlbnQoJHN0YXRlKSB7CiAgICAgIHRoaXMucGFyYW1zLmxpbWl0ICs9IDE7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnN0IHsKICAgICAgICBkYXRhCiAgICAgIH0gPSByZXN1bHQ7CgogICAgICBpZiAodGhpcy5jYXJkTGlzdC5sZW5ndGggPT0gZGF0YS50b3RhbCkgewogICAgICAgICRzdGF0ZS5jb21wbGV0ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgICRzdGF0ZS5sb2FkZWQoKTsKICAgICAgfQogICAgfSwKCiAgICBhc3luYyBvbkxpc3QoKSB7CiAgICAgIC8vICAgQVBJLkdldERhdGEodGhpcywgImNhcmQvbGlzdCIsIHRoaXMucGFyYW1zKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgLy8gICAgICAgY29uc3QgeyBjb2RlLCBkYXRhLCBtZXNzYWdlIH0gPSByZXNwb25zZQogICAgICAvLyAgICAgICBpZiAoY29kZSA9PSAyMDApIHsKICAgICAgLy8gICAgICAgICAgIGNvbnN0IHsgbGlzdCwgdG90YWwgfSA9IGRhdGEKICAgICAgLy8gICAgICAgICAgIHRoaXMuJHJlZnNbJ1AtbGlzdCddLkFkZChsaXN0LCB0b3RhbCkKICAgICAgLy8gICAgICAgfSBlbHNlIHsKICAgICAgLy8gICAgICAgICAgIHRoaXMuJHJlZnNbJ1AtbGlzdCddLm9uT3ZlcmxheShmYWxzZSkKICAgICAgLy8gICAgICAgICAgIHRoaXMuJHRvYXN0LmZhaWwobWVzc2FnZSk7CiAgICAgIC8vICAgICAgIH0KICAgICAgLy8gICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgIC8vICAgICAgIHRoaXMuJHRvYXN0LmZhaWwoZXJyb3IpOwogICAgICAvLyAgIH0pOwogICAgICAvLyAgIHRoaXMucGFyYW1zLnBhZ2UrKzsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQVBJLkdldERhdGEodGhpcywgImNhcmQvbGlzdCIsIHRoaXMucGFyYW1zKTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IHJlc3VsdDsKICAgICAgY29uc3QgewogICAgICAgIGxpc3QKICAgICAgfSA9IGRhdGE7CiAgICAgIHRoaXMuY2FyZExpc3QgPSBsaXN0OwogICAgICB0aGlzLmNhcmRMaXN0LmZvckVhY2goZSA9PiB7CiAgICAgICAgdGhpcy4kc2V0KGUsICJjaGVja2VkIiwgZS5zdGF0dXMgPT0gMSA/IHRydWUgOiBmYWxzZSk7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKCiAgICAvLyBvblJlZnJlc2goKSB7CiAgICAvLyAgIHRoaXMucGFyYW1zLnBhZ2UgPSAwOwogICAgLy8gICB0aGlzLm9uTGlzdCgpOwogICAgLy8gfSwKICAgIGNhcmRUeXBlKGlkKSB7CiAgICAgIGxldCByb3cgPSB0aGlzLnR5cGVMaXN0LmZpbHRlcihpdGVtID0+IHsKICAgICAgICBpZiAoaXRlbS5pZCA9PT0gaWQpIHsKICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIGxldCBuYW1lID0gIuacquefpSI7CgogICAgICBpZiAocm93Lmxlbmd0aCAhPSAwKSB7CiAgICAgICAgbmFtZSA9IHJvd1swXS5uYW1lOwogICAgICB9CgogICAgICByZXR1cm4gbmFtZTsKICAgIH0sCgogICAgYXN5bmMgdXBDYXJkU3RhdHVzKF9pZCwgX3N0YXR1cykgewogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgaWQ6IF9pZCwKICAgICAgICBzdGF0dXM6IF9zdGF0dXMgPyAxIDogMAogICAgICB9OwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBUEkuVXBkYXRlKHRoaXMsICJjYXJkL3N0YXR1cyIsIHBhcmFtcyk7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb2RlLAogICAgICAgIGRhdGEsCiAgICAgICAgbWVzc2FnZQogICAgICB9ID0gcmVzdWx0OwoKICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgdGhpcy5mb3JtID0gZGF0YTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJvdXRlci5iYWNrKC0xKTsKICAgICAgfQogICAgfQoKICB9Cn07"},{"version":3,"mappings":"AAiGA;AACA;AACA;EACAA;IACA;MACAC;QACAC,OADA;QAEAC;MAFA,CADA;MAKAC,YALA;MAMAC,cANA;MAOAC,YAPA;MAQAC;IARA;EAUA,CAZA;;EAaAC,YACA;EADA,CAbA;EAgBAC;IACAC;EADA,CAhBA;;EAmBAC,WACA;EACA,CArBA;;EAsBAC;IACA;EACA,CAxBA;;EAyBAC;IACAC;MACA;MACAC;QACA;MACA,CAFA,EAEA,IAFA;IAGA,CANA;;IAOA;MACA;MACA;IACA,CAVA;;IAWA;MACA;MACA;MACA;QAAAf;MAAA;;MACA;QACAgB;MACA,CAFA,MAEA;QACAA;MACA;IACA,CApBA;;IAqBA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QAAAhB;MAAA;MACA;QAAAiB;MAAA;MACA;MACA;QACA;MACA,CAFA;MAGA;IACA,CA3CA;;IA4CA;IACA;IACA;IACA;IACAC;MACA;QACA;UACA;QACA;MACA,CAJA;MAKA;;MACA;QACAC;MACA;;MACA;IACA,CA3DA;;IA4DA;MACA;QACAC,OADA;QAEAC;MAFA;MAIA;MACA;QAAAC;QAAAtB;QAAAuB;MAAA;;MACA;QACA;MACA,CAFA,MAEA;QACA;MACA;IACA;;EAxEA;AAzBA","names":["data","params","page","limit","typeList","loading","cardList","checked","computed","components","InfiniteLoading","created","mounted","methods","onRefresh","setTimeout","$state","list","cardType","name","id","status","code","message"],"sourceRoot":"src/views/bankCard","sources":["index.vue"],"sourcesContent":["<!--\n * @Name: 收款方式管理\n * @Date: 2022-07-04 14:45:50\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 18:20:01\n-->\n<template>\n  <P-main>\n    <Navigation />\n    <P-body type=\"Fei\" class=\"m-60-b\">\n      <h1>收款方式管理</h1>\n      <!-- <P-list ref=\"P-list\" theme=\"card\" :footer=\"true\" @refresh=\"onRefresh\" @load=\"onList\">\n                <template v-slot=\"{row}\">\n                    <div class=\"cardPackage ui-flex-center\">\n                        <B-a :href=\"`/bankcard/operation/${row.id}`\">\n                            <div class=\"ui-flex-left\">\n                                <B-svg name=\"qianBao\" width=\"14px\" />\n                                <div class=\"whereItIs\">{{row.id}}-{{ cardType(row.p_id) }} {{row.bank}}</div>\n                                <div class=\"INR\">{{current.amount_way}}</div>\n                            </div>\n                            <div class=\"ui-flex-left info\">\n                                <div>{{row.username}}</div>\n                                <div class=\"m-10-l\">{{row.account}}</div>\n                            </div>\n                        </B-a>\n                        <div>\n                            <B-switch v-model=\"row.status\" open=\"\" close=\"\" size=\"default\" @on-change=\"updateStatus\"\n                                :item=\"row\" />\n                        </div>\n                    </div>\n                </template>\n                <template #footer>\n                    <ul class=\"ui-list-xing\">\n                        <li><span class=\"ui-col-hong\">请确保您设置的账户为本人实名账户</span>，非本人实名账户收款会导致订单失败且账号被冻结</li>\n                        <li>向买家仅展示已开启的收款账号</li>\n                    </ul>\n                </template>\n            </P-list> -->\n\n      <div class=\"card-list\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <ul>\n            <li v-for=\"(card, index) in cardList\" :key=\"index\">\n              <div class=\"card-msg\">\n                <p class=\"iconfont icon-a-bianzu3beifen\" type=\"icon\"></p>\n                <div class=\"bank-name\">\n                  <div class=\"flex-box\">\n                    <p>\n                      {{ card.id }}-{{ cardType(card.p_id) }} {{ card.bank }}\n                    </p>\n                    <p class=\"label-cur\">{{ current.amount_way }}</p>\n                  </div>\n                  <p>{{ card.username }}&nbsp;&nbsp;{{ card.account }}</p>\n                </div>\n              </div>\n              <div class=\"card-oper\">\n                <van-switch\n                  v-model=\"card.checked\"\n                  @change=\"upCardStatus(card.id, card.checked)\"\n                  size=\"18px\"\n                  active-color=\"#2CBC94\"\n                  inactive-color=\"#f8f8f8\"\n                />\n              </div>\n            </li>\n          </ul>\n          <infinite-loading\n            spinner=\"spiral\"\n            @infinite=\"loadMoreEvent\"\n            :distance=\"0\"\n          >\n            <div slot=\"spinner\">\n              <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n            </div>\n            <div slot=\"no-more\">没有更多了</div>\n            <div slot=\"no-results\">没有数据了</div>\n          </infinite-loading>\n          <p class=\"other-li m-t-22\">\n            *<span class=\"ui-col-hong\">请确保您设置的账户为本人实名账户</span\n            >，非本人实名账户收款会导致订单失败且账号被冻结\n          </p>\n          <p class=\"other-li m-b-60\">向买家仅展示已开启的收款账号</p>\n        </van-pull-refresh>\n      </div>\n    </P-body>\n    <Foo-ter>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i\"\n        @click=\"$router.push('/bankcard/addtype')\"\n        >添加收款方式</P-button\n      >\n    </Foo-ter>\n  </P-main>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nexport default {\n  data() {\n    return {\n      params: {\n        page: 1,\n        limit: 10,\n      },\n      typeList: [],\n      loading: false,\n      cardList: [],\n      checked: false,\n    };\n  },\n  computed: {\n    ...mapState([\"current\"]),\n  },\n  components: {\n    InfiniteLoading,\n  },\n  created() {\n    // this.onList();\n  },\n  mounted() {\n    this.onType();\n  },\n  methods: {\n    onRefresh() {\n      this.onList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    async onType() {\n      const responseMap = await API.GetData(this, \"card/map\");\n      this.typeList = responseMap;\n    },\n    async loadMoreEvent($state) {\n      this.params.limit += 1;\n      const result = await this.onList();\n      const { data } = result;\n      if (this.cardList.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    async onList() {\n      //   API.GetData(this, \"card/list\", this.params).then(response => {\n      //       const { code, data, message } = response\n      //       if (code == 200) {\n      //           const { list, total } = data\n      //           this.$refs['P-list'].Add(list, total)\n      //       } else {\n      //           this.$refs['P-list'].onOverlay(false)\n      //           this.$toast.fail(message);\n      //       }\n      //   }).catch(error => {\n      //       this.$toast.fail(error);\n      //   });\n      //   this.params.page++;\n      const result = await API.GetData(this, \"card/list\", this.params);\n      const { data } = result;\n      const { list } = data;\n      this.cardList = list;\n      this.cardList.forEach((e) => {\n        this.$set(e, \"checked\", e.status == 1 ? true : false);\n      });\n      return result;\n    },\n    // onRefresh() {\n    //   this.params.page = 0;\n    //   this.onList();\n    // },\n    cardType(id) {\n      let row = this.typeList.filter((item) => {\n        if (item.id === id) {\n          return item;\n        }\n      });\n      let name = \"未知\";\n      if (row.length != 0) {\n        name = row[0].name;\n      }\n      return name;\n    },\n    async upCardStatus(_id, _status) {\n      const params = {\n        id: _id,\n        status: _status ? 1 : 0,\n      };\n      const result = await API.Update(this, \"card/status\", params);\n      const { code, data, message } = result;\n      if (code == 200) {\n        this.form = data;\n      } else {\n        this.router.back(-1);\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\nh1 {\n  font-size: 22px;\n  font-weight: 500;\n  color: #333333;\n  margin-bottom: 22px;\n}\n\n.cardPackage {\n  .whereItIs {\n    font-size: 14px;\n    font-weight: bold;\n    color: #333333;\n    margin: 0px 5px;\n  }\n  .INR {\n    font-size: 10px;\n    color: #666666;\n    background: #efefef;\n    border-radius: 2px;\n    padding: 0px 5px;\n    transform: scale(0.8);\n  }\n  .info {\n    padding-top: 5px;\n    padding-left: 20px;\n    font-size: 12px;\n    color: #666666;\n  }\n}\n\n.ui-list-xing {\n  margin-top: 22px;\n  font-size: 12px;\n  color: #999999;\n}\n</style>\n"]}]}