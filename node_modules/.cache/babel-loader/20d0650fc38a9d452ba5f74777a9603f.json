{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/index.vue","mtime":1658713050075},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBnZXRDb2luUHJpY2UsIG9uZUludGVyUHJpY2UgfSBmcm9tICIuLi8uLi8uLi91dGlscy9pbmRleCI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IFVzZXJBc3NldHMgfSBmcm9tICIuLi8uLi8uLi9hcGkvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBvcGVyTGlzdDogW3sKICAgICAgICBpY29uOiAiaWNvbi1hLWJpYW56dTkiLAogICAgICAgIG5hbWU6ICLlhYXluIEiLAogICAgICAgIHVybDogIi9yZWNoYXJnZSIKICAgICAgfSwgewogICAgICAgIGljb246ICJpY29uLXlpbmhhbmdrYS0yIiwKICAgICAgICBuYW1lOiAi5Lqk5piTIiwKICAgICAgICB1cmw6ICIvaW5kZXgiCiAgICAgIH0sIHsKICAgICAgICBpY29uOiAiaWNvbi1hLTM1Z3VhbmdnYW94aWFvc2hvdSIsCiAgICAgICAgbmFtZTogIuWPkeW4g+W5v+WRiiIsCiAgICAgICAgdXJsOiAiL3JlbGVhc2UiCiAgICAgIH1dLAogICAgICBhc3NldHNMaXN0OiBbXSwKICAgICAgYXNzZXRzU2VjOiBbXSwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHByaWNlX2J0YzogbnVsbCwKICAgICAgc2VhcmNoQXNzZXRzOiAiIiwKICAgICAgLy/mkJzntKLotYTkuqcKICAgICAgbG9hZERhdGE6IGZhbHNlLAogICAgICAvL+WKoOi9veWKqOeUuwogICAgICB2aXNpYmxlOiB0cnVlIC8v5Y+v6KeG54q25oCBCgogICAgfTsKICB9LAoKICBjb21wdXRlZDogeyAuLi5tYXBTdGF0ZShbImN1cnJlbnQiXSksCgogICAgdG90YWxQcmljZSgpIHsKICAgICAgcmV0dXJuIE51bWJlcih0aGlzLiRyb3V0ZS5xdWVyeS50b3RhbF9wcmljZSkudG9GaXhlZCg0KTsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoQXNzZXRzKHZhbCkgewogICAgICBjb25zdCBzZWFyY2ggPSAoKSA9PiB7CiAgICAgICAgdGhpcy5hc3NldHNMaXN0ID0gdGhpcy5hc3NldHNTZWMuZmlsdGVyKGUgPT4gewogICAgICAgICAgcmV0dXJuIGUuY29pbi5pbmNsdWRlcyh2YWwudG9VcHBlckNhc2UoKSk7CiAgICAgICAgfSk7CiAgICAgIH07CgogICAgICB2YWwgJiYgc2VhcmNoKCk7CiAgICAgICF2YWwgJiYgKHRoaXMuYXNzZXRzTGlzdCA9IHRoaXMuYXNzZXRzU2VjKTsKICAgIH0KCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuaW50ZXJUb3RhbFByaWNlKCk7CiAgICB0aGlzLmdldENvaW5MaXN0KCk7CiAgfSwKCiAgY29tcG9uZW50czogewogICAgTmF2aWdhdGlvbjogcmVzb2x2ZSA9PiByZXF1aXJlKFsiLi4vLi4vLi4vY29tcG9uZW50cy9uYXYvTmF2aWdhdGlvbiJdLCByZXNvbHZlKQogIH0sCiAgbWV0aG9kczogewogICAgb25SZWZyZXNoKCkgewogICAgICB0aGlzLmdldENvaW5MaXN0KCk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAxMDAwKTsKICAgIH0sCgogICAgLy/orqHnrpfms5XluIHotYTkuqfoh7NCVEMKICAgIGFzeW5jIGludGVyVG90YWxQcmljZSgpIHsKICAgICAgY29uc3QgYnRjX3ByaWNlID0gYXdhaXQgZ2V0Q29pblByaWNlKCJCVEMiKTsKICAgICAgY29uc3QgcHJpY2Vfb2ZfdXMgPSBwYXJzZUludCh0aGlzLiRyb3V0ZS5xdWVyeS50b3RhbF9wcmljZSkgLyBwYXJzZUludCh0aGlzLmN1cnJlbnQud2F5X3JhdGUpOwogICAgICB0aGlzLnByaWNlX2J0YyA9IHBhcnNlSW50KHByaWNlX29mX3VzKSAvIHBhcnNlSW50KGJ0Y19wcmljZSk7CiAgICB9LAoKICAgIC8v6I635Y+W6LWE5Lqn5YiX6KGoCiAgICBhc3luYyBnZXRDb2luTGlzdCgpIHsKICAgICAgdGhpcy5sb2FkRGF0YSA9IHRydWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJBc3NldHMoKTsKICAgICAgbGV0IGxpc3RfbG9jYWwgPSBbXTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IHJlc3VsdDsKCiAgICAgIGZvciAobGV0IGkgaW4gZGF0YSkgewogICAgICAgIGxpc3RfbG9jYWwucHVzaChkYXRhW2ldKTsKICAgICAgfQoKICAgICAgdGhpcy5hc3NldHNMaXN0ID0gbGlzdF9sb2NhbDsKICAgICAgdGhpcy5hc3NldHNMaXN0LmZvckVhY2goYXN5bmMgZSA9PiB7CiAgICAgICAgdGhpcy4kc2V0KGUsICJwcmljZSIsIGF3YWl0IG9uZUludGVyUHJpY2UodGhpcy5jdXJyZW50LndheV9yYXRlLCBlLmF2YWlsYWJsZSwgZS5jb2luKSk7CiAgICAgIH0pOwogICAgICB0aGlzLmFzc2V0c1NlYyA9IHRoaXMuYXNzZXRzTGlzdDsKICAgICAgdGhpcy5sb2FkRGF0YSA9IGZhbHNlOwogICAgfQoKICB9Cn07"},{"version":3,"mappings":";AA0HA;AACA;AACA;AACA;EACAA;IACA;MACAC,WACA;QACAC,sBADA;QAEAC,UAFA;QAGAC;MAHA,CADA,EAMA;QACAF,wBADA;QAEAC,UAFA;QAGAC;MAHA,CANA,EAWA;QACAF,iCADA;QAEAC,YAFA;QAGAC;MAHA,CAXA,CADA;MAkBAC,cAlBA;MAmBAC,aAnBA;MAoBAC,cApBA;MAqBAC,eArBA;MAsBAC,gBAtBA;MAsBA;MACAC,eAvBA;MAuBA;MACAC,aAxBA,CAwBA;;IAxBA;EA0BA,CA5BA;;EA6BAC,YACA,wBADA;;IAEAC;MACA;IACA;;EAJA,CA7BA;EAmCAC;IACAL;MACA;QACA;UACA;QACA,CAFA;MAGA,CAJA;;MAKAM;MACA;IACA;;EATA,CAnCA;;EA8CAC;IACA;IACA;EACA,CAjDA;;EAkDAC;IACAC,uBACAC;EAFA,CAlDA;EAsDAC;IACAC;MACA;MACAC;QACA;MACA,CAFA,EAEA,IAFA;IAGA,CANA;;IAOA;IACA;MACA;MACA,oBACAC,0CACAA,+BAFA;MAGA;IACA,CAdA;;IAeA;IACA;MACA;MACA;MACA;MACA;QAAAvB;MAAA;;MACA;QACAwB;MACA;;MACA;MACA;QACA,UACAC,CADA,EAEA,OAFA,EAGA,+DAHA;MAKA,CANA;MAOA;MACA;IACA;;EAlCA;AAtDA","names":["data","operList","icon","name","url","assetsList","assetsSec","loading","price_btc","searchAssets","loadData","visible","computed","totalPrice","watch","val","created","components","Navigation","require","methods","onRefresh","setTimeout","parseInt","list_local","e"],"sourceRoot":"src/views/mine/assets","sources":["index.vue"],"sourcesContent":["<!--\n  * @NAME 我的资产\n  * @DATE 2022-07-14\n  * @AUTHOR CT\n-->\n<template>\n  <div class=\"mine-assets\">\n    <Navigation title=\"我的资产\" />\n    <div class=\"assets-content\">\n      <div style=\"padding: 0 12px\">\n        <div class=\"assets-overview\">\n          <div>\n            <div class=\"all-balance\">\n              <p>总资产折合(BTC)</p>\n              <p type=\"icon\" class=\"iconfont icon-yanjing-3\" v-if=\"!visible\" @click=\"visible = !visible\"></p>\n              <p type=\"icon\" class=\"iconfont icon-24gf-eyeHide\" v-else @click=\"visible = !visible\"></p>\n            </div>\n            <div class=\"balance-amount\">\n              <p>\n                <mt-spinner\n                  v-if=\"price_btc == null\"\n                  type=\"triple-bounce\"\n                  color=\"white\"\n                ></mt-spinner>\n                <span v-else>{{ visible ? Number(price_btc).toFixed(6) : '&prop;' }}</span>\n              </p>\n              <p class=\"label\">&asymp;</p>\n              <p>{{ current.way_symbol }}{{ visible ? totalPrice : '&prop;' }}</p>\n            </div>\n          </div>\n          <!-- 操作 -->\n          <div class=\"view-oper\">\n            <ul>\n              <li\n                v-for=\"(oper, index) in operList\"\n                :key=\"index\"\n                @click=\"$router.push(oper.url)\"\n              >\n                <p\n                  type=\"icon\"\n                  class=\"iconfont\"\n                  :class=\"oper.icon\"\n                ></p>\n                <p>{{ oper.name }}</p>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <!-- 搜索资产 -->\n        <div class=\"search-assets\">\n          <P-input placeholder=\"搜索\" v-model=\"searchAssets\">\n            <template #icon>\n              <div class=\"iconfont icon-fangdajing\"></div>\n            </template>\n          </P-input>\n        </div>\n      </div>\n      <!-- 资产列表 -->\n      <div class=\"assets-list\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <div class=\"flex-box p-t-40\" v-if=\"loadData\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n          <div v-else>\n            <ul v-if=\"assetsList.length != 0\">\n              <li\n                class=\"\"\n                v-for=\"(assets, index) in assetsList\"\n                :key=\"index\"\n                @click=\"\n                  $router.push({\n                    path: '/assets-details',\n                    query: {\n                      row: JSON.stringify(assets),\n                    },\n                  })\n                \"\n              >\n                <div class=\"coin-msg\">\n                  <div class=\"flex-box\">\n                    <p class=\"coin-icon\">\n                      <img :src=\"assets.logo\" alt=\"\" />\n                    </p>\n                    <p class=\"coin-name\">{{ assets.coin }}</p>\n                  </div>\n                  <p class=\"iconfont icon-youjiantou\" type=\"icon\"></p>\n                </div>\n                <div class=\"amount-msg\">\n                  <div>\n                    <p>可用</p>\n                    <p>{{ visible ? Number(assets.available).toFixed(4) : '&prop;' }}</p>\n                  </div>\n                  <div>\n                    <p>冻结</p>\n                    <p>{{ visible ? Number(assets.freeze).toFixed(4) : '&prop;' }}</p>\n                  </div>\n                  <div>\n                    <p>折合</p>\n                    <p>\n                      <mt-spinner\n                        type=\"triple-bounce\"\n                        color=\"#2CBC94\"\n                        v-if=\"assets.price == undefined\"\n                      ></mt-spinner>\n                      <span v-else\n                        >{{ current.way_symbol\n                        }}{{ visible ? Number(assets.price).toFixed(4) : '&prop;' }}</span\n                      >\n                    </p>\n                  </div>\n                </div>\n              </li>\n            </ul>\n            <p class=\"no-data\" v-else>暂无数据</p>\n          </div>\n        </van-pull-refresh>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCoinPrice, oneInterPrice } from \"../../../utils/index\";\nimport { mapState } from \"vuex\";\nimport { UserAssets } from \"../../../api/api\";\nexport default {\n  data() {\n    return {\n      operList: [\n        {\n          icon: \"icon-a-bianzu9\",\n          name: \"充币\",\n          url: \"/recharge\",\n        },\n        {\n          icon: \"icon-yinhangka-2\",\n          name: \"交易\",\n          url: \"/index\",\n        },\n        {\n          icon: \"icon-a-35guanggaoxiaoshou\",\n          name: \"发布广告\",\n          url: \"/release\",\n        },\n      ],\n      assetsList: [],\n      assetsSec: [],\n      loading: false,\n      price_btc: null,\n      searchAssets: \"\", //搜索资产\n      loadData: false,//加载动画\n      visible:true,//可视状态\n    };\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    totalPrice() {\n      return Number(this.$route.query.total_price).toFixed(4);\n    },\n  },\n  watch: {\n    searchAssets(val) {\n      const search = () => {\n        this.assetsList = this.assetsSec.filter((e) => {\n          return e.coin.includes(val.toUpperCase());\n        });\n      };\n      val && search();\n      !val && (this.assetsList = this.assetsSec);\n    },\n  },\n  created() {\n    this.interTotalPrice();\n    this.getCoinList();\n  },\n  components: {\n    Navigation: (resolve) =>\n      require([\"../../../components/nav/Navigation\"], resolve),\n  },\n  methods: {\n    onRefresh() {\n      this.getCoinList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    //计算法币资产至BTC\n    async interTotalPrice() {\n      const btc_price = await getCoinPrice(\"BTC\");\n      const price_of_us =\n        parseInt(this.$route.query.total_price) /\n        parseInt(this.current.way_rate);\n      this.price_btc = parseInt(price_of_us) / parseInt(btc_price);\n    },\n    //获取资产列表\n    async getCoinList() {\n      this.loadData = true;\n      const result = await UserAssets();\n      let list_local = [];\n      const { data } = result;\n      for (let i in data) {\n        list_local.push(data[i]);\n      }\n      this.assetsList = list_local;\n      this.assetsList.forEach(async (e) => {\n        this.$set(\n          e,\n          \"price\",\n          await oneInterPrice(this.current.way_rate, e.available, e.coin)\n        );\n      });\n      this.assetsSec = this.assetsList;\n      this.loadData = false;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\n</style>"]}]}