{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js!/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--1-0!/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/ad/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/ad/index.vue","mtime":1658713050072},{"path":"/Users/tql_yy/Documents/code/use_one/babel.config.js","mtime":1657511087035},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFkdmVydGlzaW5nTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvYWR2ZXJ0aXNpbmctbGlzdCI7CmltcG9ydCBTY3JlZW5pbmcgZnJvbSAiLi9jb21wb25lbnRzL3NjcmVlbmluZyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IFNldE5pY2tuYW1lLCBBZHZMaXN0LCBUeXBlcywgVXBBZHZTdGF0dXMgfSBmcm9tICIuLi8uLi9hcGkvYXBpIjsKaW1wb3J0IEluZmluaXRlTG9hZGluZyBmcm9tICJ2dWUtaW5maW5pdGUtbG9hZGluZyI7CmltcG9ydCB7IHNldFR5cGVzIH0gZnJvbSAiLi4vLi4vdXRpbHMiOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQWR2ZXJ0aXNpbmdMaXN0LAogICAgU2NyZWVuaW5nLAogICAgSW5maW5pdGVMb2FkaW5nCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJvb2w6IHsKICAgICAgICBTY3JlZW5pbmdDbGFzczogZmFsc2UsCiAgICAgICAgU2NyZWVuaW5nOiBmYWxzZSwKICAgICAgICBTY3JlZW5pbmdCb29sOiB0cnVlLAogICAgICAgIG1vcmVBbmRNb3JlOiBmYWxzZSwKICAgICAgICBjbG9zZVRoZUFkOiBmYWxzZSwKICAgICAgICBnb0NoYW50OiBmYWxzZSwKICAgICAgICBzZXROaWNrTmFtZTogZmFsc2UKICAgICAgfSwKICAgICAgbmlja25hbWU6ICIiLAogICAgICBzZWxlY3Q6IFt7CiAgICAgICAgbmFtZTogIuS/ruaUuSIKICAgICAgfSwgewogICAgICAgIG5hbWU6ICLlhbPpl63lub/lkYoiLAogICAgICAgIGNvbG9yOiAiI0ZENTY1NiIKICAgICAgfV0sCiAgICAgIGFkdkxpc3Q6IFtdLAogICAgICAvL+W5v+WRiuWIl+ihqAogICAgICBhZHZMaXN0U2VjOiBbXSwKICAgICAgcGFnZTogMCwKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIGFkdklEOiBudWxsLAogICAgICBhcnIyOiBbXSwKICAgICAgYXJyMzogW10sCiAgICAgIGFycjQ6IFtdCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICAiYm9vbC5TY3JlZW5pbmciKHYpIHsKICAgICAgaWYgKCF2KSB7CiAgICAgICAgdGhpcy5vcGVuU2NyZWVuaW5nKGZhbHNlKTsKICAgICAgfQogICAgfQoKICB9LAogIGNvbXB1dGVkOiB7IC4uLm1hcFN0YXRlKFsiY3VycmVudCJdKQogIH0sCgogIGNyZWF0ZWQoKSB7Ly8gdGhpcy5nZXRGaWx0ZXJBZHYoKTsKICAgIC8vIHRoaXMuZ2V0QWR2TGlzdCgpOwogIH0sCgogIG1vdW50ZWQoKSB7fSwKCiAgbWV0aG9kczogewogICAgLy/nrZvpgInnsbvlnosKICAgIGdldEZpbHRlcihfcGFyYW1zKSB7CiAgICAgIHRoaXMuZ2V0QWR2TGlzdChfcGFyYW1zKTsKICAgICAgdGhpcy5ib29sLlNjcmVlbmluZyA9IGZhbHNlOwogICAgfSwKCiAgICAvL+iOt+WPluW5v+WRiuWIl+ihqAogICAgYXN5bmMgZ2V0QWR2TGlzdChfcGFyYW1zKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFkdkxpc3QoewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgc2VhcmNoOiBfcGFyYW1zID8gX3BhcmFtcyA6IHt9CiAgICAgIH0pOwogICAgICBjb25zdCB0eXBlcyA9IGF3YWl0IFR5cGVzKHsKICAgICAgICBzY2VuZTogIkFkc1N0YXR1cyIKICAgICAgfSk7CgogICAgICBpZiAodGhpcy5wYWdlID4gMSkgewogICAgICAgIHJlc3VsdC5kYXRhLmxpc3QuZm9yRWFjaChlID0+IHsKICAgICAgICAgIHRoaXMuYWR2TGlzdC5wdXNoKGUpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuYWR2TGlzdCA9IHJlc3VsdC5kYXRhLmxpc3Q7CiAgICAgIH0KCiAgICAgIHRoaXMuYWR2TGlzdC5mb3JFYWNoKGUgPT4gewogICAgICAgIHRoaXMuJHNldChlLCAiY2hlY2tlZCIsIGUuc3RhdHVzID09IDEgPyB0cnVlIDogZmFsc2UpOwogICAgICAgIHRoaXMuJHNldChlLCAidHlwZV90ZXh0IiwgZS50eXBlID09IDEgPyAi5Ye65ZSuIiA6ICLotK3kubAiKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWR2TGlzdCA9IHNldFR5cGVzKHRoaXMuYWR2TGlzdCwgdHlwZXMuZGF0YS5tYXApOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKCiAgICBhc3luYyBsb2FkTW9yZUV2ZW50KCRzdGF0ZSkgewogICAgICAvLyAgIHRoaXMuc3RhdGUgPSAkc3RhdGU7CiAgICAgIC8vICAgdGhpcy5sb2FkTW9yZURvbSA9IHRydWU7CiAgICAgIHRoaXMucGFnZSArPSAxOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldEFkdkxpc3QoKTsKICAgICAgY29uc3QgewogICAgICAgIGRhdGEKICAgICAgfSA9IHJlc3VsdDsKCiAgICAgIGlmICh0aGlzLmFkdkxpc3QubGVuZ3RoID09IGRhdGEudG90YWwpIHsKICAgICAgICAkc3RhdGUuY29tcGxldGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkc3RhdGUubG9hZGVkKCk7CiAgICAgIH0KICAgIH0sCgogICAgLy/mm7TmlrDlub/lkYrnirbmgIEKICAgIGFzeW5jIHVwQWR2U3RhdHVzRXYoX3JvdywgX3N0YXR1cykgewogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgaWQ6IF9zdGF0dXMgPyBfc3RhdHVzIDogX3Jvdy5pZCwKICAgICAgICBzdGF0dXM6IF9zdGF0dXMgPyAzIDogX3Jvdy5zdGF0dXMgPT0gMSA/IDIgOiAxCiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVwQWR2U3RhdHVzKHBhcmFtcyk7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb2RlCiAgICAgIH0gPSByZXN1bHQ7CgogICAgICBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLiR0b2FzdC5zdWNjZXNzKHsKICAgICAgICBtZXNzYWdlOiAi5L+u5pS55oiQ5YqfIiwKICAgICAgICBmb3JiaWRDbGljazogdHJ1ZQogICAgICB9KTsKICAgICAgdGhpcy5nZXRBZHZMaXN0KCk7CiAgICAgIHRoaXMuYm9vbC5jbG9zZVRoZUFkID0gZmFsc2U7CiAgICB9LAoKICAgIG9wZW5TY3JlZW5pbmcoYm9vbCkgewogICAgICBpZiAodGhpcy5ib29sLlNjcmVlbmluZ0Jvb2wpIHsKICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nQm9vbCA9IGZhbHNlOwoKICAgICAgICBpZiAodGhpcy5ib29sLlNjcmVlbmluZ0NsYXNzKSB7CiAgICAgICAgICBpZiAoYm9vbCkgewogICAgICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nID0gIXRoaXMuYm9vbC5TY3JlZW5pbmc7CiAgICAgICAgICB9CgogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuYm9vbC5TY3JlZW5pbmdDbGFzcyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nQm9vbCA9IHRydWU7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nQ2xhc3MgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGlmIChib29sKSB7CiAgICAgICAgICAgICAgdGhpcy5ib29sLlNjcmVlbmluZyA9ICF0aGlzLmJvb2wuU2NyZWVuaW5nOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nQm9vbCA9IHRydWU7CiAgICAgICAgICB9LCA1MCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIG9wZXJhdGlvbihyb3cpIHsKICAgICAgdGhpcy5ib29sLm1vcmVBbmRNb3JlID0gdHJ1ZTsKICAgICAgdGhpcy5hZHZJRCA9IHJvdy5pZDsKICAgIH0sCgogICAgLy/mm7TlpJrmk43nurUKICAgIG1vcmVPcGVyYXRpb25zKGFjdGlvbiwgaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09PSAxKSB7CiAgICAgICAgdGhpcy5ib29sLmNsb3NlVGhlQWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvcmVsZWFzZSIsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBpZDogdGhpcy5hZHZJRAogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIG9uTGlzdCgpIHsKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuR2V0RGF0YSh0aGlzLCAiYXBpL2xpc3QiKTsKICAgICAgY29uc3QgewogICAgICAgIGNvZGUsCiAgICAgICAgaXRlbXMsCiAgICAgICAgdG90YWwKICAgICAgfSA9IHJlc3BvbnNlOwoKICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgdGhpcy4kcmVmc1siUC1saXN0Il0uQWRkKGl0ZW1zLCB0b3RhbCk7CiAgICAgIH0KICAgIH0sCgogICAgb25SZWZyZXNoKCkgewogICAgICAvLyB0aGlzLm9uTGlzdCgpOwogICAgICB0aGlzLnBhZ2UgPSAwOwogICAgICB0aGlzLmdldEFkdkxpc3QoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDUwMCk7CiAgICB9LAoKICAgIC8v5Y+R5biD5bm/5ZGKCiAgICBnb1JlbGVhc2UoKSB7CiAgICAgIC8vICBocmVmPSIvcmVsZWFzZSIvCiAgICAgIGlmICghdGhpcy5jdXJyZW50LmFjY291bnQuc2VjdXJpdHkpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luP1JldHVyblVybD0vIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBjb25zdCB7CiAgICAgICAgbWVyY2hhbnQKICAgICAgfSA9IHRoaXMuY3VycmVudC5hY2NvdW50LnNlY3VyaXR5OwogICAgICBjb25zdCB7CiAgICAgICAgbWVyY2hhbnRfbmFtZQogICAgICB9ID0gdGhpcy5jdXJyZW50LmFjY291bnQubWVyY2hhbnRJbmZvOwoKICAgICAgaWYgKG1lcmNoYW50ID09IDApIHsKICAgICAgICB0aGlzLmJvb2wuZ29DaGFudCA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoIW1lcmNoYW50X25hbWUpIHsKICAgICAgICB0aGlzLmJvb2wuc2V0Tmlja05hbWUgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9yZWxlYXNlIik7CiAgICB9LAoKICAgIC8v6K6+572u5pi156ewCiAgICBhc3luYyBzdWJtaXROaWNrbmFtZSgpIHsKICAgICAgaWYgKCF0aGlzLm5pY2tuYW1lKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIuivt+i+k+WFpeaYteensCIpOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgU2V0Tmlja25hbWUoewogICAgICAgIG1lcmNoYW50X25hbWU6IHRoaXMubmlja25hbWUKICAgICAgfSk7CiAgICAgIGNvbnN0IHsKICAgICAgICBjb2RlCiAgICAgIH0gPSByZXN1bHQ7CgogICAgICBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY3VycmVudC91cFVzZXJJbmZvIik7CiAgICAgIHRoaXMuJHRvYXN0KCLorr7nva7miJDlip8iKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9yZWxlYXNlIik7CiAgICB9CgogIH0KfTs="},{"version":3,"mappings":"AA6JA;AACA;AACA;AACA;AACA;AACA;AACA;EACAA;IACAC,eADA;IAEAC,SAFA;IAGAC;EAHA,CADA;;EAMAC;IACA;MACAC;QACAC,qBADA;QAEAJ,gBAFA;QAGAK,mBAHA;QAIAC,kBAJA;QAKAC,iBALA;QAMAC,cANA;QAOAC;MAPA,CADA;MAUAC,YAVA;MAWAC;QAAAC;MAAA;QAAAA;QAAAC;MAAA,EAXA;MAYAC,WAZA;MAYA;MACAC,cAbA;MAcAC,OAdA;MAeAC,cAfA;MAgBAC,WAhBA;MAiBAC,QAjBA;MAkBAC,QAlBA;MAmBAC;IAnBA;EAqBA,CA5BA;;EA6BAC;IACA;MACA;QACA;MACA;IACA;;EALA,CA7BA;EAoCAC,YACA;EADA,CApCA;;EAuCAC,WACA;IACA;EACA,CA1CA;;EA2CAC,YA3CA;;EA4CAC;IACA;IACAC;MACA;MACA;IACA,CALA;;IAMA;IACA;MACA;QACAX,eADA;QAEAY,SAFA;QAGAC;MAHA;MAKA;QAAAC;MAAA;;MACA;QACAC;UACA;QACA,CAFA;MAGA,CAJA,MAIA;QACA;MACA;;MACA;QACA;QACA;MACA,CAHA;MAIA;MACA;IACA,CA3BA;;IA4BA;MACA;MACA;MACA;MACA;MACA;QAAA7B;MAAA;;MACA;QACA8B;MACA,CAFA,MAEA;QACAA;MACA;IACA,CAvCA;;IAwCA;IACA;MACA;QACAC,+BADA;QAEAC;MAFA;MAIA;MACA;QAAAC;MAAA;;MACA;QACA;QACA;MACA;;MACA;QACAC,eADA;QAEAC;MAFA;MAIA;MACA;IACA,CA1DA;;IA2DAC;MACA;QACA;;QACA;UACA;YACA;UACA;;UACAC;YACA;YACA;UACA,CAHA,EAGA,GAHA;QAIA,CARA,MAQA;UACA;UACAA;YACA;cACA;YACA;;YACA;UACA,CALA,EAKA,EALA;QAMA;MACA;IACA,CAhFA;;IAiFAC;MACA;MACA;IACA,CApFA;;IAqFA;IACAC;MACA;QACA;MACA,CAFA,MAEA;QACA;UACAC,gBADA;UAEAC;YACAV;UADA;QAFA;MAMA;IACA,CAjGA;;IAkGA;MACA;MACA;QAAAE;QAAAS;QAAAC;MAAA;;MACA;QACA;MACA;IACA,CAxGA;;IAyGAC;MACA;MACA;MACA;MACAP;QACA;MACA,CAFA,EAEA,GAFA;IAGA,CAhHA;;IAiHA;IACAQ;MACA;MACA;QACA;QACA;MACA;;MACA;QAAAC;MAAA;MACA;QAAAC;MAAA;;MACA;QACA;QACA;MACA;;MACA;QACA;QACA;MACA;;MACA;IACA,CAnIA;;IAoIA;IACA;MACA;QACA;QACA;MACA;;MACA;QAAAA;MAAA;MACA;QAAAd;MAAA;;MACA;QACA;QACA;MACA;;MACA;MACA;MACA;IACA;;EAnJA;AA5CA","names":["components","AdvertisingList","Screening","InfiniteLoading","data","bool","ScreeningClass","ScreeningBool","moreAndMore","closeTheAd","goChant","setNickName","nickname","select","name","color","advList","advListSec","page","loading","advID","arr2","arr3","arr4","watch","computed","created","mounted","methods","getFilter","limit","search","scene","result","$state","id","status","code","message","forbidClick","openScreening","setTimeout","operation","moreOperations","path","query","items","total","onRefresh","goRelease","merchant","merchant_name"],"sourceRoot":"src/views/ad","sources":["index.vue"],"sourcesContent":["<template>\n  <P-main>\n    <Navigation\n      title=\"我的广告\"\n      :left-arrow=\"false\"\n      :class=\"[bool.ScreeningClass ? 'navigation' : '']\"\n    >\n      <template #right>\n        <B-svg name=\"shaixuan\" @click=\"openScreening(true)\" />\n      </template>\n    </Navigation>\n    <P-body type=\"Fei\">\n      <!-- <P-list\n        ref=\"P-list\"\n        :footer=\"true\"\n        theme=\"card\"\n        @refresh=\"onRefresh\"\n        @load=\"onList\"\n      >\n        <template v-slot=\"{ row }\">\n          <B-a :href=\"`/advertisingfordetails/${row.id}`\">\n            <Advertising-list\n              :name=\"row.name\"\n              :Price=\"row.Price\"\n              :badge=\"row.number\"\n              :date=\"row.datetime\"\n              :state=\"row.number\"\n              @operation=\"operation(row)\"\n            />\n          </B-a>\n        </template>\n      </P-list> -->\n      <div class=\"adv-list-parent\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <ul class=\"adv-list\">\n            <li\n              v-for=\"(row, index) in advList\"\n              :key=\"index\"\n              :class=\"row.adv_type == 2 ? 'green-color' : 'red-color'\"\n            >\n              <!-- 标题信息 -->\n              <div class=\"adv-title\">\n                <p class=\"title-msg\">\n                  <span></span>{{ row.adv_type == 2 ? \"购买\" : \"出售\" }}&nbsp;{{\n                    row.coin\n                  }}\n                </p>\n                <div>\n                  <span>{{ row.status_text }}</span>\n                  <van-switch\n                    v-if=\"row.status == 1 || row.status == 2\"\n                    active-color=\"#2CBC94\"\n                    inactive-color=\"#ccc\"\n                    v-model=\"row.checked\"\n                    @change=\"upAdvStatusEv(row)\"\n                    size=\"16\"\n                  />\n                </div>\n              </div>\n              <!-- 广告信息 -->\n              <div\n                class=\"adv-content\"\n                @click=\"\n                  $router.push('/advertisingfordetails');\n                  $store.commit('current/upAdvID', row.id);\n                \"\n              >\n                <div class=\"price-msg\">\n                  <p>\n                    <span>数量</span>{{ row.amount.toFixed(2) }}&nbsp;{{\n                      row.coin\n                    }}\n                  </p>\n                  <p>\n                    <span>限额</span>{{ row.min_currency.toFixed(2) }}-{{\n                      row.max_currency.toFixed(2)\n                    }}&nbsp;{{ row.currency }}\n                  </p>\n                </div>\n                <div class=\"price-limit\">\n                  <p>单价</p>\n                  <p class=\"with-color\">\n                    <span>{{ row.currency_symbol }}</span\n                    >{{ row.price.toFixed(2) }}\n                  </p>\n                </div>\n              </div>\n              <!-- 操作信息 -->\n              <div class=\"adv-footer\">\n                <div class=\"pay-way\">\n                  <p v-for=\"(pay, index) in row.payments\" :key=\"index\">\n                    <img :src=\"pay.logo\" alt=\"\" />\n                  </p>\n                </div>\n                <div\n                  class=\"iconfont icon-qita\"\n                  @click=\"operation(row)\"\n                  v-if=\"row.status == 1 || row.status == 2\"\n                ></div>\n              </div>\n            </li>\n          </ul>\n          <infinite-loading\n            spinner=\"spiral\"\n            @infinite=\"loadMoreEvent\"\n            :distance=\"0\"\n          >\n            <div slot=\"spinner\">\n              <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n            </div>\n          </infinite-loading>\n        </van-pull-refresh>\n      </div>\n    </P-body>\n    <Screening v-model=\"bool.Screening\" @click=\"getFilter\" />\n    <P-select\n      v-model=\"bool.moreAndMore\"\n      :list=\"select\"\n      cancelText=\"取消\"\n      @select=\"moreOperations\"\n    />\n    <Alert\n      type=\"typography\"\n      @click=\"upAdvStatusEv(null, advID)\"\n      v-model=\"bool.closeTheAd\"\n      title=\"确认关闭广告?\"\n    >\n      若您已向卖家付款，请勿取消订单，否则可能会导致资金损失。若当日取消超过3次将会禁止交易。\n    </Alert>\n    <P-suspension-add @click=\"goRelease\" />\n    <!-- 申请成为商家 -->\n    <Alert\n      title=\"提示\"\n      v-model=\"bool.goChant\"\n      @click=\"$router.push('/chant-application')\"\n    >\n      <p class=\"text-center\">您尚未成为商家，是否前往申请？</p>\n    </Alert>\n    <!-- 设置昵称 -->\n    <Alert\n      v-model=\"bool.setNickName\"\n      title=\"设置昵称\"\n      @click=\"submitNickname\"\n      btnDetermineName=\"添加\"\n    >\n      <div class=\"set-nickname\">\n        <p>\n          <span class=\"iconfont icon-attention\"></span>\n          发布广告需设置法币账户昵称，完成设置后不可修改。\n        </p>\n        <input type=\"text\" placeholder=\"请输入昵称\" v-model=\"nickname\" />\n      </div>\n    </Alert>\n  </P-main>\n</template>\n\n<script>\nimport AdvertisingList from \"@/components/advertising-list\";\nimport Screening from \"./components/screening\";\nimport { mapState } from \"vuex\";\nimport { SetNickname, AdvList, Types, UpAdvStatus } from \"../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { setTypes } from \"../../utils\";\nexport default {\n  components: {\n    AdvertisingList,\n    Screening,\n    InfiniteLoading,\n  },\n  data() {\n    return {\n      bool: {\n        ScreeningClass: false,\n        Screening: false,\n        ScreeningBool: true,\n        moreAndMore: false,\n        closeTheAd: false,\n        goChant: false,\n        setNickName: false,\n      },\n      nickname: \"\",\n      select: [{ name: \"修改\" }, { name: \"关闭广告\", color: \"#FD5656\" }],\n      advList: [], //广告列表\n      advListSec: [],\n      page: 0,\n      loading: false,\n      advID: null,\n      arr2: [],\n      arr3: [],\n      arr4: [],\n    };\n  },\n  watch: {\n    \"bool.Screening\"(v) {\n      if (!v) {\n        this.openScreening(false);\n      }\n    },\n  },\n  computed: {\n    ...mapState([\"current\"]),\n  },\n  created() {\n    // this.getFilterAdv();\n    // this.getAdvList();\n  },\n  mounted() {},\n  methods: {\n    //筛选类型\n    getFilter(_params) {\n      this.getAdvList(_params);\n      this.bool.Screening = false;\n    },\n    //获取广告列表\n    async getAdvList(_params) {\n      const result = await AdvList({\n        page: this.page,\n        limit: 10,\n        search: _params ? _params : {},\n      });\n      const types = await Types({ scene: \"AdsStatus\" });\n      if (this.page > 1) {\n        result.data.list.forEach((e) => {\n          this.advList.push(e);\n        });\n      } else {\n        this.advList = result.data.list;\n      }\n      this.advList.forEach((e) => {\n        this.$set(e, \"checked\", e.status == 1 ? true : false);\n        this.$set(e, \"type_text\", e.type == 1 ? \"出售\" : \"购买\");\n      });\n      this.advList = setTypes(this.advList,types.data.map)\n      return result;\n    },\n    async loadMoreEvent($state) {\n      //   this.state = $state;\n      //   this.loadMoreDom = true;\n      this.page += 1;\n      const result = await this.getAdvList();\n      const { data } = result;\n      if (this.advList.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    //更新广告状态\n    async upAdvStatusEv(_row, _status) {\n      const params = {\n        id: _status ? _status : _row.id,\n        status: _status ? 3 : _row.status == 1 ? 2 : 1,\n      };\n      const result = await UpAdvStatus(params);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      this.$toast.success({\n        message: \"修改成功\",\n        forbidClick: true,\n      });\n      this.getAdvList();\n      this.bool.closeTheAd = false;\n    },\n    openScreening(bool) {\n      if (this.bool.ScreeningBool) {\n        this.bool.ScreeningBool = false;\n        if (this.bool.ScreeningClass) {\n          if (bool) {\n            this.bool.Screening = !this.bool.Screening;\n          }\n          setTimeout(() => {\n            this.bool.ScreeningClass = false;\n            this.bool.ScreeningBool = true;\n          }, 500);\n        } else {\n          this.bool.ScreeningClass = true;\n          setTimeout(() => {\n            if (bool) {\n              this.bool.Screening = !this.bool.Screening;\n            }\n            this.bool.ScreeningBool = true;\n          }, 50);\n        }\n      }\n    },\n    operation(row) {\n      this.bool.moreAndMore = true;\n      this.advID = row.id;\n    },\n    //更多操纵\n    moreOperations(action, index) {\n      if (index === 1) {\n        this.bool.closeTheAd = true;\n      } else {\n        this.$router.push({\n          path: \"/release\",\n          query: {\n            id: this.advID,\n          },\n        });\n      }\n    },\n    async onList() {\n      const response = await API.GetData(this, \"api/list\");\n      const { code, items, total } = response;\n      if (code == 200) {\n        this.$refs[\"P-list\"].Add(items, total);\n      }\n    },\n    onRefresh() {\n      // this.onList();\n      this.page = 0;\n      this.getAdvList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 500);\n    },\n    //发布广告\n    goRelease() {\n      //  href=\"/release\"/\n      if (!this.current.account.security) {\n        this.$router.push(\"/login?ReturnUrl=/\");\n        return;\n      }\n      const { merchant } = this.current.account.security;\n      const { merchant_name } = this.current.account.merchantInfo;\n      if (merchant == 0) {\n        this.bool.goChant = true;\n        return;\n      }\n      if (!merchant_name) {\n        this.bool.setNickName = true;\n        return;\n      }\n      this.$router.push(\"/release\");\n    },\n    //设置昵称\n    async submitNickname() {\n      if (!this.nickname) {\n        this.$toast(\"请输入昵称\");\n        return;\n      }\n      const result = await SetNickname({ merchant_name: this.nickname });\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      await this.$store.dispatch(\"current/upUserInfo\");\n      this.$toast(\"设置成功\");\n      this.$router.push(\"/release\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\n.navigation {\n  /deep/.van-nav-bar {\n    z-index: 9999;\n  }\n}\n</style>"]}]}