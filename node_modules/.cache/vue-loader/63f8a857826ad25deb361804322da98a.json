{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToSell.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToSell.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBIZW1vTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvaGVtby1saXN0IjsKaW1wb3J0IEJ0bkJ1eWluZ0FuZFNlbGxpbmcgZnJvbSAiLi9CdG5CdXlpbmdBbmRTZWxsaW5nIjsKaW1wb3J0IHsgQWR2VHJhZGVMaXN0LCBUcmFkZVZlcmlmeSB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwppbXBvcnQgSW5maW5pdGVMb2FkaW5nIGZyb20gInZ1ZS1pbmZpbml0ZS1sb2FkaW5nIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBIZW1vTGlzdCwKICAgIEJ0bkJ1eWluZ0FuZFNlbGxpbmcsCiAgICBJbmZpbml0ZUxvYWRpbmcsCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogIiIsCiAgICB9LAogICAgZmlsdGVyQW1vdW50OiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgZmlsdGVyTWVudHM6IHsKICAgICAgdHlwZTogW1N0cmluZywgTnVtYmVyXSwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYm9vbDogewogICAgICAgIEJ1eWluZ0FuZFNlbGxpbmc6IGZhbHNlLAogICAgICAgIGRpYWxvZzogZmFsc2UsCiAgICAgIH0sCiAgICAgIGxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLCAvL+aYr+WQpuW3suWKoOi9veWujOaIkO+8jOWKoOi9veWujOaIkOWQjuS4jeWGjeinpuWPkWxvYWTkuovku7YKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHBhZ2U6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgcGxhY2VNc2c6IHt9LAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyB2YWx1ZSh2YWwpewogICAgLy8gICBjb25zb2xlLmxvZyh2YWwpCiAgICAvLyB9CiAgICBmaWx0ZXJBbW91bnQodmFsKSB7CiAgICAgIHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAogICAgZmlsdGVyTWVudHModmFsKSB7CiAgICAgIHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAogICAgY3VycmVuY3koX3ZhbCkgewogICAgICB0aGlzLm9uTGlzdCgpOwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbImN1cnJlbnQiXSksCiAgICBjdXJyZW5jeSgpIHsKICAgICAgcmV0dXJuIHRoaXMuY3VycmVudC5hbW91bnRfd2F5OwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIG9uTGlzdCgpIHsKICAgICAgY29uc29sZS5sb2coMSk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMudmFsdWUpOwogICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgdHlwZTogMiwKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIHNlYXJjaDogewogICAgICAgICAgY3VycmVuY3k6IHRoaXMuY3VycmVudC5hbW91bnRfd2F5LAogICAgICAgICAgY29pbjogdGhpcy52YWx1ZSwKICAgICAgICAgIHBheW1lbnRzOiB0aGlzLmZpbHRlck1lbnRzLAogICAgICAgICAgYW1vdW50OiB0aGlzLmZpbHRlckFtb3VudCwKICAgICAgICB9LAogICAgICB9OwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBBZHZUcmFkZUxpc3QocGFyYW1zKTsKICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXN1bHQ7CiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgIHRoaXMubGlzdCA9IGRhdGEubGlzdDsKICAgICAgY29uc29sZS5sb2codGhpcy5saXN0KTsKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICAvLyDliqDovb3mm7TlpJoKICAgIGFzeW5jIGxvYWRNb3JlRXZlbnQoJHN0YXRlKSB7CiAgICAgIHRoaXMucGFnZSArPSAxOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLm9uTGlzdCgpOwogICAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3VsdDsKICAgICAgaWYgKHRoaXMubGlzdC5sZW5ndGggPT0gZGF0YS50b3RhbCkgewogICAgICAgICRzdGF0ZS5jb21wbGV0ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgICRzdGF0ZS5sb2FkZWQoKTsKICAgICAgfQogICAgfSwKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5wYWdlID0gMDsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIGFzeW5jIGJ0bkNsaWNrKHJvdykgewogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBUcmFkZVZlcmlmeSh7IHR5cGU6IDEsIGFkdklkOiByb3cuaWQgfSk7CiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgIGNvbnN0IHsgY29kZSwgZGF0YSB9ID0gcmVzdWx0OwogICAgICBpZiAoY29kZSA9PSAxMDAwMTYpIHsKICAgICAgICB0aGlzLmJvb2wuZGlhbG9nID0gdHJ1ZTsKICAgICAgICByZXR1cm47CiAgICAgIH0gZWxzZSBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChkYXRhLnJ1bGVzLmt5Yy5yZXF1aXJlZCkgewogICAgICAgIGlmICghZGF0YS5ydWxlcy5reWMudmFsKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdCgi5oKo5bCa5pyq5a6M5oiQ5a6e5ZCN6K6k6K+BIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChkYXRhLnJ1bGVzLnBheV9wYXNzd29yZC5yZXF1aXJlZCkgewogICAgICAgIGlmICghZGF0YS5ydWxlcy5wYXlfcGFzc3dvcmQudmFsKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdCgi5oKo5bCa5pyq6K6+572u5Lqk5piT5a+G56CBIik7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMucGxhY2VNc2cgPSByb3c7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMucGxhY2VNc2cpOwogICAgICB0aGlzLmJvb2wuQnV5aW5nQW5kU2VsbGluZyA9IHRydWU7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["IWantToSell.vue"],"names":[],"mappings":";AA0DA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IWantToSell.vue","sourceRoot":"src/views/home/components","sourcesContent":["<!--\n * @Name: 我要卖\n * @Date: 2022-06-17 16:47:03\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 20:17:14\n-->\n<template>\n  <div>\n    <!-- <P-list ref=\"P-list\" :footer=\"true\" @refresh=\"onRefresh\" @load=\"onList\">\n            <template v-slot=\"{row, index}\">\n                <template v-if=\"index == 0\">\n                    <Hemo-list btn-name=\"出售\" color=\"#FD5656\" :name=\"row.title\" :Price=\"row.Price\"\n                        @btnClick=\"bool.dialog = true\">\n                    </Hemo-list>\n                </template>\n                <template v-else>\n                    <Hemo-list btn-name=\"出售\" color=\"#FD5656\" :name=\"row.title\" :Price=\"row.Price\"\n                        @btnClick=\"btnClick(row)\">\n                    </Hemo-list>\n                </template>\n            </template>\n        </P-list> -->\n    <div class=\"c2c-list\">\n      <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n        <ul>\n          <li v-for=\"(row, index) in list\" :key=\"index\">\n            <Hemo-list\n              btn-name=\"出售\"\n              color=\"#FD5656\"\n              :row=\"row\"\n              @btnClick=\"btnClick(row)\"\n            ></Hemo-list>\n          </li>\n        </ul>\n        <infinite-loading\n          spinner=\"spiral\"\n          @infinite=\"loadMoreEvent\"\n          :distance=\"0\"\n        >\n          <div slot=\"spinner\" class=\"p-top-40\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n        </infinite-loading>\n      </van-pull-refresh>\n    </div>\n    <BtnBuyingAndSelling\n      v-model=\"bool.BuyingAndSelling\"\n      title=\"出售\"\n      :row=\"placeMsg\"\n      :currency=\"value\"\n    />\n    <Alert v-model=\"bool.dialog\" btn-determine-name=\"添加\">\n      买家仅支持xxx向您付款，您需要添加并开启相应的收款方式。\n    </Alert>\n  </div>\n</template>\n\n<script>\nimport HemoList from \"@/components/hemo-list\";\nimport BtnBuyingAndSelling from \"./BtnBuyingAndSelling\";\nimport { AdvTradeList, TradeVerify } from \"../../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  components: {\n    HemoList,\n    BtnBuyingAndSelling,\n    InfiniteLoading,\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      default: \"\",\n    },\n    filterAmount: {\n      type: [String, Number],\n      default: null,\n    },\n    filterMents: {\n      type: [String, Number],\n      default: null,\n    },\n  },\n  data() {\n    return {\n      bool: {\n        BuyingAndSelling: false,\n        dialog: false,\n      },\n      list: [],\n      loading: false,\n      finished: false, //是否已加载完成，加载完成后不再触发load事件\n      refreshing: false,\n      page: 0,\n      loading: false,\n      list: [],\n      placeMsg: {},\n    };\n  },\n  watch: {\n    // value(val){\n    //   console.log(val)\n    // }\n    filterAmount(val) {\n      this.onList();\n      console.log(val);\n    },\n    filterMents(val) {\n      this.onList();\n      console.log(val);\n    },\n    currency(_val) {\n      this.onList();\n    },\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    currency() {\n      return this.current.amount_way;\n    },\n  },\n  methods: {\n    async onList() {\n      console.log(1);\n      console.log(this.value);\n      const params = {\n        type: 2,\n        page: this.page,\n        limit: 10,\n        search: {\n          currency: this.current.amount_way,\n          coin: this.value,\n          payments: this.filterMents,\n          amount: this.filterAmount,\n        },\n      };\n      const result = await AdvTradeList(params);\n      const { data } = result;\n      console.log(result);\n      this.list = data.list;\n      console.log(this.list);\n      return result;\n    },\n    // 加载更多\n    async loadMoreEvent($state) {\n      this.page += 1;\n      const result = await this.onList();\n      const { data } = result;\n      if (this.list.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    onRefresh() {\n      this.page = 0;\n      this.onList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    async btnClick(row) {\n      const result = await TradeVerify({ type: 1, advId: row.id });\n      console.log(result);\n      const { code, data } = result;\n      if (code == 100016) {\n        this.bool.dialog = true;\n        return;\n      } else if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      if (data.rules.kyc.required) {\n        if (!data.rules.kyc.val) {\n          this.$toast(\"您尚未完成实名认证\");\n          return;\n        }\n      }\n      if (data.rules.pay_password.required) {\n        if (!data.rules.pay_password.val) {\n          this.$toast(\"您尚未设置交易密码\");\n          return;\n        }\n      }\n      this.placeMsg = row;\n      console.log(this.placeMsg);\n      this.bool.BuyingAndSelling = true;\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.c2c-list {\n  /deep/.van-pull-refresh {\n    height: 70vh;\n    overflow: auto;\n  }\n}\n</style>"]}]}