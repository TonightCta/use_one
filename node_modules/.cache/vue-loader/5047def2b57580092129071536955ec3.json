{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/BtnBuyingAndSelling.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/BtnBuyingAndSelling.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IFBsYWNlT3JkZXIgfSBmcm9tICIuLi8uLi8uLi9hcGkvYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICB0aXRsZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICLotK3kubAiLAogICAgfSwKICAgIC8v5biB56eNCiAgICBjdXJyZW5jeTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICIiLAogICAgfSwKICAgIC8v5LiL5Y2V5L+h5oGvCiAgICByb3c6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiB7fSwKICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdmFsOiAwLAogICAgICAvLyAgIHRoZUFtb3VudE9mVW5pdHM6ICJJTlIiLCAvL+mHkemineWNleS9jQogICAgICBhY2NvcmRpbmdUbzogZmFsc2UsCiAgICAgIHRhYnM6IHsKICAgICAgICBhY3RpdmU6IDAsCiAgICAgICAgbGlzdDogWwogICAgICAgICAgeyBuYW1lOiAi5oyJ6YeR6aKdIiwgc2Nyb2xsOiAiIiB9LAogICAgICAgICAgeyBuYW1lOiAi5oyJ5pWw6YePIiwgc2Nyb2xsOiAiIiB9LAogICAgICAgIF0sCiAgICAgIH0sCiAgICAgIGxpbWl0OiAiNjIyLTEyNTMiLCAvL+mZkOminQogICAgICB0aGVUb3RhbE51bWJlcjogMjMuMjI1MSwgLy/mgLvmlbDph48KICAgICAgdGhlVW5pdFByaWNlOiAyLjM1LCAvL+WNleS7twogICAgICBjYWxUb3RhbDogMCwgLy/orqHnrpfmlbDph48KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAodikgewogICAgICAgIHRoaXMuYWNjb3JkaW5nVG8gPSB2OwogICAgICB9LAogICAgfSwKICAgIGFjY29yZGluZ1RvKHYpIHsKICAgICAgdGhpcy4kZW1pdCgiaW5wdXQiLCB2KTsKICAgIH0sCiAgICAidGFicy5hY3RpdmUiKHZhbCkgewogICAgICB0aGlzLnZhbCA9ICIiOwogICAgICB0aGlzLmNhbFRvdGFsID0gMDsKICAgIH0sCiAgICB2YWwodmFsKSB7CiAgICAgIGNvbnN0IGNvbXB1dGVkTWluZSA9ICgpID0+IHsKICAgICAgICBpZiAodGhpcy50YWJzLmFjdGl2ZSA9PSAwKSB7CiAgICAgICAgICB0aGlzLmNhbFRvdGFsID0gTnVtYmVyKHZhbCkgLyBOdW1iZXIodGhpcy5yb3c/LnByaWNlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5jYWxUb3RhbCA9IE51bWJlcih2YWwpICogTnVtYmVyKHRoaXMucm93Py5wcmljZSk7CiAgICAgICAgfQogICAgICB9OwogICAgICB2YWwgJiYgY29tcHV0ZWRNaW5lKCk7CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHRoZUFtb3VudE9mVW5pdHMoKSB7CiAgICAgIHJldHVybiB0aGlzLnJvdy5jdXJyZW5jeTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc29sZS5sb2codGhpcy5yb3cpOwogIH0sCiAgbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8v5LiL5Y2VCiAgICBhc3luYyBwbGFjZU9yZGVyKCkgewogICAgICAvL+mAmui/h+mHkeminei0reS5sAogICAgICBjb25zdCB0cmFkZUZvclByaWNlID0gYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IHByaWNlID0gTnVtYmVyKHRoaXMudmFsKTsKICAgICAgICBpZiAocHJpY2UgPCB0aGlzLnJvdy5taW5fY3VycmVuY3kgfHwgcHJpY2UgPiB0aGlzLnJvdy5tYXhfY3VycmVuY3kpIHsKICAgICAgICAgIHRoaXMuJHRvYXN0KAogICAgICAgICAgICBg6K+36L6T5YWlJHt0aGlzLnJvdy5taW5fY3VycmVuY3kudG9GaXhlZCgKICAgICAgICAgICAgICAyCiAgICAgICAgICAgICl9LSR7dGhpcy5yb3cubWF4X2N1cnJlbmN5LnRvRml4ZWQoMil95Yy66Ze055qE6YeR6aKdYAogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgYWR2X2lkOiB0aGlzLnJvdy5pZCwKICAgICAgICAgIG9yZGVyX3R5cGU6IDEsCiAgICAgICAgICBvcmRlcl9hbW91bnQ6IHByaWNlLAogICAgICAgIH07CiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUGxhY2VPcmRlcihwYXJhbXMpOwogICAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzdWx0OwogICAgICAgIGlmKGNvZGUgIT0gMjAwKXsKICAgICAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfTsKICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICAgIGNvbnNvbGUubG9nKCLpgJrov4fph5Hpop3otK3kubAiKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgIHBhdGg6Jy9wbGVhc2VwYXltZW50JywKICAgICAgICAgICAgcXVlcnk6ewogICAgICAgICAgICAgICAgaWQ6cmVzdWx0LmRhdGEub3JkZXJfaWQKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9OwogICAgICAvL+mAmui/h+aVsOmHj+i0reS5sAogICAgICBjb25zdCB0cmFkZUZvckFtb3VudCA9IGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBhbW91bnQgPSBOdW1iZXIodGhpcy52YWwpOwogICAgICAgIGlmIChhbW91bnQgPCB0aGlzLnJvdy5taW5fYW1vdW50IHx8IGFtb3VudCA+IHRoaXMucm93LmFtb3VudCkgewogICAgICAgICAgdGhpcy4kdG9hc3QoCiAgICAgICAgICAgIGDor7fovpPlhaUke3RoaXMucm93Lm1pbl9hbW91bnQudG9GaXhlZCg0KX0tJHt0aGlzLnJvdy5hbW91bnQudG9GaXhlZCgKICAgICAgICAgICAgICA0CiAgICAgICAgICAgICl95Yy66Ze055qE5pWw6YePYAogICAgICAgICAgKTsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgICAgYWR2X2lkOiB0aGlzLnJvdy5pZCwKICAgICAgICAgIG9yZGVyX3R5cGU6IDIsCiAgICAgICAgICBvcmRlcl9hbW91bnQ6IGFtb3VudCwKICAgICAgICB9OwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFBsYWNlT3JkZXIocGFyYW1zKTsKICAgICAgICBjb25zdCB7IGNvZGUgfSA9IHJlc3VsdDsKICAgICAgICBpZihjb2RlICE9IDIwMCl7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0KHJlc3VsdC5tZXNzYWdlKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH07CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICBjb25zb2xlLmxvZygi6YCa6L+H5pWw6YeP6LSt5LmwIik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goJy9wbGVhc2VwYXltZW50Jyk7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjdXJyZW50L3VwT3JkZXJJRCcscmVzdWx0LmRhdGEub3JkZXJfaWQpOwogICAgICB9OwogICAgICB0aGlzLnRhYnMuYWN0aXZlID09IDAgPyB0cmFkZUZvclByaWNlKCkgOiB0cmFkZUZvckFtb3VudCgpOwogICAgfSwKICB9LAogIGRlc3Ryb3llZCgpIHt9LAp9Owo="},{"version":3,"sources":["BtnBuyingAndSelling.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BtnBuyingAndSelling.vue","sourceRoot":"src/views/home/components","sourcesContent":["<!--\n * @Name: 首页买卖按钮弹出模块\n * @Date: 2022-06-25 09:32:20\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:19:18\n-->\n<template>\n  <P-popup\n    class=\"buyingAndSelling\"\n    v-model=\"accordingTo\"\n    :head=\"false\"\n    :closeable=\"false\"\n  >\n    <div class=\"head\">\n      <div class=\"top ui-flex-center\">\n        <div class=\"ui-flex-row\">\n          <B-svg name=\"USDT\" class-name=\"USDT\" />\n          <div class=\"title\">{{ title }}{{ currency }}</div>\n        </div>\n        <div>\n          <div class=\"theUnitPrice ui-flex-row\">\n            <B-svg name=\"dengPao\" class-name=\"dengPao\"></B-svg>\n            <div>\n              单价：{{ row.currency_symbol }}{{ row.price?.toFixed(2) }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <P-tabs v-model=\"tabs.active\" :list=\"tabs.list\" :lineWidth=\"32\">\n        <template #title=\"scope\"> {{ scope.row.name }}{{ title }} </template>\n        <template #title_1=\"row\">\n          <span v-if=\"false\">{{ row }}</span>\n        </template>\n      </P-tabs>\n    </div>\n    <div class=\"body ui-flex-row-center\">\n      <div class=\"ui-hx w-100-b\">\n        <div class=\"ui-flex-row p-10-tb\">\n          <div class=\"count\">\n            <B-input\n              type=\"int\"\n              v-model=\"val\"\n              placeholder=\"0\"\n              :append=\"tabs.active == 0 ? theAmountOfUnits : currency\"\n              :sinceTheGrowth=\"true\"\n              :sinceTheGrowthWidth=\"23\"\n            ></B-input>\n          </div>\n          <!-- <div class=\"all\">全部</div> -->\n        </div>\n      </div>\n      <div class=\"limit\">\n        限额\n        {{\n          tabs.active == 0\n            ? row.min_currency?.toFixed(2)\n            : row.min_amount?.toFixed(4)\n        }}-{{\n          tabs.active == 0\n            ? row.max_currency?.toFixed(2)\n            : row.amount?.toFixed(4)\n        }}\n        {{ tabs.active == 0 ? theAmountOfUnits : currency }}\n      </div>\n    </div>\n    <div class=\"theTotalNumber ui-flex-center\">\n      <div class=\"title\">{{ tabs.active == 0 ? \"总数量\" : \"总金额\" }}</div>\n      <dl class=\"ui-flex-dl\">\n        <dt>{{ calTotal.toFixed(4) }}</dt>\n        <dd>{{ tabs.active == 0 ? currency : theAmountOfUnits }}</dd>\n      </dl>\n    </div>\n    <div class=\"footer ui-grid-2\">\n      <P-button type=\"default\" class=\"btn-default\" @click=\"accordingTo = false\"\n        >取消</P-button\n      >\n      <P-button\n        :type=\"title == '购买' ? 'primary' : 'danger'\"\n        :class=\"title == '购买' ? 'btn-primary' : 'btn-danger'\"\n        @click=\"placeOrder\"\n        >{{ title }}</P-button\n      >\n    </div>\n  </P-popup>\n</template>\n\n<script>\nimport { PlaceOrder } from \"../../../api/api\";\nexport default {\n  props: {\n    value: {\n      type: Boolean,\n      default: false,\n    },\n    title: {\n      type: String,\n      default: \"购买\",\n    },\n    //币种\n    currency: {\n      type: String,\n      default: \"\",\n    },\n    //下单信息\n    row: {\n      type: Object,\n      default: {},\n    },\n  },\n  data() {\n    return {\n      val: 0,\n      //   theAmountOfUnits: \"INR\", //金额单位\n      accordingTo: false,\n      tabs: {\n        active: 0,\n        list: [\n          { name: \"按金额\", scroll: \"\" },\n          { name: \"按数量\", scroll: \"\" },\n        ],\n      },\n      limit: \"622-1253\", //限额\n      theTotalNumber: 23.2251, //总数量\n      theUnitPrice: 2.35, //单价\n      calTotal: 0, //计算数量\n    };\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler: function (v) {\n        this.accordingTo = v;\n      },\n    },\n    accordingTo(v) {\n      this.$emit(\"input\", v);\n    },\n    \"tabs.active\"(val) {\n      this.val = \"\";\n      this.calTotal = 0;\n    },\n    val(val) {\n      const computedMine = () => {\n        if (this.tabs.active == 0) {\n          this.calTotal = Number(val) / Number(this.row?.price);\n        } else {\n          this.calTotal = Number(val) * Number(this.row?.price);\n        }\n      };\n      val && computedMine();\n    },\n  },\n  computed: {\n    theAmountOfUnits() {\n      return this.row.currency;\n    },\n  },\n  created() {\n    console.log(this.row);\n  },\n  mounted() {},\n  methods: {\n    //下单\n    async placeOrder() {\n      //通过金额购买\n      const tradeForPrice = async () => {\n        const price = Number(this.val);\n        if (price < this.row.min_currency || price > this.row.max_currency) {\n          this.$toast(\n            `请输入${this.row.min_currency.toFixed(\n              2\n            )}-${this.row.max_currency.toFixed(2)}区间的金额`\n          );\n          return;\n        }\n        const params = {\n          adv_id: this.row.id,\n          order_type: 1,\n          order_amount: price,\n        };\n        const result = await PlaceOrder(params);\n        const { code } = result;\n        if(code != 200){\n            this.$toast(result.message);\n            return;\n        };\n        console.log(result);\n        console.log(\"通过金额购买\");\n        this.$router.push({\n            path:'/pleasepayment',\n            query:{\n                id:result.data.order_id\n            }\n        });\n      };\n      //通过数量购买\n      const tradeForAmount = async () => {\n        const amount = Number(this.val);\n        if (amount < this.row.min_amount || amount > this.row.amount) {\n          this.$toast(\n            `请输入${this.row.min_amount.toFixed(4)}-${this.row.amount.toFixed(\n              4\n            )}区间的数量`\n          );\n          return;\n        }\n        const params = {\n          adv_id: this.row.id,\n          order_type: 2,\n          order_amount: amount,\n        };\n        const result = await PlaceOrder(params);\n        const { code } = result;\n        if(code != 200){\n            this.$toast(result.message);\n            return;\n        };\n        console.log(result);\n        console.log(\"通过数量购买\");\n        this.$router.push('/pleasepayment');\n        this.$store.commit('current/upOrderID',result.data.order_id);\n      };\n      this.tabs.active == 0 ? tradeForPrice() : tradeForAmount();\n    },\n  },\n  destroyed() {},\n};\n</script>\n\n<style lang=\"less\" scoped>\n.buyingAndSelling {\n  transition: all 0.34s ease-out;\n  /deep/.container {\n    padding: 0px;\n  }\n  /deep/.el-input-group__append {\n    transform: translateY(-4px);\n  }\n  .head {\n    height: 77px;\n    padding: 12px 12px 0px 12px;\n    background: #f5f8ff;\n    .top {\n      .title {\n        font-size: 18px;\n        color: #333333;\n        font-weight: bold;\n      }\n      .USDT {\n        width: 19px;\n        height: 19px;\n        margin-right: 5px;\n      }\n      .theUnitPrice {\n        padding: 0px 10px;\n        height: 24px;\n        background: #ffffff;\n        border-radius: 12px;\n        font-size: 12px;\n        font-weight: 400;\n        color: #999999;\n        .dengPao {\n          width: 15px;\n          height: 15px;\n          margin-right: 5px;\n        }\n      }\n    }\n    /deep/.van-tabs {\n      margin-top: 5px;\n      .van-tabs__wrap {\n        height: 35px;\n        .van-tabs__nav--line {\n          padding-bottom: 0px;\n          background-color: transparent;\n          .van-tab {\n            margin-right: 15px;\n            font-size: 14px;\n            color: #666666;\n            &.van-tab--active {\n              font-size: 14px;\n              font-weight: bold;\n              color: #333333;\n            }\n          }\n        }\n        .van-tabs__line {\n          bottom: 0px;\n        }\n      }\n    }\n  }\n  .body {\n    height: 150px;\n    padding: 0px 12px;\n    .ui-hx {\n      position: relative;\n      &::after {\n        background: #eeeeee;\n      }\n      .count {\n        margin-right: 52px;\n      }\n      .all {\n        position: absolute;\n        right: 0px;\n        font-size: 14px;\n        color: #6580ff;\n        bottom: 14px;\n      }\n      /deep/.el-input {\n        input {\n          font-size: 30px;\n          font-weight: bold;\n          color: #333333;\n          &::placeholder {\n            color: #333333;\n          }\n        }\n        .el-input-group__append {\n          font-size: 22px;\n          font-weight: bold;\n          color: #999999;\n          margin-left: 8px;\n          align-self: flex-end;\n        }\n      }\n    }\n    .limit {\n      padding: 10px 0px;\n      font-size: 12px;\n      color: #adadad;\n    }\n  }\n\n  .theTotalNumber {\n    padding: 0px 12px;\n    width: 375px;\n    height: 38px;\n    background: #f2f2f2;\n    .title {\n      font-size: 12px;\n      color: #333330;\n    }\n    dl {\n      dt {\n        font-weight: bold;\n        color: #121314;\n      }\n      dd {\n        color: #9e9f9f;\n      }\n    }\n    .ui-flex-dl dd {\n      margin-bottom: 5px;\n    }\n  }\n\n  .footer {\n    padding: 12px;\n    .van-button {\n      height: 44px;\n    }\n  }\n}\n</style>"]}]}