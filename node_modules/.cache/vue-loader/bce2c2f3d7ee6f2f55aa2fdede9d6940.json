{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/login/components/phoneOrEmail.vue?vue&type=style&index=0&id=3e4bd534&lang=less&scoped=true&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/login/components/phoneOrEmail.vue","mtime":1658115717482},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1657523213663},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZWdpc3RlcmVkIHsKICAudGhlTmF0aW9uYWxGbGFnIHsKICAgIGhlaWdodDogMTVweDsKICAgIHdpZHRoOiAxNXB4OwogIH0KICAudXNlci1sZWZ0IHsKICAgIC5qaWFuVG91WGlhIHsKICAgICAgd2lkdGg6IDEzcHg7CiAgICAgIGhlaWdodDogMTNweDsKICAgICAgZmlsbDogIzJjYmM5NDsKICAgIH0KICAgIC5uYW1lIHsKICAgICAgY29sb3I6ICMyY2JjOTQ7CiAgICAgIG1hcmdpbjogMHB4IDNweDsKICAgIH0KICB9CiAgL2RlZXAvLnZhbi10YWJzIHsKICAgIC52YW4tdGFiIHsKICAgICAgbWFyZ2luLXJpZ2h0OiAyMHB4OwogICAgICAudmFuLXRhYl9fdGV4dC0tZWxsaXBzaXMgewogICAgICAgIGZvbnQtc2l6ZTogMTZweDsKICAgICAgICBjb2xvcjogIzY2NjY2NjsKICAgICAgfQogICAgICAmLnZhbi10YWItLWFjdGl2ZSB7CiAgICAgICAgLnZhbi10YWJfX3RleHQtLWVsbGlwc2lzIHsKICAgICAgICAgIGNvbG9yOiAjMzMzMzMzOwogICAgICAgICAgZm9udC1zaXplOiAxOHB4OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAvZGVlcC8uZWwtZm9ybS1pdGVtewogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgLmltZy1jb2RlewogICAgICAgIHdpZHRoOiA5MnB4OwogICAgICAgIGhlaWdodDogNDBweDsKICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgcmlnaHQ6IDRweDsKICAgICAgICB0b3A6IDU4cHg7CiAgICAgICAgaW1newogICAgICAgICAgICB3aWR0aDogMTAwJTsKICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgIH0KICAgIH0KICAgIC5yZS1zZW5kLWNvZGV7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIHRleHQtYWxpZ246IHJpZ2h0OwogICAgICAgIGNvbG9yOiAjNjU4MEZGOwogICAgfQogIH0KfQo="},{"version":3,"sources":["phoneOrEmail.vue"],"names":[],"mappings":";AAuOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"phoneOrEmail.vue","sourceRoot":"src/views/login/components","sourcesContent":["<!--\n * @Name: 忘记密码\n * @Date: 2022-06-29 11:08:30\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:57:12\n-->\n\n<template>\n  <div>\n    <P-main class=\"login registered\" v-show=\"!bool.SelectArea\">\n      <Navigation />\n      <h3>{{ $t(title) }}</h3>\n\n      <P-tabs v-model=\"active\" :list=\"list\" :lineWidth=\"36\" />\n\n      <el-form :model=\"ruleForm\" :rules=\"rules\" ref=\"ruleForm\" class=\"p-30-t\">\n        <el-form-item ref=\"phone\" prop=\"phone\" v-if=\"active == 0\">\n          <P-input\n            v-model=\"ruleForm.phone\"\n            :iconBorder=\"true\"\n            :placeholder=\"$t('请输入手机号码')\"\n          >\n            <div slot=\"icon\">\n              <div\n                class=\"user-left ui-flex-row\"\n                @click=\"bool.SelectArea = true\"\n              >\n                <div v-if=\"ruleForm.phone_prefix\">\n                  <img :src=\"NationalNumber.logo\" class=\"theNationalFlag\" />\n                </div>\n                <div v-if=\"ruleForm.phone_prefix\" class=\"name\">\n                  {{ ruleForm.phone_prefix }}\n                </div>\n                <div v-if=\"!ruleForm.phone_prefix\" class=\"ui-col-fei m-5-r\">\n                  {{ $t(\"请选择\") }}\n                </div>\n                <B-svg name=\"jianTouXia\" class-name=\"jianTouXia\" />\n              </div>\n            </div>\n          </P-input>\n        </el-form-item>\n\n        <el-form-item prop=\"email\" v-if=\"active == 1\">\n          <P-input\n            v-model=\"ruleForm.email\"\n            icon=\"icon-youxiang\"\n            :placeholder=\"$t('请输入邮箱')\"\n          />\n        </el-form-item>\n\n        <el-form-item prop=\"code\">\n          <P-input\n            title=\"图片验证码\"\n            v-model=\"ruleForm.code\"\n            placeholder=\"请输入图形验证码\"\n          >\n          </P-input>\n          <div class=\"img-code\">\n            <img :src=\"imgCode\" alt=\"\">\n          </div>\n          <p class=\"re-send-code\" @click=\"getImgCode\">看不清？换一张</p>\n        </el-form-item>\n      </el-form>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i m-60-t-i\"\n        @click=\"submitForm('ruleForm')\"\n        >{{ $t(\"下一步\") }}\n      </P-button>\n    </P-main>\n    <SelectArea v-model=\"bool.SelectArea\" @click=\"onSelectArea\" @close-area=\"closeArea\"/>\n  </div>\n</template>\n\n<script>\nimport { stringify } from \"querystring\";\nimport SelectArea from \"./selectArea\";\nimport { ImgCode } from \"../../../api/api\";\n\nexport default {\n  components: { SelectArea },\n  props: {\n    title: {\n      type: String,\n      default: \"\",\n    },\n    tabsActive: {\n      type: Number,\n      default: 0,\n    },\n    list: {\n      type: [Object, Array],\n      default: () => [],\n    },\n    phone_prefix: {\n      type: String,\n      default: \"\",\n    },\n    phone: {\n      type: String,\n      default: \"\",\n    },\n    email: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    const validationPhone = (rule, value, callback) => {\n      if (this.ruleForm.phone_prefix == \"\") {\n        callback(new Error(this.$t(\"请选择国家区号\")));\n      } else {\n        callback();\n      }\n    };\n\n    return {\n      bool: {\n        SelectArea: false,\n      },\n      active: 0,\n      NationalNumber: {\n        logo: \"\",\n      },\n      imgCode:require('../../../assets/images/test.png'),//图片验证码\n      codeKey:null,//验证码key\n      ruleForm: {\n        phone_prefix: \"\",\n        phone: \"\",\n        email: \"\",\n        code: \"\",\n      },\n      rules: {\n        phone: [\n          {\n            required: true,\n            message: this.$t(\"请输入手机号码\"),\n            trigger: \"blur\",\n          },\n          { validator: validationPhone, trigger: \"blur\" },\n        ],\n        email: [\n          { required: true, message: this.$t(\"请输入邮箱\"), trigger: \"blur\" },\n          { validator: new RegExp().email, trigger: \"blur\" },\n        ],\n        code: [\n          {\n            required: true,\n            message: this.$t(\"请输入图形验证码\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  watch: {\n    active(v) {\n      this.$emit(\"update:tabsActive\", v);\n    },\n    tabsActive: {\n      immediate: true,\n      handler: function (v) {\n        this.active = v;\n      },\n    },\n    phone_prefix: {\n      immediate: true,\n      handler: function (v) {\n        this.ruleForm.phone_prefix = v;\n      },\n    },\n    phone: {\n      immediate: true,\n      handler: function (v) {\n        this.ruleForm.phone = v;\n      },\n    },\n    email: {\n      immediate: true,\n      handler: function (v) {\n        this.ruleForm.email = v;\n      },\n    },\n  },\n  created(){\n    this.getImgCode();\n  },    \n  methods: {\n    closeArea(){\n        console.log(1212313)\n        this.bool.SelectArea = false;\n    },  \n    onSelectArea(row) {\n      this.NationalNumber = row;\n      this.ruleForm.phone_prefix = row.prefix;\n      this.$refs.phone.clearValidate();\n    },\n    submitForm(formName) {\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          this.checkAvailable();\n        }\n      });\n    },\n    //获取图形验证码\n    async getImgCode(){\n        const result = await ImgCode();\n        this.imgCode = result.data.img;\n        this.codeKey = result.data.key;\n    },  \n    async checkAvailable() {\n      // console.log(typeof parseInt(this.list[this.active].id))\n      // console.log(typeof this.ruleForm.email)\n      // console.log(typeof this.ruleForm.phone)\n      // console.log(typeof this.ruleForm.phone_prefix)\n      // return\n      let response = await this.$store.dispatch(\"registered/checkAvailable\", {\n        type: parseInt(this.list[this.active].id),\n        email: this.ruleForm.email ? this.ruleForm.email : \"\",\n        phone: this.ruleForm.phone,\n        phone_prefix: String(this.ruleForm.phone_prefix),\n        captcha_key:this.codeKey,\n        captcha_val:this.ruleForm.code\n      });\n      this.$emit(\"click\", response, this.ruleForm);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.registered {\n  .theNationalFlag {\n    height: 15px;\n    width: 15px;\n  }\n  .user-left {\n    .jianTouXia {\n      width: 13px;\n      height: 13px;\n      fill: #2cbc94;\n    }\n    .name {\n      color: #2cbc94;\n      margin: 0px 3px;\n    }\n  }\n  /deep/.van-tabs {\n    .van-tab {\n      margin-right: 20px;\n      .van-tab__text--ellipsis {\n        font-size: 16px;\n        color: #666666;\n      }\n      &.van-tab--active {\n        .van-tab__text--ellipsis {\n          color: #333333;\n          font-size: 18px;\n        }\n      }\n    }\n  }\n  /deep/.el-form-item{\n    position: relative;\n    .img-code{\n        width: 92px;\n        height: 40px;\n        position: absolute;\n        right: 4px;\n        top: 58px;\n        img{\n            width: 100%;\n            height: 100%;\n        }\n    }\n    .re-send-code{\n        font-size: 12px;\n        text-align: right;\n        color: #6580FF;\n    }\n  }\n}\n</style>\n"]}]}