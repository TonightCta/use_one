{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/assets_details.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/assets_details.vue","mtime":1658713050075},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmltcG9ydCB7IENvaW5Bc3NldHMsIFR5cGVzIH0gZnJvbSAiLi4vLi4vLi4vYXBpL2FwaSI7CmltcG9ydCBJbmZpbml0ZUxvYWRpbmcgZnJvbSAidnVlLWluZmluaXRlLWxvYWRpbmciOwppbXBvcnQgeyBzZXRUeXBlcyB9IGZyb20gIi4uLy4uLy4uL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0cmFkZUxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgbG9hZE1vcmVEb206IGZhbHNlLAogICAgICByb3c6IHt9LAogICAgICBwYWdlOiAwLAogICAgICBzdGF0ZTogbnVsbCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWyJjdXJyZW50Il0pLAogICAgdXNlTXNnKCkgewogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICLlj6/nlKgiLAogICAgICAgICAgYW1vdW50OiB0aGlzLnJvdy5hdmFpbGFibGUsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAi5Ya757uTIiwKICAgICAgICAgIGFtb3VudDogdGhpcy5yb3cuZnJlZXplLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogYOaKmOWQiCgke3RoaXMuY3VycmVudC5hbW91bnRfd2F5fSlgLAogICAgICAgICAgYW1vdW50OiB0aGlzLnJvdy5wcmljZS50b0ZpeGVkKDQpLAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucm93ID0gSlNPTi5wYXJzZSh0aGlzLiRyb3V0ZS5xdWVyeS5yb3cpOwogICAgLy8gdGhpcy5nZXRCaWxsKCk7CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBOYXZpZ2F0aW9uOiAocmVzb2x2ZSkgPT4KICAgICAgcmVxdWlyZShbIi4uLy4uLy4uL2NvbXBvbmVudHMvbmF2L05hdmlnYXRpb24iXSwgcmVzb2x2ZSksCiAgICBJbmZpbml0ZUxvYWRpbmcsCiAgfSwKICBtZXRob2RzOiB7CiAgICBvblJlZnJlc2goKSB7CiAgICAgIC8vICAgdGhpcy5sb2FkTW9yZUV2ZW50KCk7CiAgICAgIC8vICAgdGhpcy5saW1pdCA9IDEwOwogICAgICAvLyAgIHRoaXMuc3RhdGUubG9hZGVkKCk7CiAgICAgIHRoaXMucGFnZSA9IDA7CiAgICAgIHRoaXMuZ2V0QmlsbCgpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgNTAwKTsKICAgIH0sCiAgICBhc3luYyBsb2FkTW9yZUV2ZW50KCRzdGF0ZSkgewogICAgICAvLyAgIHRoaXMuc3RhdGUgPSAkc3RhdGU7CiAgICAgIC8vICAgdGhpcy5sb2FkTW9yZURvbSA9IHRydWU7CiAgICAgIHRoaXMucGFnZSArPSAxOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldEJpbGwoKTsKICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXN1bHQ7CiAgICAgIGlmICh0aGlzLnRyYWRlTGlzdC5sZW5ndGggPT0gZGF0YS50b3RhbCkgewogICAgICAgICRzdGF0ZS5jb21wbGV0ZSgpOwogICAgICB9IGVsc2UgewogICAgICAgICRzdGF0ZS5sb2FkZWQoKTsKICAgICAgfQogICAgfSwKICAgIGFzeW5jIGdldEJpbGwoKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IENvaW5Bc3NldHMoewogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogNywKICAgICAgICBjb2luOiB0aGlzLnJvdy5jb2luLAogICAgICB9KTsKICAgICAgaWYgKHRoaXMucGFnZSAhPSAxKSB7CiAgICAgICAgcmVzdWx0LmRhdGEubGlzdC5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgICB0aGlzLnRyYWRlTGlzdC5wdXNoKGUpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudHJhZGVMaXN0ID0gcmVzdWx0LmRhdGEubGlzdDsKICAgICAgfQogICAgICBjb25zdCB0eXBlcyA9IGF3YWl0IFR5cGVzKHsgc2NlbmU6ICJVc2Vyc1Nwb3RBc3NldHNUeXBlIiB9KTsKICAgICAgdGhpcy50cmFkZUxpc3QuZm9yRWFjaCgoZSkgPT4gewogICAgICAgIHR5cGVzLmRhdGEubWFwLmZvckVhY2goKHR5cGUpID0+IHsKICAgICAgICAgIGlmIChlLnR5cGUgPT0gdHlwZS52YWwpIHsKICAgICAgICAgICAgaWYgKCFlLnR5cGVzKSB7CiAgICAgICAgICAgICAgdGhpcy4kc2V0KGUsICJ0eXBlcyIsIHR5cGUpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZyh0aGlzLnRyYWRlTGlzdCkKICAgICAgLy8gdGhpcy50cmFkZUxpc3QgPSBzZXRUeXBlcyh0aGlzLnRyYWRlTGlzdCx0eXBlcy5kYXRhLm1hcCkKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["assets_details.vue"],"names":[],"mappings":";AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"assets_details.vue","sourceRoot":"src/views/mine/assets","sourcesContent":["<!-- 资产详情 -->\n<template>\n  <div class=\"assets-details\">\n    <Navigation title=\"资产\" />\n    <div class=\"details-content\">\n      <div style=\"padding: 4px 12px\">\n        <div class=\"details-msg\">\n          <div class=\"coin-msg\">\n            <p class=\"coin-logo\">\n              <img :src=\"row.logo\" alt=\"\" />\n            </p>\n            <p>{{ row.coin }}</p>\n          </div>\n          <ul>\n            <li v-for=\"(msg, index) in useMsg\" :key=\"index\">\n              <p>{{ msg.name }}</p>\n              <p>{{ msg.amount }}</p>\n            </li>\n          </ul>\n        </div>\n        <h3>资金流水</h3>\n      </div>\n      <!-- 资金流水详情 -->\n      <div class=\"trade-list\">\n        <div class=\"list-con\">\n          <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n            <ul>\n              <li\n                v-for=\"(list, index) in tradeList\"\n                :key=\"index\"\n                @click=\"\n                  $router.push({\n                    path: '/assets-log',\n                    query: {\n                      type: list.id,\n                    },\n                  })\n                \"\n              >\n                <div class=\"list-type\">\n                  <div class=\"flex-box\">\n                    <p\n                      class=\"point-line\"\n                      :style=\"{ background: list.types?.color }\"\n                    ></p>\n                    <p>\n                      {{ list.types?.name }}\n                    </p>\n                  </div>\n                  <p class=\"list-amount\">{{ list.balance.toFixed(4) }}</p>\n                </div>\n                <div class=\"list-date\">\n                  <p>{{ list.time }}</p>\n                  <p :style=\"{ color: list.types?.color }\">\n                    (手续费：{{ list.fee }}) &nbsp;\n                    <span\n                      >{{ list.amount > 0 ? \"+\" : \" \"\n                      }}{{ Number(list.amount).toFixed(4) }}</span\n                    >\n                  </p>\n                </div>\n              </li>\n            </ul>\n            <infinite-loading\n              spinner=\"spiral\"\n              @infinite=\"loadMoreEvent\"\n              :distance=\"0\"\n            >\n              <div slot=\"spinner\">\n                <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n              </div>\n            </infinite-loading>\n          </van-pull-refresh>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState } from \"vuex\";\nimport { CoinAssets, Types } from \"../../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { setTypes } from \"../../../utils\";\nexport default {\n  data() {\n    return {\n      tradeList: [],\n      loading: false,\n      loadMoreDom: false,\n      row: {},\n      page: 0,\n      state: null,\n    };\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    useMsg() {\n      return [\n        {\n          name: \"可用\",\n          amount: this.row.available,\n        },\n        {\n          name: \"冻结\",\n          amount: this.row.freeze,\n        },\n        {\n          name: `折合(${this.current.amount_way})`,\n          amount: this.row.price.toFixed(4),\n        },\n      ];\n    },\n  },\n  created() {\n    this.row = JSON.parse(this.$route.query.row);\n    // this.getBill();\n  },\n  components: {\n    Navigation: (resolve) =>\n      require([\"../../../components/nav/Navigation\"], resolve),\n    InfiniteLoading,\n  },\n  methods: {\n    onRefresh() {\n      //   this.loadMoreEvent();\n      //   this.limit = 10;\n      //   this.state.loaded();\n      this.page = 0;\n      this.getBill();\n      setTimeout(() => {\n        this.loading = false;\n      }, 500);\n    },\n    async loadMoreEvent($state) {\n      //   this.state = $state;\n      //   this.loadMoreDom = true;\n      this.page += 1;\n      const result = await this.getBill();\n      const { data } = result;\n      if (this.tradeList.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    async getBill() {\n      const result = await CoinAssets({\n        page: this.page,\n        limit: 7,\n        coin: this.row.coin,\n      });\n      if (this.page != 1) {\n        result.data.list.forEach((e) => {\n          this.tradeList.push(e);\n        });\n      } else {\n        this.tradeList = result.data.list;\n      }\n      const types = await Types({ scene: \"UsersSpotAssetsType\" });\n      this.tradeList.forEach((e) => {\n        types.data.map.forEach((type) => {\n          if (e.type == type.val) {\n            if (!e.types) {\n              this.$set(e, \"types\", type);\n            }\n          }\n        });\n      });\n      console.log(this.tradeList)\n      // this.tradeList = setTypes(this.tradeList,types.data.map)\n      return result;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.details-content {\n  border-top: 1px solid #eee;\n  h3 {\n    font-size: 16px;\n    color: #333;\n    font-weight: 500;\n    margin-bottom: 10px;\n  }\n  .details-msg {\n    width: 100%;\n    height: 124px;\n    background-image: url(\"../../../assets/images/assets_overview.png\");\n    background-size: 100% 100%;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 12px;\n    padding-bottom: 24px;\n    .coin-msg {\n      display: flex;\n      justify-content: center;\n      align-items: center;\n      .coin-logo {\n        width: 18px;\n        height: 16px;\n        background: #ccc;\n        border-radius: 50%;\n        margin-right: 8px;\n        transform: translateY(-2px);\n        img {\n          width: 100%;\n          height: 100%;\n          border-radius: 50%;\n        }\n      }\n      p:last-child {\n        font-size: 20px;\n        color: white;\n        font-weight: 500;\n      }\n    }\n    ul {\n      display: flex;\n      justify-content: space-between;\n      padding: 0 24px;\n      li {\n        text-align: center;\n        p {\n          font-size: 12px;\n          color: white;\n          opacity: 0.9;\n        }\n      }\n    }\n    ul::after,\n    ul::before {\n      display: none;\n    }\n  }\n  .trade-list {\n    padding: 0 12px;\n    .list-con {\n      padding: 20px 12px;\n      box-shadow: 0px 1px 8px 0px rgba(0, 0, 0, 0.08);\n      border-radius: 4px;\n      height: 70vh;\n      overflow-y: auto;\n      ul {\n        li {\n          margin-bottom: 38px;\n\n          .list-type {\n            display: flex;\n            justify-content: space-between;\n            .flex-box {\n              display: flex;\n              align-items: center;\n            }\n            .point-line {\n              width: 2px;\n              height: 10px;\n              margin-right: 6px;\n            }\n            .green-line {\n              background: #26bb9b;\n            }\n            .red-line {\n              background: #fd5656;\n            }\n            .yellow-line {\n              background: #ffcc17;\n            }\n            p:last-child {\n              font-size: 16px;\n              font-weight: 500;\n              color: #333;\n            }\n            .list-amount {\n              font-size: 18px;\n            }\n          }\n          .list-date {\n            display: flex;\n            justify-content: space-between;\n            font-size: 12px;\n            color: #999;\n            margin-top: 2px;\n            .green-text {\n              color: #26bb9b;\n            }\n            .red-text {\n              color: #fd5656;\n            }\n            .yellow-text {\n              color: #ffcc17;\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</style>"]}]}