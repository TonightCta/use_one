{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/order/components/IWantToBuy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/order/components/IWantToBuy.vue","mtime":1658713050077},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBPcmRlckxpc3QgZnJvbSAiQC9jb21wb25lbnRzL29yZGVyLWxpc3QiOwppbXBvcnQgeyBPcmRlckxpc3RTZXJ2aWNlLCBUeXBlcyB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwppbXBvcnQgeyBzZXRUeXBlcyB9IGZyb20gIi4uLy4uLy4uL3V0aWxzL2luZGV4IjsKaW1wb3J0IEluZmluaXRlTG9hZGluZyBmcm9tICJ2dWUtaW5maW5pdGUtbG9hZGluZyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgT3JkZXJMaXN0LAogICAgSW5maW5pdGVMb2FkaW5nLAogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiLAogICAgfSwKICAgIHR5cGU6ewogICAgICB0eXBlOk51bWJlciwKICAgICAgZGVmYXVsdDoxLAogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpc3Q6IFtdLAogICAgICBwYWdlOiAwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgIH07CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gdGhpcy5nZXRPcmRlckxpc3QoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v6I635Y+W6K6i5Y2V5YiX6KGoCiAgICBhc3luYyBnZXRPcmRlckxpc3QoKSB7CiAgICAgIGNvbnN0IHR5cGVzID0gYXdhaXQgVHlwZXMoeyBzY2VuZTogIkFkc09yZGVyU3RhdHVzIiB9KTsKICAgICAgY29uc29sZS5sb2codGhpcy52YWx1ZSk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBwYWdlOiB0aGlzLnBhZ2UsCiAgICAgICAgbGltaXQ6IDEwLAogICAgICAgIHNlYXJjaDogewogICAgICAgICAgZ3JvdXBfc3RhdHVzOiB0aGlzLnR5cGUsCiAgICAgICAgICBzdGF0dXM6IHRoaXMudmFsdWUsCiAgICAgICAgfSwKICAgICAgfTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgT3JkZXJMaXN0U2VydmljZShwYXJhbXMpOwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICB0aGlzLmxpc3QgPSByZXN1bHQuZGF0YS5saXN0OwogICAgICB0aGlzLmxpc3QuZm9yRWFjaCgoZSkgPT4gewogICAgICAgIHRoaXMuJHNldCgKICAgICAgICAgIGUsCiAgICAgICAgICAiZW5kX3RpbWVfdGVtcCIsCiAgICAgICAgICBuZXcgRGF0ZShlLmV4cGlyZXNfYXQpLmdldFRpbWUoKSAtIG5ldyBEYXRlKCkuZ2V0VGltZSgpCiAgICAgICAgKTsKICAgICAgfSk7CiAgICAgIHRoaXMubGlzdCA9IHNldFR5cGVzKHRoaXMubGlzdCwgdHlwZXMuZGF0YS5tYXApOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5wYWdlID0gMDsKICAgICAgdGhpcy5nZXRPcmRlckxpc3QoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDUwMCk7CiAgICB9LAogICAgYXN5bmMgbG9hZE1vcmVFdmVudCgkc3RhdGUpIHsKICAgICAgLy8gICB0aGlzLnN0YXRlID0gJHN0YXRlOwogICAgICAvLyAgIHRoaXMubG9hZE1vcmVEb20gPSB0cnVlOwogICAgICB0aGlzLnBhZ2UgKz0gMTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5nZXRPcmRlckxpc3QoKTsKICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXN1bHQ7CiAgICAgIGlmICh0aGlzLmxpc3QubGVuZ3RoID09IGRhdGEudG90YWwpIHsKICAgICAgICAkc3RhdGUuY29tcGxldGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkc3RhdGUubG9hZGVkKCk7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["IWantToBuy.vue"],"names":[],"mappings":";AA8BA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IWantToBuy.vue","sourceRoot":"src/views/order/components","sourcesContent":["<!--\n * @Name: 订单列表组件\n * @Date: 2022-06-17 16:47:03\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 20:19:49\n-->\n<template>\n  <div class=\"going-order\">\n    <div>\n      <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n        <ul>\n          <li v-for=\"(row, index) in list\" :key=\"index\">\n            <Order-list :row=\"row\"></Order-list>\n          </li>\n        </ul>\n        <infinite-loading\n          spinner=\"spiral\"\n          @infinite=\"loadMoreEvent\"\n          :distance=\"0\"\n        >\n          <div slot=\"spinner\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n        </infinite-loading>\n      </van-pull-refresh>\n    </div>\n  </div>\n</template>\n\n<script>\nimport OrderList from \"@/components/order-list\";\nimport { OrderListService, Types } from \"../../../api/api\";\nimport { setTypes } from \"../../../utils/index\";\nimport InfiniteLoading from \"vue-infinite-loading\";\n\nexport default {\n  components: {\n    OrderList,\n    InfiniteLoading,\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      default: \"\",\n    },\n    type:{\n      type:Number,\n      default:1,\n    }\n  },\n  data() {\n    return {\n      list: [],\n      page: 0,\n      loading: false,\n    };\n  },\n  created() {\n    // this.getOrderList();\n  },\n  methods: {\n    //获取订单列表\n    async getOrderList() {\n      const types = await Types({ scene: \"AdsOrderStatus\" });\n      console.log(this.value);\n      const params = {\n        page: this.page,\n        limit: 10,\n        search: {\n          group_status: this.type,\n          status: this.value,\n        },\n      };\n      const result = await OrderListService(params);\n      console.log(result);\n      this.list = result.data.list;\n      this.list.forEach((e) => {\n        this.$set(\n          e,\n          \"end_time_temp\",\n          new Date(e.expires_at).getTime() - new Date().getTime()\n        );\n      });\n      this.list = setTypes(this.list, types.data.map);\n      return result;\n    },\n    onRefresh() {\n      this.page = 0;\n      this.getOrderList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 500);\n    },\n    async loadMoreEvent($state) {\n      //   this.state = $state;\n      //   this.loadMoreDom = true;\n      this.page += 1;\n      const result = await this.getOrderList();\n      const { data } = result;\n      if (this.list.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.going-order {\n  /deep/.van-pull-refresh{\n    height: 80vh;overflow: auto;\n  }\n  ul {\n    li {\n      padding: 12px;\n      background: white;\n      border-radius: 8px;\n      margin-bottom: 8px;\n    }\n  }\n}\n</style>"]}]}