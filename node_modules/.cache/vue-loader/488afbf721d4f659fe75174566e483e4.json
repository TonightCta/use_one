{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/BtnBuyingAndSelling.vue?vue&type=style&index=0&id=0fae891e&lang=less&scoped=true&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/BtnBuyingAndSelling.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1657523213663},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5idXlpbmdBbmRTZWxsaW5nIHsKICB0cmFuc2l0aW9uOiBhbGwgMC4zNHMgZWFzZS1vdXQ7CiAgL2RlZXAvLmNvbnRhaW5lciB7CiAgICBwYWRkaW5nOiAwcHg7CiAgfQogIC9kZWVwLy5lbC1pbnB1dC1ncm91cF9fYXBwZW5kIHsKICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNHB4KTsKICB9CiAgLmhlYWQgewogICAgaGVpZ2h0OiA3N3B4OwogICAgcGFkZGluZzogMTJweCAxMnB4IDBweCAxMnB4OwogICAgYmFja2dyb3VuZDogI2Y1ZjhmZjsKICAgIC50b3AgewogICAgICAudGl0bGUgewogICAgICAgIGZvbnQtc2l6ZTogMThweDsKICAgICAgICBjb2xvcjogIzMzMzMzMzsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgfQogICAgICAuVVNEVCB7CiAgICAgICAgd2lkdGg6IDE5cHg7CiAgICAgICAgaGVpZ2h0OiAxOXB4OwogICAgICAgIG1hcmdpbi1yaWdodDogNXB4OwogICAgICB9CiAgICAgIC50aGVVbml0UHJpY2UgewogICAgICAgIHBhZGRpbmc6IDBweCAxMHB4OwogICAgICAgIGhlaWdodDogMjRweDsKICAgICAgICBiYWNrZ3JvdW5kOiAjZmZmZmZmOwogICAgICAgIGJvcmRlci1yYWRpdXM6IDEycHg7CiAgICAgICAgZm9udC1zaXplOiAxMnB4OwogICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7CiAgICAgICAgY29sb3I6ICM5OTk5OTk7CiAgICAgICAgLmRlbmdQYW8gewogICAgICAgICAgd2lkdGg6IDE1cHg7CiAgICAgICAgICBoZWlnaHQ6IDE1cHg7CiAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDVweDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC9kZWVwLy52YW4tdGFicyB7CiAgICAgIG1hcmdpbi10b3A6IDVweDsKICAgICAgLnZhbi10YWJzX193cmFwIHsKICAgICAgICBoZWlnaHQ6IDM1cHg7CiAgICAgICAgLnZhbi10YWJzX19uYXYtLWxpbmUgewogICAgICAgICAgcGFkZGluZy1ib3R0b206IDBweDsKICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50OwogICAgICAgICAgLnZhbi10YWIgewogICAgICAgICAgICBtYXJnaW4tcmlnaHQ6IDE1cHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICAgICAgY29sb3I6ICM2NjY2NjY7CiAgICAgICAgICAgICYudmFuLXRhYi0tYWN0aXZlIHsKICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7CiAgICAgICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICAgICAgY29sb3I6ICMzMzMzMzM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLnZhbi10YWJzX19saW5lIHsKICAgICAgICAgIGJvdHRvbTogMHB4OwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAuYm9keSB7CiAgICBoZWlnaHQ6IDE1MHB4OwogICAgcGFkZGluZzogMHB4IDEycHg7CiAgICAudWktaHggewogICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICY6OmFmdGVyIHsKICAgICAgICBiYWNrZ3JvdW5kOiAjZWVlZWVlOwogICAgICB9CiAgICAgIC5jb3VudCB7CiAgICAgICAgbWFyZ2luLXJpZ2h0OiA1MnB4OwogICAgICB9CiAgICAgIC5hbGwgewogICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgICAgICByaWdodDogMHB4OwogICAgICAgIGZvbnQtc2l6ZTogMTRweDsKICAgICAgICBjb2xvcjogIzY1ODBmZjsKICAgICAgICBib3R0b206IDE0cHg7CiAgICAgIH0KICAgICAgL2RlZXAvLmVsLWlucHV0IHsKICAgICAgICBpbnB1dCB7CiAgICAgICAgICBmb250LXNpemU6IDMwcHg7CiAgICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICAgIGNvbG9yOiAjMzMzMzMzOwogICAgICAgICAgJjo6cGxhY2Vob2xkZXIgewogICAgICAgICAgICBjb2xvcjogIzMzMzMzMzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLmVsLWlucHV0LWdyb3VwX19hcHBlbmQgewogICAgICAgICAgZm9udC1zaXplOiAyMnB4OwogICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7CiAgICAgICAgICBjb2xvcjogIzk5OTk5OTsKICAgICAgICAgIG1hcmdpbi1sZWZ0OiA4cHg7CiAgICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICAgIC5saW1pdCB7CiAgICAgIHBhZGRpbmc6IDEwcHggMHB4OwogICAgICBmb250LXNpemU6IDEycHg7CiAgICAgIGNvbG9yOiAjYWRhZGFkOwogICAgfQogIH0KCiAgLnRoZVRvdGFsTnVtYmVyIHsKICAgIHBhZGRpbmc6IDBweCAxMnB4OwogICAgd2lkdGg6IDM3NXB4OwogICAgaGVpZ2h0OiAzOHB4OwogICAgYmFja2dyb3VuZDogI2YyZjJmMjsKICAgIC50aXRsZSB7CiAgICAgIGZvbnQtc2l6ZTogMTJweDsKICAgICAgY29sb3I6ICMzMzMzMzA7CiAgICB9CiAgICBkbCB7CiAgICAgIGR0IHsKICAgICAgICBmb250LXdlaWdodDogYm9sZDsKICAgICAgICBjb2xvcjogIzEyMTMxNDsKICAgICAgfQogICAgICBkZCB7CiAgICAgICAgY29sb3I6ICM5ZTlmOWY7CiAgICAgIH0KICAgIH0KICAgIC51aS1mbGV4LWRsIGRkIHsKICAgICAgbWFyZ2luLWJvdHRvbTogNXB4OwogICAgfQogIH0KCiAgLmZvb3RlciB7CiAgICBwYWRkaW5nOiAxMnB4OwogICAgLnZhbi1idXR0b24gewogICAgICBoZWlnaHQ6IDQ0cHg7CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["BtnBuyingAndSelling.vue"],"names":[],"mappings":";AAsOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BtnBuyingAndSelling.vue","sourceRoot":"src/views/home/components","sourcesContent":["<!--\n * @Name: 首页买卖按钮弹出模块\n * @Date: 2022-06-25 09:32:20\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:19:18\n-->\n<template>\n  <P-popup\n    class=\"buyingAndSelling\"\n    v-model=\"accordingTo\"\n    :head=\"false\"\n    :closeable=\"false\"\n  >\n    <div class=\"head\">\n      <div class=\"top ui-flex-center\">\n        <div class=\"ui-flex-row\">\n          <B-svg name=\"USDT\" class-name=\"USDT\" />\n          <div class=\"title\">{{ title }}{{ currency }}</div>\n        </div>\n        <div>\n          <div class=\"theUnitPrice ui-flex-row\">\n            <B-svg name=\"dengPao\" class-name=\"dengPao\"></B-svg>\n            <div>\n              单价：{{ row.currency_symbol }}{{ row.price?.toFixed(2) }}\n            </div>\n          </div>\n        </div>\n      </div>\n      <P-tabs v-model=\"tabs.active\" :list=\"tabs.list\" :lineWidth=\"32\">\n        <template #title=\"scope\"> {{ scope.row.name }}{{ title }} </template>\n        <template #title_1=\"row\">\n          <span v-if=\"false\">{{ row }}</span>\n        </template>\n      </P-tabs>\n    </div>\n    <div class=\"body ui-flex-row-center\">\n      <div class=\"ui-hx w-100-b\">\n        <div class=\"ui-flex-row p-10-tb\">\n          <div class=\"count\">\n            <B-input\n              type=\"int\"\n              v-model=\"val\"\n              placeholder=\"0\"\n              :append=\"tabs.active == 0 ? theAmountOfUnits : currency\"\n              :sinceTheGrowth=\"true\"\n              :sinceTheGrowthWidth=\"23\"\n            ></B-input>\n          </div>\n          <!-- <div class=\"all\">全部</div> -->\n        </div>\n      </div>\n      <div class=\"limit\">\n        限额\n        {{\n          tabs.active == 0\n            ? row.min_currency?.toFixed(2)\n            : row.min_amount?.toFixed(4)\n        }}-{{\n          tabs.active == 0\n            ? row.max_currency?.toFixed(2)\n            : row.amount?.toFixed(4)\n        }}\n        {{ tabs.active == 0 ? theAmountOfUnits : currency }}\n      </div>\n    </div>\n    <div class=\"theTotalNumber ui-flex-center\">\n      <div class=\"title\">{{ tabs.active == 0 ? \"总数量\" : \"总金额\" }}</div>\n      <dl class=\"ui-flex-dl\">\n        <dt>{{ calTotal.toFixed(4) }}</dt>\n        <dd>{{ tabs.active == 0 ? currency : theAmountOfUnits }}</dd>\n      </dl>\n    </div>\n    <div class=\"footer ui-grid-2\">\n      <P-button type=\"default\" class=\"btn-default\" @click=\"accordingTo = false\"\n        >取消</P-button\n      >\n      <P-button\n        :type=\"title == '购买' ? 'primary' : 'danger'\"\n        :class=\"title == '购买' ? 'btn-primary' : 'btn-danger'\"\n        @click=\"placeOrder\"\n        >{{ title }}</P-button\n      >\n    </div>\n  </P-popup>\n</template>\n\n<script>\nimport { PlaceOrder } from \"../../../api/api\";\nexport default {\n  props: {\n    value: {\n      type: Boolean,\n      default: false,\n    },\n    title: {\n      type: String,\n      default: \"购买\",\n    },\n    //币种\n    currency: {\n      type: String,\n      default: \"\",\n    },\n    //下单信息\n    row: {\n      type: Object,\n      default: {},\n    },\n  },\n  data() {\n    return {\n      val: 0,\n      //   theAmountOfUnits: \"INR\", //金额单位\n      accordingTo: false,\n      tabs: {\n        active: 0,\n        list: [\n          { name: \"按金额\", scroll: \"\" },\n          { name: \"按数量\", scroll: \"\" },\n        ],\n      },\n      limit: \"622-1253\", //限额\n      theTotalNumber: 23.2251, //总数量\n      theUnitPrice: 2.35, //单价\n      calTotal: 0, //计算数量\n    };\n  },\n  watch: {\n    value: {\n      immediate: true,\n      handler: function (v) {\n        this.accordingTo = v;\n      },\n    },\n    accordingTo(v) {\n      this.$emit(\"input\", v);\n    },\n    \"tabs.active\"(val) {\n      this.val = \"\";\n      this.calTotal = 0;\n    },\n    val(val) {\n      const computedMine = () => {\n        if (this.tabs.active == 0) {\n          this.calTotal = Number(val) / Number(this.row?.price);\n        } else {\n          this.calTotal = Number(val) * Number(this.row?.price);\n        }\n      };\n      val && computedMine();\n    },\n  },\n  computed: {\n    theAmountOfUnits() {\n      return this.row.currency;\n    },\n  },\n  created() {\n    console.log(this.row);\n  },\n  mounted() {},\n  methods: {\n    //下单\n    async placeOrder() {\n      //通过金额购买\n      const tradeForPrice = async () => {\n        const price = Number(this.val);\n        if (price < this.row.min_currency || price > this.row.max_currency) {\n          this.$toast(\n            `请输入${this.row.min_currency.toFixed(\n              2\n            )}-${this.row.max_currency.toFixed(2)}区间的金额`\n          );\n          return;\n        }\n        const params = {\n          adv_id: this.row.id,\n          order_type: 1,\n          order_amount: price,\n        };\n        const result = await PlaceOrder(params);\n        const { code } = result;\n        if(code != 200){\n            this.$toast(result.message);\n            return;\n        };\n        console.log(result);\n        console.log(\"通过金额购买\");\n        this.$router.push({\n            path:'/pleasepayment',\n            query:{\n                id:result.data.order_id\n            }\n        });\n      };\n      //通过数量购买\n      const tradeForAmount = async () => {\n        const amount = Number(this.val);\n        if (amount < this.row.min_amount || amount > this.row.amount) {\n          this.$toast(\n            `请输入${this.row.min_amount.toFixed(4)}-${this.row.amount.toFixed(\n              4\n            )}区间的数量`\n          );\n          return;\n        }\n        const params = {\n          adv_id: this.row.id,\n          order_type: 2,\n          order_amount: amount,\n        };\n        const result = await PlaceOrder(params);\n        const { code } = result;\n        if(code != 200){\n            this.$toast(result.message);\n            return;\n        };\n        console.log(result);\n        console.log(\"通过数量购买\");\n        this.$router.push('/pleasepayment');\n        this.$store.commit('current/upOrderID',result.data.order_id);\n      };\n      this.tabs.active == 0 ? tradeForPrice() : tradeForAmount();\n    },\n  },\n  destroyed() {},\n};\n</script>\n\n<style lang=\"less\" scoped>\n.buyingAndSelling {\n  transition: all 0.34s ease-out;\n  /deep/.container {\n    padding: 0px;\n  }\n  /deep/.el-input-group__append {\n    transform: translateY(-4px);\n  }\n  .head {\n    height: 77px;\n    padding: 12px 12px 0px 12px;\n    background: #f5f8ff;\n    .top {\n      .title {\n        font-size: 18px;\n        color: #333333;\n        font-weight: bold;\n      }\n      .USDT {\n        width: 19px;\n        height: 19px;\n        margin-right: 5px;\n      }\n      .theUnitPrice {\n        padding: 0px 10px;\n        height: 24px;\n        background: #ffffff;\n        border-radius: 12px;\n        font-size: 12px;\n        font-weight: 400;\n        color: #999999;\n        .dengPao {\n          width: 15px;\n          height: 15px;\n          margin-right: 5px;\n        }\n      }\n    }\n    /deep/.van-tabs {\n      margin-top: 5px;\n      .van-tabs__wrap {\n        height: 35px;\n        .van-tabs__nav--line {\n          padding-bottom: 0px;\n          background-color: transparent;\n          .van-tab {\n            margin-right: 15px;\n            font-size: 14px;\n            color: #666666;\n            &.van-tab--active {\n              font-size: 14px;\n              font-weight: bold;\n              color: #333333;\n            }\n          }\n        }\n        .van-tabs__line {\n          bottom: 0px;\n        }\n      }\n    }\n  }\n  .body {\n    height: 150px;\n    padding: 0px 12px;\n    .ui-hx {\n      position: relative;\n      &::after {\n        background: #eeeeee;\n      }\n      .count {\n        margin-right: 52px;\n      }\n      .all {\n        position: absolute;\n        right: 0px;\n        font-size: 14px;\n        color: #6580ff;\n        bottom: 14px;\n      }\n      /deep/.el-input {\n        input {\n          font-size: 30px;\n          font-weight: bold;\n          color: #333333;\n          &::placeholder {\n            color: #333333;\n          }\n        }\n        .el-input-group__append {\n          font-size: 22px;\n          font-weight: bold;\n          color: #999999;\n          margin-left: 8px;\n          align-self: flex-end;\n        }\n      }\n    }\n    .limit {\n      padding: 10px 0px;\n      font-size: 12px;\n      color: #adadad;\n    }\n  }\n\n  .theTotalNumber {\n    padding: 0px 12px;\n    width: 375px;\n    height: 38px;\n    background: #f2f2f2;\n    .title {\n      font-size: 12px;\n      color: #333330;\n    }\n    dl {\n      dt {\n        font-weight: bold;\n        color: #121314;\n      }\n      dd {\n        color: #9e9f9f;\n      }\n    }\n    .ui-flex-dl dd {\n      margin-bottom: 5px;\n    }\n  }\n\n  .footer {\n    padding: 12px;\n    .van-button {\n      height: 44px;\n    }\n  }\n}\n</style>"]}]}