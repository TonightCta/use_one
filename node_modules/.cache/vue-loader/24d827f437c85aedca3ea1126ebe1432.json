{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/login/components/verification.vue?vue&type=style&index=0&id=0dfcad24&lang=less&scoped=true&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/login/components/verification.vue","mtime":1658287406632},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1657523213663},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5nZXRWZXJpZmljYXRpb25Db2RlIHsKICBmb250LXNpemU6IDE0cHg7CiAgY29sb3I6ICMyY2JjOTQ7CiAgbWFyZ2luLXRvcDogMjBweDsKfQo="},{"version":3,"sources":["verification.vue"],"names":[],"mappings":";AA+GA;AACA;AACA;AACA;AACA","file":"verification.vue","sourceRoot":"src/views/login/components","sourcesContent":["<!--\n * @Name: 请输入手机或邮箱验证码\n * @Date: 2022-06-26 21:27:29\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:57:29\n-->\n<template>\n  <P-main class=\"login\">\n    <Navigation :ClickLeft=\"false\" @click-left=\"onClickLeft\" />\n    <h3>\n      {{ $t(\"请输入\") }}{{ title.VerificationName }}{{ $t(\"验证码\") }}\n      <div>{{ $t(\"验证码已发送至\") }}{{ active == 0 ? phone : email }}</div>\n    </h3>\n    <P-verification v-model=\"val\" />\n    <div class=\"getVerificationCode ui-flex-center\">\n      <div>\n        <div class=\"ui-col-hong\">{{ this.errorInfo }}</div>\n      </div>\n      <div>\n        <div @click=\"getVerificationCode\" v-if=\"count == 0\">\n          {{ $t(\"获取验证码\") }}\n        </div>\n        <B-data-theCountdown v-model=\"count\" v-else\n          >{{ count }} {{ $t(\"秒后重新获取\") }}</B-data-theCountdown\n        >\n      </div>\n    </div>\n  </P-main>\n</template>\n\n<script>\nexport default {\n  props: {\n    title: {\n      type: [Object, Array],\n      default: () => [],\n    },\n    active: {\n      type: Number,\n      default: 0,\n    },\n    scene: {\n      type: Number,\n      default: 0,\n    },\n    phone_prefix: {\n      type: String,\n      default: \"\",\n    },\n    phone: {\n      type: String,\n      default: \"\",\n    },\n    email: {\n      type: String,\n      default: \"\",\n    },\n  },\n  data() {\n    return {\n      val: \"\",\n      errorInfo: \"\",\n      showKeyboard: true,\n      count: 0,\n    };\n  },\n  created() {\n    this.getVerificationCode();\n  },\n  watch: {\n    val(v) {\n      if (v.length === 6) {\n        this.validation();\n      } else {\n        this.errorInfo;\n      }\n    },\n  },\n  methods: {\n    async getVerificationCode() {\n      this.count = 60;\n      const result = await this.$store.dispatch(\"registered/sendCode\", {\n        scene: this.scene,\n        type: this.title.id,\n        email: this.email,\n        phone: this.phone,\n        phone_prefix: this.phone_prefix,\n      });\n      const { code } = result;  \n      if (code != 200) {\n        this.$toast(result.message);\n        this.count = 60;\n        return;\n      }\n    },\n    async validation() {\n      let response = await this.$store.dispatch(\"registered/checkCode\", {\n        scene: this.scene,\n        receiver: this.active == 0 ? this.phone : this.email,\n        code: this.val,\n      });\n      this.$emit(\"click\", response, this.val);\n    },\n    onClickLeft() {\n      this.$emit(\"click-left\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.getVerificationCode {\n  font-size: 14px;\n  color: #2cbc94;\n  margin-top: 20px;\n}\n</style>"]}]}