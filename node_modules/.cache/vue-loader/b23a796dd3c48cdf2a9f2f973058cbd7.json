{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/index.vue","mtime":1658214029844},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGdldENvaW5QcmljZSwgb25lSW50ZXJQcmljZSB9IGZyb20gIi4uLy4uLy4uL3V0aWxzL2luZGV4IjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgVXNlckFzc2V0cyB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wZXJMaXN0OiBbCiAgICAgICAgewogICAgICAgICAgaWNvbjogImljb24tYS1iaWFuenU5IiwKICAgICAgICAgIG5hbWU6ICLlhYXluIEiLAogICAgICAgICAgdXJsOiAiL3JlY2hhcmdlIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGljb246ICJpY29uLXlpbmhhbmdrYS0yIiwKICAgICAgICAgIG5hbWU6ICLkuqTmmJMiLAogICAgICAgICAgdXJsOiAiL2luZGV4IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGljb246ICJpY29uLWEtMzVndWFuZ2dhb3hpYW9zaG91IiwKICAgICAgICAgIG5hbWU6ICLlj5HluIPlub/lkYoiLAogICAgICAgICAgdXJsOiAiL3JlbGVhc2UiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGFzc2V0c0xpc3Q6IFtdLAogICAgICBhc3NldHNTZWM6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcHJpY2VfYnRjOiAiIiwKICAgICAgc2VhcmNoQXNzZXRzOiAiIiwgLy/mkJzntKLotYTkuqcKICAgICAgbG9hZERhdGE6IGZhbHNlLC8v5Yqg6L295Yqo55S7CiAgICAgIHZpc2libGU6dHJ1ZSwvL+WPr+inhueKtuaAgQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbImN1cnJlbnQiXSksCiAgICB0b3RhbFByaWNlKCkgewogICAgICByZXR1cm4gTnVtYmVyKHRoaXMuJHJvdXRlLnF1ZXJ5LnRvdGFsX3ByaWNlKS50b0ZpeGVkKDQpOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBzZWFyY2hBc3NldHModmFsKSB7CiAgICAgIGNvbnN0IHNlYXJjaCA9ICgpID0+IHsKICAgICAgICB0aGlzLmFzc2V0c0xpc3QgPSB0aGlzLmFzc2V0c1NlYy5maWx0ZXIoKGUpID0+IHsKICAgICAgICAgIHJldHVybiBlLmNvaW4uaW5jbHVkZXModmFsLnRvVXBwZXJDYXNlKCkpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICB2YWwgJiYgc2VhcmNoKCk7CiAgICAgICF2YWwgJiYgKHRoaXMuYXNzZXRzTGlzdCA9IHRoaXMuYXNzZXRzU2VjKTsKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5pbnRlclRvdGFsUHJpY2UoKTsKICAgIHRoaXMuZ2V0Q29pbkxpc3QoKTsKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIE5hdmlnYXRpb246IChyZXNvbHZlKSA9PgogICAgICByZXF1aXJlKFsiLi4vLi4vLi4vY29tcG9uZW50cy9uYXYvTmF2aWdhdGlvbiJdLCByZXNvbHZlKSwKICB9LAogIG1ldGhvZHM6IHsKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5nZXRDb2luTGlzdCgpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgMTAwMCk7CiAgICB9LAogICAgLy/orqHnrpfms5XluIHotYTkuqfoh7NCVEMKICAgIGFzeW5jIGludGVyVG90YWxQcmljZSgpIHsKICAgICAgY29uc3QgYnRjX3ByaWNlID0gYXdhaXQgZ2V0Q29pblByaWNlKCJCVEMiKTsKICAgICAgY29uc3QgcHJpY2Vfb2ZfdXMgPQogICAgICAgIHBhcnNlSW50KHRoaXMuJHJvdXRlLnF1ZXJ5LnRvdGFsX3ByaWNlKSAvCiAgICAgICAgcGFyc2VJbnQodGhpcy5jdXJyZW50LndheV9yYXRlKTsKICAgICAgdGhpcy5wcmljZV9idGMgPSBwYXJzZUludChwcmljZV9vZl91cykgLyBwYXJzZUludChidGNfcHJpY2UpOwogICAgfSwKICAgIC8v6I635Y+W6LWE5Lqn5YiX6KGoCiAgICBhc3luYyBnZXRDb2luTGlzdCgpIHsKICAgICAgdGhpcy5sb2FkRGF0YSA9IHRydWU7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVzZXJBc3NldHMoKTsKICAgICAgbGV0IGxpc3RfbG9jYWwgPSBbXTsKICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXN1bHQ7CiAgICAgIGZvciAobGV0IGkgaW4gZGF0YSkgewogICAgICAgIGxpc3RfbG9jYWwucHVzaChkYXRhW2ldKTsKICAgICAgfQogICAgICB0aGlzLmFzc2V0c0xpc3QgPSBsaXN0X2xvY2FsOwogICAgICB0aGlzLmFzc2V0c0xpc3QuZm9yRWFjaChhc3luYyAoZSkgPT4gewogICAgICAgIHRoaXMuJHNldCgKICAgICAgICAgIGUsCiAgICAgICAgICAicHJpY2UiLAogICAgICAgICAgYXdhaXQgb25lSW50ZXJQcmljZSh0aGlzLmN1cnJlbnQud2F5X3JhdGUsIGUuYXZhaWxhYmxlLCBlLmNvaW4pCiAgICAgICAgKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYXNzZXRzU2VjID0gdGhpcy5hc3NldHNMaXN0OwogICAgICB0aGlzLmxvYWREYXRhID0gZmFsc2U7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/mine/assets","sourcesContent":["<!--\n  * @NAME 我的资产\n  * @DATE 2022-07-14\n  * @AUTHOR CT\n-->\n<template>\n  <div class=\"mine-assets\">\n    <Navigation title=\"我的资产\" />\n    <div class=\"assets-content\">\n      <div style=\"padding: 0 12px\">\n        <div class=\"assets-overview\">\n          <div>\n            <div class=\"all-balance\">\n              <p>总资产折合(BTC)</p>\n              <p type=\"icon\" class=\"iconfont icon-yanjing-3\" v-if=\"!visible\" @click=\"visible = !visible\"></p>\n              <p type=\"icon\" class=\"iconfont icon-24gf-eyeHide\" v-else @click=\"visible = !visible\"></p>\n            </div>\n            <div class=\"balance-amount\">\n              <p>\n                <mt-spinner\n                  v-if=\"!price_btc\"\n                  type=\"triple-bounce\"\n                  color=\"white\"\n                ></mt-spinner>\n                <span v-else>{{ visible ? Number(price_btc).toFixed(6) : '&prop;' }}</span>\n              </p>\n              <p class=\"label\">&asymp;</p>\n              <p>{{ current.way_symbol }}{{ visible ? totalPrice : '&prop;' }}</p>\n            </div>\n          </div>\n          <!-- 操作 -->\n          <div class=\"view-oper\">\n            <ul>\n              <li\n                v-for=\"(oper, index) in operList\"\n                :key=\"index\"\n                @click=\"$router.push(oper.url)\"\n              >\n                <p\n                  type=\"icon\"\n                  class=\"iconfont\"\n                  :class=\"oper.icon\"\n                ></p>\n                <p>{{ oper.name }}</p>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <!-- 搜索资产 -->\n        <div class=\"search-assets\">\n          <P-input placeholder=\"搜索\" v-model=\"searchAssets\">\n            <template #icon>\n              <div class=\"iconfont icon-fangdajing\"></div>\n            </template>\n          </P-input>\n        </div>\n      </div>\n      <!-- 资产列表 -->\n      <div class=\"assets-list\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <div class=\"flex-box p-t-40\" v-if=\"loadData\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n          <div v-else>\n            <ul v-if=\"assetsList.length != 0\">\n              <li\n                class=\"\"\n                v-for=\"(assets, index) in assetsList\"\n                :key=\"index\"\n                @click=\"\n                  $router.push({\n                    path: '/assets-details',\n                    query: {\n                      row: JSON.stringify(assets),\n                    },\n                  })\n                \"\n              >\n                <div class=\"coin-msg\">\n                  <div class=\"flex-box\">\n                    <p class=\"coin-icon\">\n                      <img :src=\"assets.logo\" alt=\"\" />\n                    </p>\n                    <p class=\"coin-name\">{{ assets.coin }}</p>\n                  </div>\n                  <p class=\"iconfont icon-youjiantou\" type=\"icon\"></p>\n                </div>\n                <div class=\"amount-msg\">\n                  <div>\n                    <p>可用</p>\n                    <p>{{ visible ? assets.available : '&prop;' }}</p>\n                  </div>\n                  <div>\n                    <p>冻结</p>\n                    <p>{{ visible ? assets.freeze : '&prop;' }}</p>\n                  </div>\n                  <div>\n                    <p>折合</p>\n                    <p>\n                      <mt-spinner\n                        type=\"triple-bounce\"\n                        color=\"#2CBC94\"\n                        v-if=\"!assets.price\"\n                      ></mt-spinner>\n                      <span v-else\n                        >{{ current.way_symbol\n                        }}{{ visible ? Number(assets.price).toFixed(4) : '&prop;' }}</span\n                      >\n                    </p>\n                  </div>\n                </div>\n              </li>\n            </ul>\n            <p class=\"no-data\" v-else>暂无数据</p>\n          </div>\n        </van-pull-refresh>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCoinPrice, oneInterPrice } from \"../../../utils/index\";\nimport { mapState } from \"vuex\";\nimport { UserAssets } from \"../../../api/api\";\nexport default {\n  data() {\n    return {\n      operList: [\n        {\n          icon: \"icon-a-bianzu9\",\n          name: \"充币\",\n          url: \"/recharge\",\n        },\n        {\n          icon: \"icon-yinhangka-2\",\n          name: \"交易\",\n          url: \"/index\",\n        },\n        {\n          icon: \"icon-a-35guanggaoxiaoshou\",\n          name: \"发布广告\",\n          url: \"/release\",\n        },\n      ],\n      assetsList: [],\n      assetsSec: [],\n      loading: false,\n      price_btc: \"\",\n      searchAssets: \"\", //搜索资产\n      loadData: false,//加载动画\n      visible:true,//可视状态\n    };\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    totalPrice() {\n      return Number(this.$route.query.total_price).toFixed(4);\n    },\n  },\n  watch: {\n    searchAssets(val) {\n      const search = () => {\n        this.assetsList = this.assetsSec.filter((e) => {\n          return e.coin.includes(val.toUpperCase());\n        });\n      };\n      val && search();\n      !val && (this.assetsList = this.assetsSec);\n    },\n  },\n  created() {\n    this.interTotalPrice();\n    this.getCoinList();\n  },\n  components: {\n    Navigation: (resolve) =>\n      require([\"../../../components/nav/Navigation\"], resolve),\n  },\n  methods: {\n    onRefresh() {\n      this.getCoinList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    //计算法币资产至BTC\n    async interTotalPrice() {\n      const btc_price = await getCoinPrice(\"BTC\");\n      const price_of_us =\n        parseInt(this.$route.query.total_price) /\n        parseInt(this.current.way_rate);\n      this.price_btc = parseInt(price_of_us) / parseInt(btc_price);\n    },\n    //获取资产列表\n    async getCoinList() {\n      this.loadData = true;\n      const result = await UserAssets();\n      let list_local = [];\n      const { data } = result;\n      for (let i in data) {\n        list_local.push(data[i]);\n      }\n      this.assetsList = list_local;\n      this.assetsList.forEach(async (e) => {\n        this.$set(\n          e,\n          \"price\",\n          await oneInterPrice(this.current.way_rate, e.available, e.coin)\n        );\n      });\n      this.assetsSec = this.assetsList;\n      this.loadData = false;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\n</style>"]}]}