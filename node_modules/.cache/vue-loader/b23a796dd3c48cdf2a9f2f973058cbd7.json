{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/mine/assets/index.vue","mtime":1658713050075},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGdldENvaW5QcmljZSwgb25lSW50ZXJQcmljZSB9IGZyb20gIi4uLy4uLy4uL3V0aWxzL2luZGV4IjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKaW1wb3J0IHsgVXNlckFzc2V0cyB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIG9wZXJMaXN0OiBbCiAgICAgICAgewogICAgICAgICAgaWNvbjogImljb24tYS1iaWFuenU5IiwKICAgICAgICAgIG5hbWU6ICLlhYXluIEiLAogICAgICAgICAgdXJsOiAiL3JlY2hhcmdlIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGljb246ICJpY29uLXlpbmhhbmdrYS0yIiwKICAgICAgICAgIG5hbWU6ICLkuqTmmJMiLAogICAgICAgICAgdXJsOiAiL2luZGV4IiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGljb246ICJpY29uLWEtMzVndWFuZ2dhb3hpYW9zaG91IiwKICAgICAgICAgIG5hbWU6ICLlj5HluIPlub/lkYoiLAogICAgICAgICAgdXJsOiAiL3JlbGVhc2UiLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIGFzc2V0c0xpc3Q6IFtdLAogICAgICBhc3NldHNTZWM6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgcHJpY2VfYnRjOiBudWxsLAogICAgICBzZWFyY2hBc3NldHM6ICIiLCAvL+aQnOe0oui1hOS6pwogICAgICBsb2FkRGF0YTogZmFsc2UsLy/liqDovb3liqjnlLsKICAgICAgdmlzaWJsZTp0cnVlLC8v5Y+v6KeG54q25oCBCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsiY3VycmVudCJdKSwKICAgIHRvdGFsUHJpY2UoKSB7CiAgICAgIHJldHVybiBOdW1iZXIodGhpcy4kcm91dGUucXVlcnkudG90YWxfcHJpY2UpLnRvRml4ZWQoNCk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIHNlYXJjaEFzc2V0cyh2YWwpIHsKICAgICAgY29uc3Qgc2VhcmNoID0gKCkgPT4gewogICAgICAgIHRoaXMuYXNzZXRzTGlzdCA9IHRoaXMuYXNzZXRzU2VjLmZpbHRlcigoZSkgPT4gewogICAgICAgICAgcmV0dXJuIGUuY29pbi5pbmNsdWRlcyh2YWwudG9VcHBlckNhc2UoKSk7CiAgICAgICAgfSk7CiAgICAgIH07CiAgICAgIHZhbCAmJiBzZWFyY2goKTsKICAgICAgIXZhbCAmJiAodGhpcy5hc3NldHNMaXN0ID0gdGhpcy5hc3NldHNTZWMpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmludGVyVG90YWxQcmljZSgpOwogICAgdGhpcy5nZXRDb2luTGlzdCgpOwogIH0sCiAgY29tcG9uZW50czogewogICAgTmF2aWdhdGlvbjogKHJlc29sdmUpID0+CiAgICAgIHJlcXVpcmUoWyIuLi8uLi8uLi9jb21wb25lbnRzL25hdi9OYXZpZ2F0aW9uIl0sIHJlc29sdmUpLAogIH0sCiAgbWV0aG9kczogewogICAgb25SZWZyZXNoKCkgewogICAgICB0aGlzLmdldENvaW5MaXN0KCk7CiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAxMDAwKTsKICAgIH0sCiAgICAvL+iuoeeul+azleW4gei1hOS6p+iHs0JUQwogICAgYXN5bmMgaW50ZXJUb3RhbFByaWNlKCkgewogICAgICBjb25zdCBidGNfcHJpY2UgPSBhd2FpdCBnZXRDb2luUHJpY2UoIkJUQyIpOwogICAgICBjb25zdCBwcmljZV9vZl91cyA9CiAgICAgICAgcGFyc2VJbnQodGhpcy4kcm91dGUucXVlcnkudG90YWxfcHJpY2UpIC8KICAgICAgICBwYXJzZUludCh0aGlzLmN1cnJlbnQud2F5X3JhdGUpOwogICAgICB0aGlzLnByaWNlX2J0YyA9IHBhcnNlSW50KHByaWNlX29mX3VzKSAvIHBhcnNlSW50KGJ0Y19wcmljZSk7CiAgICB9LAogICAgLy/ojrflj5botYTkuqfliJfooagKICAgIGFzeW5jIGdldENvaW5MaXN0KCkgewogICAgICB0aGlzLmxvYWREYXRhID0gdHJ1ZTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVXNlckFzc2V0cygpOwogICAgICBsZXQgbGlzdF9sb2NhbCA9IFtdOwogICAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3VsdDsKICAgICAgZm9yIChsZXQgaSBpbiBkYXRhKSB7CiAgICAgICAgbGlzdF9sb2NhbC5wdXNoKGRhdGFbaV0pOwogICAgICB9CiAgICAgIHRoaXMuYXNzZXRzTGlzdCA9IGxpc3RfbG9jYWw7CiAgICAgIHRoaXMuYXNzZXRzTGlzdC5mb3JFYWNoKGFzeW5jIChlKSA9PiB7CiAgICAgICAgdGhpcy4kc2V0KAogICAgICAgICAgZSwKICAgICAgICAgICJwcmljZSIsCiAgICAgICAgICBhd2FpdCBvbmVJbnRlclByaWNlKHRoaXMuY3VycmVudC53YXlfcmF0ZSwgZS5hdmFpbGFibGUsIGUuY29pbikKICAgICAgICApOwogICAgICB9KTsKICAgICAgdGhpcy5hc3NldHNTZWMgPSB0aGlzLmFzc2V0c0xpc3Q7CiAgICAgIHRoaXMubG9hZERhdGEgPSBmYWxzZTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA0HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/mine/assets","sourcesContent":["<!--\n  * @NAME 我的资产\n  * @DATE 2022-07-14\n  * @AUTHOR CT\n-->\n<template>\n  <div class=\"mine-assets\">\n    <Navigation title=\"我的资产\" />\n    <div class=\"assets-content\">\n      <div style=\"padding: 0 12px\">\n        <div class=\"assets-overview\">\n          <div>\n            <div class=\"all-balance\">\n              <p>总资产折合(BTC)</p>\n              <p type=\"icon\" class=\"iconfont icon-yanjing-3\" v-if=\"!visible\" @click=\"visible = !visible\"></p>\n              <p type=\"icon\" class=\"iconfont icon-24gf-eyeHide\" v-else @click=\"visible = !visible\"></p>\n            </div>\n            <div class=\"balance-amount\">\n              <p>\n                <mt-spinner\n                  v-if=\"price_btc == null\"\n                  type=\"triple-bounce\"\n                  color=\"white\"\n                ></mt-spinner>\n                <span v-else>{{ visible ? Number(price_btc).toFixed(6) : '&prop;' }}</span>\n              </p>\n              <p class=\"label\">&asymp;</p>\n              <p>{{ current.way_symbol }}{{ visible ? totalPrice : '&prop;' }}</p>\n            </div>\n          </div>\n          <!-- 操作 -->\n          <div class=\"view-oper\">\n            <ul>\n              <li\n                v-for=\"(oper, index) in operList\"\n                :key=\"index\"\n                @click=\"$router.push(oper.url)\"\n              >\n                <p\n                  type=\"icon\"\n                  class=\"iconfont\"\n                  :class=\"oper.icon\"\n                ></p>\n                <p>{{ oper.name }}</p>\n              </li>\n            </ul>\n          </div>\n        </div>\n        <!-- 搜索资产 -->\n        <div class=\"search-assets\">\n          <P-input placeholder=\"搜索\" v-model=\"searchAssets\">\n            <template #icon>\n              <div class=\"iconfont icon-fangdajing\"></div>\n            </template>\n          </P-input>\n        </div>\n      </div>\n      <!-- 资产列表 -->\n      <div class=\"assets-list\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <div class=\"flex-box p-t-40\" v-if=\"loadData\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n          <div v-else>\n            <ul v-if=\"assetsList.length != 0\">\n              <li\n                class=\"\"\n                v-for=\"(assets, index) in assetsList\"\n                :key=\"index\"\n                @click=\"\n                  $router.push({\n                    path: '/assets-details',\n                    query: {\n                      row: JSON.stringify(assets),\n                    },\n                  })\n                \"\n              >\n                <div class=\"coin-msg\">\n                  <div class=\"flex-box\">\n                    <p class=\"coin-icon\">\n                      <img :src=\"assets.logo\" alt=\"\" />\n                    </p>\n                    <p class=\"coin-name\">{{ assets.coin }}</p>\n                  </div>\n                  <p class=\"iconfont icon-youjiantou\" type=\"icon\"></p>\n                </div>\n                <div class=\"amount-msg\">\n                  <div>\n                    <p>可用</p>\n                    <p>{{ visible ? Number(assets.available).toFixed(4) : '&prop;' }}</p>\n                  </div>\n                  <div>\n                    <p>冻结</p>\n                    <p>{{ visible ? Number(assets.freeze).toFixed(4) : '&prop;' }}</p>\n                  </div>\n                  <div>\n                    <p>折合</p>\n                    <p>\n                      <mt-spinner\n                        type=\"triple-bounce\"\n                        color=\"#2CBC94\"\n                        v-if=\"assets.price == undefined\"\n                      ></mt-spinner>\n                      <span v-else\n                        >{{ current.way_symbol\n                        }}{{ visible ? Number(assets.price).toFixed(4) : '&prop;' }}</span\n                      >\n                    </p>\n                  </div>\n                </div>\n              </li>\n            </ul>\n            <p class=\"no-data\" v-else>暂无数据</p>\n          </div>\n        </van-pull-refresh>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getCoinPrice, oneInterPrice } from \"../../../utils/index\";\nimport { mapState } from \"vuex\";\nimport { UserAssets } from \"../../../api/api\";\nexport default {\n  data() {\n    return {\n      operList: [\n        {\n          icon: \"icon-a-bianzu9\",\n          name: \"充币\",\n          url: \"/recharge\",\n        },\n        {\n          icon: \"icon-yinhangka-2\",\n          name: \"交易\",\n          url: \"/index\",\n        },\n        {\n          icon: \"icon-a-35guanggaoxiaoshou\",\n          name: \"发布广告\",\n          url: \"/release\",\n        },\n      ],\n      assetsList: [],\n      assetsSec: [],\n      loading: false,\n      price_btc: null,\n      searchAssets: \"\", //搜索资产\n      loadData: false,//加载动画\n      visible:true,//可视状态\n    };\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    totalPrice() {\n      return Number(this.$route.query.total_price).toFixed(4);\n    },\n  },\n  watch: {\n    searchAssets(val) {\n      const search = () => {\n        this.assetsList = this.assetsSec.filter((e) => {\n          return e.coin.includes(val.toUpperCase());\n        });\n      };\n      val && search();\n      !val && (this.assetsList = this.assetsSec);\n    },\n  },\n  created() {\n    this.interTotalPrice();\n    this.getCoinList();\n  },\n  components: {\n    Navigation: (resolve) =>\n      require([\"../../../components/nav/Navigation\"], resolve),\n  },\n  methods: {\n    onRefresh() {\n      this.getCoinList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    //计算法币资产至BTC\n    async interTotalPrice() {\n      const btc_price = await getCoinPrice(\"BTC\");\n      const price_of_us =\n        parseInt(this.$route.query.total_price) /\n        parseInt(this.current.way_rate);\n      this.price_btc = parseInt(price_of_us) / parseInt(btc_price);\n    },\n    //获取资产列表\n    async getCoinList() {\n      this.loadData = true;\n      const result = await UserAssets();\n      let list_local = [];\n      const { data } = result;\n      for (let i in data) {\n        list_local.push(data[i]);\n      }\n      this.assetsList = list_local;\n      this.assetsList.forEach(async (e) => {\n        this.$set(\n          e,\n          \"price\",\n          await oneInterPrice(this.current.way_rate, e.available, e.coin)\n        );\n      });\n      this.assetsSec = this.assetsList;\n      this.loadData = false;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\n</style>"]}]}