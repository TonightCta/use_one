{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/ad/release.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/ad/release.vue","mtime":1658713050072},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDdXJyZW5jeU9wdGlvbiBmcm9tICJAL2NvbXBvbmVudHMvY3VycmVuY3kiOwppbXBvcnQgQ3VycmVuY3lPcHRpb25Ud28gZnJvbSAiQC9jb21wb25lbnRzL2N1cnJlbmN5L2ZpYXQiOwppbXBvcnQgKiBhcyBhcGkgZnJvbSAiLi4vLi4vYXBpL2FwaSI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ3VycmVuY3lPcHRpb24sCiAgICBDdXJyZW5jeU9wdGlvblR3bywKICAgIFBheVNlbGVjdDogKHJlc29sdmUpID0+CiAgICAgIHJlcXVpcmUoWyIuLi8uLi9jb21wb25lbnRzL3BheS13YXkvcGF5LWNob29zZSJdLCByZXNvbHZlKSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBib29sOiB7CiAgICAgICAgQ3VycmVuY3lPcHRpb246IGZhbHNlLAogICAgICAgIEN1cnJlbmN5T3B0aW9uVHdvOiBmYWxzZSwKICAgICAgICBzZWxlY3RQYXk6IGZhbHNlLAogICAgICB9LAogICAgICBjb2luUHJpY2U6ICItIiwgLy/ms5XluIHku7fmoLwKICAgICAgbG9nbzogIiIsCiAgICAgIGZvcm06IHsKICAgICAgICB0eXBlOiAyLAogICAgICAgIGNvaW46ICIiLAogICAgICAgIGN1cnJlbmN5OiAiIiwKICAgICAgICBhbW91bnQ6ICIiLCAvL+i0reS5sOaVsOmHjwogICAgICAgIHByaWNlX3R5cGU6IDEsCiAgICAgICAgcHJpY2U6ICIiLCAvL+i0reS5sOS7t+agvAogICAgICAgIG1pbl9jdXJyZW5jeTogIiIsIC8v5pyA5bCP6ZmQ6aKdCiAgICAgICAgbWF4X2N1cnJlbmN5OiAiIiwgLy/mnIDlpKfpmZDpop0KICAgICAgICBwYXltZW50czogIiIsCiAgICAgICAgY29tbWVudDogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpea0u+WKqOWQjeensCIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyBtaW46IDMsIG1heDogNSwgbWVzc2FnZTogIumVv+W6puWcqCAzIOWIsCA1IOS4quWtl+espiIsIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgICAgeyB2YWxpZGF0b3I6IG5ldyBSZWdFeHAoKS5wYXNzd29yZCwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgICAgY29pbnNQcmljZTogW10sIC8v5biB56eN6KGM5oOF5Lu35qC8CiAgICAgIHBheVdheTogbnVsbCwgLy/mlK/ku5jmlrnlvI8KICAgICAgcGF5V2F5SUQ6IG51bGwsIC8v5pSv5LuYSUQKICAgICAgbWF4UHJpY2U6IG51bGwsIC8v5Y2V5Lu35pyA5L2O6ZmQ6aKdCiAgICAgIG1pblByaWNlOiBudWxsLCAvL+WNleS7t+acgOmrmOS7t+agvAogICAgICBtaW5BZHZOdW1iZXI6IDEsIC8v5pyA5bCP6ZmQ6aKd5Lqk5piT6YePCiAgICAgIG1pbkJ1eVByaWNlOjEsLy/mnIDlsI/pmZDpop3ms5XluIEKICAgICAgY29pblJvdzoge30sCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGFkdl9zaWNrKCkgewogICAgICByZXR1cm4gdGhpcy5jb2luUHJpY2UgIT0gIi0iCiAgICAgICAgPyB0aGlzLm1pblByaWNlLnRvRml4ZWQoNCkgKyAiLSIgKyB0aGlzLm1heFByaWNlLnRvRml4ZWQoNCkKICAgICAgICA6ICLovpPlhaXkuqTmmJPku7fmoLwiOwogICAgfSwKICAgIGNoYW5nZUlEKCkgewogICAgICByZXR1cm4gdGhpcy4kcm91dGUucXVlcnkuaWQ7CiAgICB9LAogICAgbWF4QnV5UHJpY2UoKXsKICAgICAgcmV0dXJuIE51bWJlcih0aGlzLmZvcm0uYW1vdW50KSAqIE51bWJlcih0aGlzLmZvcm0ucHJpY2UpCiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgLy8gdGhpcy5nZXRDb2luc1ByaWNlKCk7CiAgICB0aGlzLmNoYW5nZUlEICYmIHRoaXMuZ2V0QWR2TXNnKCk7CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLy/ojrflj5blub/lkYrkv6Hmga8KICAgIGFzeW5jIGdldEFkdk1zZygpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYXBpLkFkdkRldGFpbCh0aGlzLmNoYW5nZUlEKTsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXN1bHQ7CiAgICAgIHRoaXMuZm9ybSA9IHsKICAgICAgICB0eXBlOiBkYXRhLmFkdl90eXBlLAogICAgICAgIGNvaW46IGRhdGEuY29pbiwKICAgICAgICBjdXJyZW5jeTogZGF0YS5jdXJyZW5jeSwKICAgICAgICBhbW91bnQ6IGRhdGEuYW1vdW50LCAvL+i0reS5sOaVsOmHjwogICAgICAgIHByaWNlX3R5cGU6IDEsCiAgICAgICAgcHJpY2U6IGRhdGEucHJpY2UsIC8v6LSt5Lmw5Lu35qC8CiAgICAgICAgbWluX2N1cnJlbmN5OiBkYXRhLm1pbl9jdXJyZW5jeSwgLy/mnIDlsI/pmZDpop0KICAgICAgICBtYXhfY3VycmVuY3k6IGRhdGEubWF4X2N1cnJlbmN5LCAvL+acgOWkp+mZkOminQogICAgICAgIHBheW1lbnRzOmRhdGEucGF5bWVudHNbMF0uaWQsCiAgICAgICAgY29tbWVudDogZGF0YT8uY29tbWVudCwKICAgICAgfTsKICAgICAgdGhpcy5wYXlXYXkgPSBkYXRhLnBheW1lbnRzWzBdLm5hbWU7CiAgICAgIHRoaXMucGF5V2F5SUQgPSBkYXRhLnBheW1lbnRzWzBdLmlkOwogICAgICBjb25zdCBjb2lucyA9IGF3YWl0IGFwaS5Db2luTGlzdCgpOwogICAgICBjb2lucy5kYXRhLmNvaW5zLmZvckVhY2goZSA9PiB7CiAgICAgICAgaWYoZGF0YS5jb2luID09IGUuY29pbil7CiAgICAgICAgICB0aGlzLm9uQ3VycmVuY3koZSkKICAgICAgICB9CiAgICAgIH0pCiAgICAgIHRoaXMuZ2V0Q29pbnNQcmljZSgpOwogICAgfSwKICAgIHRhYnModikgewogICAgICB0aGlzLmZvcm0udHlwZSA9IHY7CiAgICB9LAogICAgc2VsZWN0Q2FyZChfY2FyZCkgewogICAgICB0aGlzLnBheVdheSA9IF9jYXJkLm5hbWU7CiAgICAgIHRoaXMucGF5V2F5SUQgPSBfY2FyZC5pZDsKICAgIH0sCiAgICBvbkN1cnJlbmN5KHJvdykgewogICAgICB0aGlzLmNvaW5Sb3cgPSByb3c7CiAgICAgIHRoaXMubWluQWR2TnVtYmVyID0gcm93LmFkdl9taW47CiAgICAgIHRoaXMuZm9ybS5jb2luID0gcm93LmNvaW47CiAgICAgIHRoaXMubG9nbyA9IHJvdy5sb2dvOwogICAgICB0aGlzLmdldENvaW5zUHJpY2UoKTsKICAgIH0sCiAgICBvbkN1cnJlbmN5VHdvKHJvdykgewogICAgICB0aGlzLmZvcm0uY3VycmVuY3kgPSByb3cuY29pbjsKICAgICAgdGhpcy5nZXRDb2luc1ByaWNlKCk7CiAgICB9LAogICAgLy/ojrflj5bluIHnp43ooYzmg4UKICAgIGFzeW5jIGdldENvaW5zUHJpY2UoKSB7CiAgICAgIGlmICghdGhpcy5mb3JtLmNvaW4gfHwgIXRoaXMuZm9ybS5jdXJyZW5jeSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBjdXIgPSBhd2FpdCBhcGkuRmFpdFJhdGUodGhpcy5mb3JtLmN1cnJlbmN5KTsKICAgICAgbGV0IHVQcmljZTsKICAgICAgaWYgKHRoaXMuZm9ybS5jb2luID09ICJVU0RUIikgewogICAgICAgIGNvbnN0IHUgPSBhd2FpdCBhcGkuRmFpdFJhdGUoIlVTRCIpOwogICAgICAgIHVQcmljZSA9IHUuZGF0YS5wcmljZTsKICAgICAgfQogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcGkuQ29pblByaWNlKCk7CiAgICAgIHRoaXMuY29pblByaWNlID0KICAgICAgICBjdXIuZGF0YS5wcmljZSAqCiAgICAgICAgKHRoaXMuZm9ybS5jb2luID09ICJVU0RUIgogICAgICAgICAgPyBOdW1iZXIodVByaWNlKS50b0ZpeGVkKDQpCiAgICAgICAgICA6IE51bWJlcihPYmplY3QocmVzdWx0LmRhdGEubGlzdClbdGhpcy5mb3JtLmNvaW5dLnByaWNlKS50b0ZpeGVkKDQpKTsKICAgICAgdGhpcy5tYXhQcmljZSA9CiAgICAgICAgdGhpcy5jb2luUHJpY2UgKiAodGhpcy5jb2luUm93LmFkdl9wcmljZV9tYXhfcGVyY2VudCAvIDEwMCkgKwogICAgICAgIHRoaXMuY29pblByaWNlOwogICAgICB0aGlzLm1pblByaWNlID0KICAgICAgICB0aGlzLmNvaW5QcmljZSAqICh0aGlzLmNvaW5Sb3cuYWR2X3ByaWNlX21pbl9wZXJjZW50IC8gMTAwKSArCiAgICAgICAgdGhpcy5jb2luUHJpY2U7CiAgICB9LAogICAgLy/lj5HluIPlub/lkYoKICAgIGFzeW5jIG9uU3VibWl0KF90eXBlKSB7CiAgICAgIC8qKgogICAgICAgKiBAcGFyYW0gX3R5cGUgPSAxICYg5Y+R5biDCiAgICAgICAqIEBwYXJhbSBfdHlwZSA9IDIgJiDkv67mlLkKICAgICAgKi8KICAgICAgaWYgKCF0aGlzLmZvcm0uYW1vdW50KSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIuivt+i+k+WFpei0reS5sOaVsOmHjyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZih0aGlzLmZvcm0uYW1vdW50IDwgdGhpcy5taW5BZHZOdW1iZXIpewogICAgICAgIHRoaXMuJHRvYXN0KGDor6XluIHnp43mnIDlsI/kuqTmmJPmlbDph4/kuLoke3RoaXMubWluQWR2TnVtYmVyfWApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZm9ybS5wcmljZSkgewogICAgICAgIHRoaXMuJHRvYXN0KCLor7fovpPlhaXkuqTmmJPku7fmoLwiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZm9ybS5wcmljZSA8IHRoaXMubWluUHJpY2UgfHwgdGhpcy5mb3JtLnByaWNlID4gdGhpcy5tYXhQcmljZSkgewogICAgICAgIHRoaXMuJHRvYXN0KGDor7forr7nva4ke3RoaXMubWluUHJpY2V9LSR7dGhpcy5tYXhQcmljZX3ljLrpl7TnmoTku7fmoLxgKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmZvcm0ubWluX2N1cnJlbmN5KSB7CiAgICAgICAgdGhpcy4kdG9hc3QoIuivt+i+k+WFpeacgOWwj+mZkOminSIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5mb3JtLm1pbl9jdXJyZW5jeSA8IHRoaXMubWluQnV5UHJpY2UpIHsKICAgICAgICB0aGlzLiR0b2FzdChg5pyA5bCP5Y2V56yU6ZmQ6aKd5Li6MWApOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZm9ybS5tYXhfY3VycmVuY3kpIHsKICAgICAgICB0aGlzLiR0b2FzdCgi6K+36L6T5YWl5pyA5aSn6ZmQ6aKdIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmKHRoaXMuZm9ybS5tYXhfY3VycmVuY3kgPiB0aGlzLm1heEJ1eVByaWNlKXsKICAgICAgICB0aGlzLiR0b2FzdCgn6LaF5Ye65pyA5aSn6ZmQ6aKdJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghdGhpcy5wYXlXYXlJRCkgewogICAgICAgIHRoaXMuJHRvYXN0KCLor7fpgInmi6nku5jmrL7mlrnlvI8iKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIHR5cGU6IHRoaXMuZm9ybS50eXBlLAogICAgICAgIGNvaW46IHRoaXMuZm9ybS5jb2luLAogICAgICAgIGN1cnJlbmN5OiB0aGlzLmZvcm0uY3VycmVuY3ksCiAgICAgICAgYW1vdW50OiB0aGlzLmZvcm0uYW1vdW50LAogICAgICAgIHByaWNlX3R5cGU6IDEsCiAgICAgICAgcHJpY2U6IHRoaXMuZm9ybS5wcmljZSwKICAgICAgICBtaW5fY3VycmVuY3k6IHRoaXMuZm9ybS5taW5fY3VycmVuY3ksCiAgICAgICAgbWF4X2N1cnJlbmN5OiB0aGlzLmZvcm0ubWF4X2N1cnJlbmN5LAogICAgICAgIHBheW1lbnRzOiBTdHJpbmcodGhpcy5wYXlXYXlJRCksCiAgICAgICAgY29tbWVudDogdGhpcy5jb21tZW50LAogICAgICAgIGlkOnRoaXMuY2hhbmdlSUQKICAgICAgfTsKICAgICAgY29uc3QgcmVzdWx0ID0gX3R5cGUgPT0gMiA/IGF3YWl0IGFwaS5BZHZDaGFuZ2UocGFyYW1zKSA6ICBhd2FpdCBhcGkuUmVsZWFzZUFkdihwYXJhbXMpOwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICBjb25zdCB7IGNvZGUgfSA9IHJlc3VsdDsKICAgICAgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfTsKICAgICAgdGhpcy4kdG9hc3QoX3R5cGUgPT0gMiA/ICfkv67mlLnmiJDlip8nIDogJ+WPkeW4g+aIkOWKnycpCiAgICAgIHRoaXMuJHJvdXRlci5nbygtMSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["release.vue"],"names":[],"mappings":";AA2LA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"release.vue","sourceRoot":"src/views/ad","sourcesContent":["<!--\n * @Name: 发布广告\n * @Date: 2022-07-01 14:09:15\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 09:46:19\n-->\n<template>\n  <P-main>\n    <Navigation>\n      <template #title>\n        <div class=\"nav-title\">\n          <div\n            class=\"buy\"\n            :class=\"[form.type == 2 ? 'active' : '']\"\n            @click=\"tabs(2)\"\n          >\n            购买\n          </div>\n          <div\n            class=\"sell\"\n            :class=\"[form.type == 1 ? 'active' : '']\"\n            @click=\"tabs(1)\"\n          >\n            出售\n          </div>\n        </div>\n      </template>\n    </Navigation>\n    <P-body type=\"Fei\">\n      <el-form\n        :model=\"form\"\n        ref=\"form\"\n        :rules=\"rules\"\n        label-width=\"130px\"\n        class=\"main\"\n        label-position=\"left\"\n      >\n        <van-cell-group :border=\"false\" inset>\n          <van-cell is-link @click=\"bool.CurrencyOption = true\">\n            <template #icon>\n              <van-image\n                width=\"26\"\n                height=\"26\"\n                :src=\"logo\"\n                v-if=\"logo\"\n                round\n                lazy-load\n                class=\"m-5-r\"\n              />\n            </template>\n            <template #title>\n              {{ form.coin == \"\" ? \"请选择币种类型\" : form.coin }}\n            </template>\n          </van-cell>\n        </van-cell-group>\n\n        <van-cell-group inset class=\"m-12-t-i\">\n          <van-field\n            @click=\"bool.CurrencyOptionTwo = true\"\n            v-model=\"form.currency\"\n            label=\"法币类型\"\n            label-width=\"60px\"\n            is-link\n            placeholder=\"显示清除图标\"\n            :border=\"false\"\n          >\n            <template #input>{{ form.currency }}</template>\n          </van-field>\n          <van-field\n            v-model=\"form.amount\"\n            :label=\"`${form.type == 2 ? '购买' : '出售'}数量`\"\n            label-width=\"60px\"\n            :placeholder=\"`请输入${form.type == 2 ? '购买' : '出售'}数量(${minAdvNumber}起)`\"\n            :border=\"false\"\n          >\n            <template #extra>{{ form.coin }}</template>\n          </van-field>\n          <van-field\n            label=\"固定价格\"\n            label-width=\"60px\"\n            placeholder=\"固定价格\"\n            :border=\"false\"\n          >\n            <template #input>固定价格</template>\n          </van-field>\n          <van-field\n            v-model=\"form.price\"\n            label=\"单价\"\n            label-width=\"60px\"\n            :placeholder=\"adv_sick\"\n            :border=\"false\"\n          >\n            <template #extra>{{ form.currency }}</template>\n          </van-field>\n          <van-cell>\n            <template #title>\n              <div class=\"ui-flex-left\">\n                <div class=\"m-5-r\">\n                  当前参考价格：{{\n                    coinPrice != \"-\" ? Number(coinPrice).toFixed(4) : coinPrice\n                  }}\n                  {{ form.currency }}\n                </div>\n                <B-svg name=\"shuaxin-2\" width=\"12px\" @click=\"getCoinsPrice\" />\n              </div>\n            </template>\n          </van-cell>\n        </van-cell-group>\n\n        <van-cell-group inset class=\"m-12-t-i p-10-tb\">\n          <div class=\"p-16-lr\">\n            <div class=\"ui-flex-left\">\n              <div class=\"m-5-r size-12\">单笔限额</div>\n              <B-svg name=\"wenhao\" class=\"wenhao\" width=\"12px\" />\n            </div>\n          </div>\n          <div class=\"ui-flex-center m-8-t p-16-lr\">\n            <div>\n              <van-field\n                class=\"input\"\n                v-model=\"form.min_currency\"\n                label-width=\"60px\"\n                :placeholder=\"'最小' + minBuyPrice\"\n                :border=\"false\"\n              >\n                <template #extra>{{ form.currency }}</template>\n              </van-field>\n            </div>\n            <div class=\"m-10-lr size-12\">~</div>\n            <div>\n              <van-field\n                class=\"input\"\n                v-model=\"form.max_currency\"\n                label-width=\"60px\"\n                :placeholder=\"'最大' + maxBuyPrice.toFixed(2)\"\n                :border=\"false\"\n              >\n                <template #extra>{{ form.currency }}</template>\n              </van-field>\n            </div>\n          </div>\n        </van-cell-group>\n\n        <van-cell-group :border=\"false\" inset class=\"m-12-t-i\">\n          <van-cell title=\"付款方式\" is-link @click=\"bool.selectPay = true\">\n            {{ payWay ? payWay : \"至少添加一种方式\" }}\n          </van-cell>\n        </van-cell-group>\n\n        <van-cell-group inset class=\"m-12-t-i\">\n          <van-field\n            v-model=\"form.comment\"\n            rows=\"2\"\n            autosize\n            type=\"textarea\"\n            maxlength=\"50\"\n            placeholder=\"可输入50字以内的备注信息（选填）\"\n          />\n        </van-cell-group>\n\n        <ul class=\"ui-list-dian\">\n          <li>每个币种只能同时发布上架一个出售和购买广告</li>\n          <li>广告发布后，如您重新编辑以下内容，首页会重新排序</li>\n          <li>每个广告有效时间为7天,到期未完成将自动下架</li>\n          <li>\n            广告每成交一笔，需支付广告费率。出售资产时，将从您的法币账户对应的币种资产中额外扣除。买入资产时将从您购买的资产中扣除。\n          </li>\n        </ul>\n      </el-form>\n      <div class=\"h-56\"></div>\n    </P-body>\n    <div class=\"footer\">\n      <P-button type=\"primary\" class=\"btn-primary h-44-i\" @click=\"onSubmit(changeID ? 2 : 1)\"\n        >{{ changeID ? \"修改\" : \"发布\" }}广告</P-button\n      >\n    </div>\n    <Currency-Option v-model=\"bool.CurrencyOption\" @click=\"onCurrency\" />\n    <Currency-Option-Two\n      v-model=\"bool.CurrencyOptionTwo\"\n      @click=\"onCurrencyTwo\"\n    />\n    <!-- 付款选择 -->\n    <PaySelect v-model=\"bool.selectPay\" @click=\"selectCard\" />\n  </P-main>\n</template>\n\n<script>\nimport CurrencyOption from \"@/components/currency\";\nimport CurrencyOptionTwo from \"@/components/currency/fiat\";\nimport * as api from \"../../api/api\";\n\nexport default {\n  components: {\n    CurrencyOption,\n    CurrencyOptionTwo,\n    PaySelect: (resolve) =>\n      require([\"../../components/pay-way/pay-choose\"], resolve),\n  },\n  data() {\n    return {\n      bool: {\n        CurrencyOption: false,\n        CurrencyOptionTwo: false,\n        selectPay: false,\n      },\n      coinPrice: \"-\", //法币价格\n      logo: \"\",\n      form: {\n        type: 2,\n        coin: \"\",\n        currency: \"\",\n        amount: \"\", //购买数量\n        price_type: 1,\n        price: \"\", //购买价格\n        min_currency: \"\", //最小限额\n        max_currency: \"\", //最大限额\n        payments: \"\",\n        comment: \"\",\n      },\n      rules: {\n        name: [\n          { required: true, message: \"请输入活动名称\", trigger: \"blur\" },\n          { min: 3, max: 5, message: \"长度在 3 到 5 个字符\", trigger: \"blur\" },\n          { validator: new RegExp().password, trigger: \"blur\" },\n        ],\n      },\n      coinsPrice: [], //币种行情价格\n      payWay: null, //支付方式\n      payWayID: null, //支付ID\n      maxPrice: null, //单价最低限额\n      minPrice: null, //单价最高价格\n      minAdvNumber: 1, //最小限额交易量\n      minBuyPrice:1,//最小限额法币\n      coinRow: {},\n    };\n  },\n  computed: {\n    adv_sick() {\n      return this.coinPrice != \"-\"\n        ? this.minPrice.toFixed(4) + \"-\" + this.maxPrice.toFixed(4)\n        : \"输入交易价格\";\n    },\n    changeID() {\n      return this.$route.query.id;\n    },\n    maxBuyPrice(){\n      return Number(this.form.amount) * Number(this.form.price)\n    }\n  },\n  created() {\n    // this.getCoinsPrice();\n    this.changeID && this.getAdvMsg();\n  },\n  mounted() {},\n  methods: {\n    //获取广告信息\n    async getAdvMsg() {\n      const result = await api.AdvDetail(this.changeID);\n      console.log(result);\n      const { data } = result;\n      this.form = {\n        type: data.adv_type,\n        coin: data.coin,\n        currency: data.currency,\n        amount: data.amount, //购买数量\n        price_type: 1,\n        price: data.price, //购买价格\n        min_currency: data.min_currency, //最小限额\n        max_currency: data.max_currency, //最大限额\n        payments:data.payments[0].id,\n        comment: data?.comment,\n      };\n      this.payWay = data.payments[0].name;\n      this.payWayID = data.payments[0].id;\n      const coins = await api.CoinList();\n      coins.data.coins.forEach(e => {\n        if(data.coin == e.coin){\n          this.onCurrency(e)\n        }\n      })\n      this.getCoinsPrice();\n    },\n    tabs(v) {\n      this.form.type = v;\n    },\n    selectCard(_card) {\n      this.payWay = _card.name;\n      this.payWayID = _card.id;\n    },\n    onCurrency(row) {\n      this.coinRow = row;\n      this.minAdvNumber = row.adv_min;\n      this.form.coin = row.coin;\n      this.logo = row.logo;\n      this.getCoinsPrice();\n    },\n    onCurrencyTwo(row) {\n      this.form.currency = row.coin;\n      this.getCoinsPrice();\n    },\n    //获取币种行情\n    async getCoinsPrice() {\n      if (!this.form.coin || !this.form.currency) {\n        return;\n      }\n      const cur = await api.FaitRate(this.form.currency);\n      let uPrice;\n      if (this.form.coin == \"USDT\") {\n        const u = await api.FaitRate(\"USD\");\n        uPrice = u.data.price;\n      }\n      const result = await api.CoinPrice();\n      this.coinPrice =\n        cur.data.price *\n        (this.form.coin == \"USDT\"\n          ? Number(uPrice).toFixed(4)\n          : Number(Object(result.data.list)[this.form.coin].price).toFixed(4));\n      this.maxPrice =\n        this.coinPrice * (this.coinRow.adv_price_max_percent / 100) +\n        this.coinPrice;\n      this.minPrice =\n        this.coinPrice * (this.coinRow.adv_price_min_percent / 100) +\n        this.coinPrice;\n    },\n    //发布广告\n    async onSubmit(_type) {\n      /**\n       * @param _type = 1 & 发布\n       * @param _type = 2 & 修改\n      */\n      if (!this.form.amount) {\n        this.$toast(\"请输入购买数量\");\n        return;\n      }\n      if(this.form.amount < this.minAdvNumber){\n        this.$toast(`该币种最小交易数量为${this.minAdvNumber}`);\n        return;\n      }\n      if (!this.form.price) {\n        this.$toast(\"请输入交易价格\");\n        return;\n      }\n      if (this.form.price < this.minPrice || this.form.price > this.maxPrice) {\n        this.$toast(`请设置${this.minPrice}-${this.maxPrice}区间的价格`);\n        return;\n      }\n      if (!this.form.min_currency) {\n        this.$toast(\"请输入最小限额\");\n        return;\n      }\n      if (this.form.min_currency < this.minBuyPrice) {\n        this.$toast(`最小单笔限额为1`);\n        return;\n      }\n      if (!this.form.max_currency) {\n        this.$toast(\"请输入最大限额\");\n        return;\n      }\n      if(this.form.max_currency > this.maxBuyPrice){\n        this.$toast('超出最大限额');\n        return;\n      }\n      if (!this.payWayID) {\n        this.$toast(\"请选择付款方式\");\n        return;\n      }\n      const params = {\n        type: this.form.type,\n        coin: this.form.coin,\n        currency: this.form.currency,\n        amount: this.form.amount,\n        price_type: 1,\n        price: this.form.price,\n        min_currency: this.form.min_currency,\n        max_currency: this.form.max_currency,\n        payments: String(this.payWayID),\n        comment: this.comment,\n        id:this.changeID\n      };\n      const result = _type == 2 ? await api.AdvChange(params) :  await api.ReleaseAdv(params);\n      console.log(result);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      };\n      this.$toast(_type == 2 ? '修改成功' : '发布成功')\n      this.$router.go(-1);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.nav-title {\n  display: flex;\n  .buy,\n  .sell {\n    width: 91px;\n    height: 30px;\n    line-height: 30px;\n    background-size: cover;\n    font-size: 16px;\n    font-weight: 400;\n    color: #666666;\n  }\n\n  .buy {\n    margin-left: 7px;\n    background-image: url(\"~@/assets/tabs-a1.png\");\n    &.active {\n      color: #ffffff;\n      background-image: url(\"~@/assets/tabs-a.png\");\n    }\n  }\n  .sell {\n    margin-left: -7px;\n    background-image: url(\"~@/assets/tabs-b.png\");\n    &.active {\n      color: #ffffff;\n      background-image: url(\"~@/assets/tabs-b1.png\");\n    }\n  }\n}\n\n.body {\n  .USDT {\n    width: 19px;\n    height: 19px;\n    margin-right: 5px;\n    margin-top: 1px;\n  }\n\n  .wenhao {\n    margin-top: -1px;\n  }\n\n  .input {\n    border-radius: 4px;\n    border: 1px solid #e6e6e6;\n    padding: 7px 10px;\n    color: #999999;\n  }\n\n  .ui-list-dian {\n    margin-top: 12px;\n    padding: 12px;\n    background: #e6e6e6;\n    border-radius: 4px;\n    li {\n      margin-bottom: 3px;\n      font-size: 12px;\n      font-weight: 400;\n      color: #999999;\n    }\n  }\n}\n\n.footer {\n  position: fixed;\n  bottom: 0px;\n  left: 0px;\n  right: 0px;\n  display: flex;\n  background: #fff;\n  padding: 6px 12px;\n}\n</style>"]}]}