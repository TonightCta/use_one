{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToBuy.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/home/components/IWantToBuy.vue","mtime":1658713050073},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBIZW1vTGlzdCBmcm9tICJAL2NvbXBvbmVudHMvaGVtby1saXN0IjsKaW1wb3J0IEJ0bkJ1eWluZ0FuZFNlbGxpbmcgZnJvbSAiLi9CdG5CdXlpbmdBbmRTZWxsaW5nIjsKaW1wb3J0IE5lZWRBdXRoIGZyb20gIi4vbmVlZF9hdXRoIjsKaW1wb3J0IHsgQWR2VHJhZGVMaXN0LCBUcmFkZVZlcmlmeSB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwppbXBvcnQgSW5maW5pdGVMb2FkaW5nIGZyb20gInZ1ZS1pbmZpbml0ZS1sb2FkaW5nIjsKaW1wb3J0IHsgbWFwU3RhdGUgfSBmcm9tICJ2dWV4IjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEhlbW9MaXN0LAogICAgQnRuQnV5aW5nQW5kU2VsbGluZywKICAgIE5lZWRBdXRoLAogICAgSW5maW5pdGVMb2FkaW5nLAogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6ICIiLAogICAgfSwKICAgIGZpbHRlckFtb3VudDogewogICAgICB0eXBlOiBbU3RyaW5nLCBOdW1iZXJdLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIGZpbHRlck1lbnRzOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE51bWJlcl0sCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJvb2w6IHsKICAgICAgICBCdXlpbmdBbmRTZWxsaW5nOiBmYWxzZSwKICAgICAgICBkaWFsb2c6IGZhbHNlLAogICAgICAgIGlzX25lZWRfYXV0aDogZmFsc2UsCiAgICAgIH0sCiAgICAgIHRlc3Q6IHRydWUsCiAgICAgIGxpc3Q6IFtdLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgZmluaXNoZWQ6IGZhbHNlLCAvL+aYr+WQpuW3suWKoOi9veWujOaIkO+8jOWKoOi9veWujOaIkOWQjuS4jeWGjeinpuWPkWxvYWTkuovku7YKICAgICAgcmVmcmVzaGluZzogZmFsc2UsCiAgICAgIHBhZ2U6IDAsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBsaXN0OiBbXSwKICAgICAgcGxhY2VNc2c6IHt9LCAvL+S4i+WNleS/oeaBrwogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICAvLyB2YWx1ZSh2YWwpewogICAgLy8gICBjb25zb2xlLmxvZyh2YWwpCiAgICAvLyB9CiAgICBmaWx0ZXJBbW91bnQodmFsKSB7CiAgICAgIHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAogICAgZmlsdGVyTWVudHModmFsKSB7CiAgICAgIHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnNvbGUubG9nKHZhbCk7CiAgICB9LAogICAgY3VycmVuY3koX3ZhbCkgewogICAgICB0aGlzLm9uTGlzdCgpOwogICAgfSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyB0aGlzLm9uTGlzdCgpOwogICAgLy8gY29uc29sZS5sb2codGhpcy5maWx0ZXJBbW91bnQpCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWyJjdXJyZW50Il0pLAogICAgY3VycmVuY3koKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQuYW1vdW50X3dheTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICAvL+iOt+WPluS6pOaYk+WIl+ihqAogICAgYXN5bmMgb25MaXN0KCkgewogICAgICBjb25zb2xlLmxvZygxKTsKICAgICAgY29uc29sZS5sb2codGhpcy52YWx1ZSk7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICB0eXBlOiAxLAogICAgICAgIHBhZ2U6IHRoaXMucGFnZSwKICAgICAgICBsaW1pdDogMTAsCiAgICAgICAgc2VhcmNoOiB7CiAgICAgICAgICBjdXJyZW5jeTogdGhpcy5jdXJyZW50LmFtb3VudF93YXksCiAgICAgICAgICBjb2luOiB0aGlzLnZhbHVlLAogICAgICAgICAgcGF5bWVudHM6IHRoaXMuZmlsdGVyTWVudHMsCiAgICAgICAgICBhbW91bnQ6IHRoaXMuZmlsdGVyQW1vdW50LAogICAgICAgIH0sCiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IEFkdlRyYWRlTGlzdChwYXJhbXMpOwogICAgICBjb25zdCB7IGRhdGEgfSA9IHJlc3VsdDsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgdGhpcy5saXN0ID0gZGF0YS5saXN0OwogICAgICBjb25zb2xlLmxvZyh0aGlzLmxpc3QpOwogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIC8vIOWKoOi9veabtOWkmgogICAgYXN5bmMgbG9hZE1vcmVFdmVudCgkc3RhdGUpIHsKICAgICAgdGhpcy5wYWdlICs9IDE7CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub25MaXN0KCk7CiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzdWx0OwogICAgICBpZiAodGhpcy5saXN0Lmxlbmd0aCA9PSBkYXRhLnRvdGFsKSB7CiAgICAgICAgJHN0YXRlLmNvbXBsZXRlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgJHN0YXRlLmxvYWRlZCgpOwogICAgICB9CiAgICB9LAogICAgLy/liLfmlrAKICAgIG9uUmVmcmVzaCgpIHsKICAgICAgdGhpcy5wYWdlID0gMDsKICAgICAgdGhpcy5vbkxpc3QoKTsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgIH0sIDEwMDApOwogICAgfSwKICAgIC8v54K55Ye76LSt5LmwCiAgICBhc3luYyBidG5DbGljayhyb3cpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgVHJhZGVWZXJpZnkoeyB0eXBlOiAyLCBhZHZJZDogcm93LmlkIH0pOwogICAgICBjb25zb2xlLmxvZyhyZXN1bHQpOwogICAgICBjb25zdCB7IGNvZGUsIGRhdGEgfSA9IHJlc3VsdDsKICAgICAgaWYgKGNvZGUgPT0gMTAwMDE2KSB7CiAgICAgICAgdGhpcy5ib29sLmRpYWxvZyA9IHRydWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9IGVsc2UgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoZGF0YS5ydWxlcy5reWMucmVxdWlyZWQpIHsKICAgICAgICBpZiAoIWRhdGEucnVsZXMua3ljLnZhbCkgewogICAgICAgICAgdGhpcy4kdG9hc3QoIuaCqOWwmuacquWujOaIkOWunuWQjeiupOivgSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZGF0YS5ydWxlcy5wYXlfcGFzc3dvcmQucmVxdWlyZWQpIHsKICAgICAgICBpZiAoIWRhdGEucnVsZXMucGF5X3Bhc3N3b3JkLnZhbCkgewogICAgICAgICAgdGhpcy4kdG9hc3QoIuaCqOWwmuacquiuvue9ruS6pOaYk+WvhueggSIpOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy5wbGFjZU1zZyA9IHJvdzsKICAgICAgY29uc29sZS5sb2codGhpcy5wbGFjZU1zZyk7CiAgICAgIHRoaXMuYm9vbC5CdXlpbmdBbmRTZWxsaW5nID0gdHJ1ZTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["IWantToBuy.vue"],"names":[],"mappings":";AA8DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"IWantToBuy.vue","sourceRoot":"src/views/home/components","sourcesContent":["<!--\n * @Name: 我要买\n * @Date: 2022-06-17 16:47:03\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 20:12:13\n-->\n<template>\n  <div>\n    <!-- <P-list ref=\"P-list\" :footer=\"true\" @refresh=\"onRefresh\" @load=\"onList\">\n      <template v-slot=\"{ row, index }\">\n        <template v-if=\"index == 0\">\n          \n        </template>\n        <template v-else>\n          <Hemo-list\n            :name=\"row.title\"\n            :Price=\"row.Price\"\n            @btnClick=\"btnClick(row)\"\n          ></Hemo-list>\n        </template>\n      </template>\n    </P-list> -->\n    <div class=\"c2c-list\">\n      <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n        <ul>\n          <li v-for=\"(row, index) in list\" :key=\"index\">\n            <Hemo-list :row=\"row\" @btnClick=\"btnClick(row)\"></Hemo-list>\n          </li>\n        </ul>\n        <infinite-loading\n          spinner=\"spiral\"\n          @infinite=\"loadMoreEvent\"\n          :distance=\"0\"\n        >\n          <div slot=\"spinner\" class=\"p-t-40\">\n            <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n          </div>\n        </infinite-loading>\n      </van-pull-refresh>\n    </div>\n    <BtnBuyingAndSelling\n      v-model=\"bool.BuyingAndSelling\"\n      :currency=\"value\"\n      :row=\"placeMsg\"\n    />\n    <P-alert v-model=\"bool.dialog\">\n      <div class=\"m-20-b size16 h-25-l\">广告已被商家修改，该广告已失效</div>\n      <P-button\n        type=\"primary\"\n        class=\"btn-primary h-44-i size-14-i\"\n        @click=\"\n          bool.dialog = false;\n          bool.is_need_auth = true;\n        \"\n        >好的</P-button\n      >\n    </P-alert>\n    <!-- <NeedAuth v-model=\"bool.is_need_auth\"/> -->\n  </div>\n</template>\n\n<script>\nimport HemoList from \"@/components/hemo-list\";\nimport BtnBuyingAndSelling from \"./BtnBuyingAndSelling\";\nimport NeedAuth from \"./need_auth\";\nimport { AdvTradeList, TradeVerify } from \"../../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: {\n    HemoList,\n    BtnBuyingAndSelling,\n    NeedAuth,\n    InfiniteLoading,\n  },\n  props: {\n    value: {\n      type: [String, Number],\n      default: \"\",\n    },\n    filterAmount: {\n      type: [String, Number],\n      default: null,\n    },\n    filterMents: {\n      type: [String, Number],\n      default: null,\n    },\n  },\n  data() {\n    return {\n      bool: {\n        BuyingAndSelling: false,\n        dialog: false,\n        is_need_auth: false,\n      },\n      test: true,\n      list: [],\n      loading: false,\n      finished: false, //是否已加载完成，加载完成后不再触发load事件\n      refreshing: false,\n      page: 0,\n      loading: false,\n      list: [],\n      placeMsg: {}, //下单信息\n    };\n  },\n  watch: {\n    // value(val){\n    //   console.log(val)\n    // }\n    filterAmount(val) {\n      this.onList();\n      console.log(val);\n    },\n    filterMents(val) {\n      this.onList();\n      console.log(val);\n    },\n    currency(_val) {\n      this.onList();\n    },\n  },\n  created() {\n    // this.onList();\n    // console.log(this.filterAmount)\n  },\n  computed: {\n    ...mapState([\"current\"]),\n    currency() {\n      return this.current.amount_way;\n    },\n  },\n  methods: {\n    //获取交易列表\n    async onList() {\n      console.log(1);\n      console.log(this.value);\n      const params = {\n        type: 1,\n        page: this.page,\n        limit: 10,\n        search: {\n          currency: this.current.amount_way,\n          coin: this.value,\n          payments: this.filterMents,\n          amount: this.filterAmount,\n        },\n      };\n      const result = await AdvTradeList(params);\n      const { data } = result;\n      console.log(result);\n      this.list = data.list;\n      console.log(this.list);\n      return result;\n    },\n    // 加载更多\n    async loadMoreEvent($state) {\n      this.page += 1;\n      const result = await this.onList();\n      const { data } = result;\n      if (this.list.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    //刷新\n    onRefresh() {\n      this.page = 0;\n      this.onList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 1000);\n    },\n    //点击购买\n    async btnClick(row) {\n      const result = await TradeVerify({ type: 2, advId: row.id });\n      console.log(result);\n      const { code, data } = result;\n      if (code == 100016) {\n        this.bool.dialog = true;\n        return;\n      } else if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      if (data.rules.kyc.required) {\n        if (!data.rules.kyc.val) {\n          this.$toast(\"您尚未完成实名认证\");\n          return;\n        }\n      }\n      if (data.rules.pay_password.required) {\n        if (!data.rules.pay_password.val) {\n          this.$toast(\"您尚未设置交易密码\");\n          return;\n        }\n      };\n      this.placeMsg = row;\n      console.log(this.placeMsg);\n      this.bool.BuyingAndSelling = true;\n    },\n  },\n};\n</script>\n<style lang=\"less\" scoped>\n.c2c-list {\n  /deep/.van-pull-refresh {\n    height: 70vh;\n    overflow: auto;\n  }\n}\n</style>"]}]}