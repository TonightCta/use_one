{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/chant/components/step_one.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/chant/components/step_one.vue","mtime":1658308205925},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENoYW50U3RlcE9uZSB9IGZyb20gIi4uLy4uLy4uL2FwaS9hcGkiOwppbXBvcnQgeyBjaGVja0VtYWlsIH0gZnJvbSAiLi4vLi4vLi4vdXRpbHMvaW5kZXgiOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIGNvbnN0IHZlcmlmeV9lbWFpbCA9IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsKICAgICAgaWYgKCFjaGVja0VtYWlsKHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKG5ldyBFcnJvcigi6K+36L6T5YWl5q2j56Gu55qE6YKu566x5qC85byPIikpOwogICAgICB9IGVsc2UgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0KICAgIH07CiAgICByZXR1cm4gewogICAgICBvcHRpb25zOiBbCiAgICAgICAgewogICAgICAgICAgdmFsdWU6ICIxIiwKICAgICAgICAgIGxhYmVsOiAi5pyL5Y+LIiwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHZhbHVlOiAiMiIsCiAgICAgICAgICBsYWJlbDogIuWQjOS6iyIsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB2YWx1ZTogIjMiLAogICAgICAgICAgbGFiZWw6ICLkurLlsZ4iLAogICAgICAgIH0sCiAgICAgIF0sCiAgICAgIHZhbHVlOiAiIiwKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6IG51bGwsIC8v55yf5a6e5aeT5ZCNCiAgICAgICAgcGhvbmU6IG51bGwsIC8v5omL5py65Y+3CiAgICAgICAgZW1haWw6IG51bGwsIC8v6YKu566xCiAgICAgICAgY29udGFjdDogbnVsbCwgLy/ntKfmgKXogZTns7vkuroKICAgICAgICBjb250YWN0X3Bob25lOiBudWxsLCAvL+e0p+aApeiBlOezu+S6uueUteivnQogICAgICAgIHJlbGF0aW9uOiBudWxsLCAvL+S4juacrOS6uueahOWFs+ezuwogICAgICAgIGFkZHJlc3M6IG51bGwsIC8v5bi455So5Zyw5Z2ACiAgICAgIH0sCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgbmFtZTogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgi6K+36L6T5YWl55yf5a6e5aeT5ZCNIiksCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBwaG9uZTogWwogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogdGhpcy4kdCgi6K+36L6T5YWl5omL5py65Y+3IiksIHRyaWdnZXI6ICJibHVyIiB9LAogICAgICAgIF0sCiAgICAgICAgZW1haWw6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+i+k+WFpemCrueuseWcsOWdgCIpLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgICAgeyB2YWxpZGF0b3I6IHZlcmlmeV9lbWFpbCwgdHJpZ2dlcjogImJsdXIiIH0sCiAgICAgICAgXSwKICAgICAgICBjb250YWN0OiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiB0aGlzLiR0KCLor7fovpPlhaXntKfmgKXogZTns7vkuroiKSwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICAgIGNvbnRhY3RfcGhvbmU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+i+k+WFpee0p+aApeiBlOezu+S6uueUteivnSIpLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgcmVsYXRpb246IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoIuivt+mAieaLqeS4juacrOS6uueahOWFs+ezuyIpLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgYWRkcmVzczogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kdCgi6K+36L6T5YWl5bi455So5Zyw5Z2AIiksCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgfSwKICAgIH07CiAgfSwKICBjb21wdXRlZDp7CiAgICAuLi5tYXBTdGF0ZShbJ2N1cnJlbnQnXSkKICB9LAogIGNyZWF0ZWQoKXsKICAgIGNvbnN0IG1zZyA9IHRoaXMuY3VycmVudC5jaGFudE1zZzsKICAgIGNvbnNvbGUubG9nKG1zZy51c2VybmFtZSkKICAgIHRoaXMudmFsdWUgID0gbXNnLmVtZXJnZW5jeV9jb250YWN0X3JlbGF0aW9uOwogICAgdGhpcy5mb3JtID0gewogICAgICAgIG5hbWU6IG1zZy51c2VybmFtZSwgLy/nnJ/lrp7lp5PlkI0KICAgICAgICBwaG9uZTogbXNnLnBob25lLCAvL+aJi+acuuWPtwogICAgICAgIGVtYWlsOiBtc2cuZW1haWwsIC8v6YKu566xCiAgICAgICAgY29udGFjdDogbXNnLmVtZXJnZW5jeV9jb250YWN0LCAvL+e0p+aApeiBlOezu+S6ugogICAgICAgIGNvbnRhY3RfcGhvbmU6IG1zZy5lbWVyZ2VuY3lfY29udGFjdF9waG9uZSwgLy/ntKfmgKXogZTns7vkurrnlLXor50KICAgICAgICByZWxhdGlvbjpudWxsLAogICAgICAgIGFkZHJlc3M6IG1zZy5hZGRyZXNzLCAvL+W4uOeUqOWcsOWdgAogICAgfTsKICAgIGNvbnNvbGUubG9nKHRoaXMuZm9ybSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHN1Ym1pdFN0ZXBPbmUoZm9ybU5hbWUpIHsKICAgICAgLy8gICB0aGlzLiRlbWl0KCJ1cFN0ZXAiLCAxKTsKICAgICAgLy8gICByZXR1cm47CiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGFzeW5jIChyZXMpID0+IHsKICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICB0aGlzLiR0b2FzdC5sb2FkaW5nKHsKICAgICAgICAgICAgbWVzc2FnZTogIuWKoOi9veS4rS4uLiIsCiAgICAgICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICAgICAgfSk7CiAgICAgICAgICBjb25zdCBwYXJhbXMgPSB7CiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLmZvcm0ubmFtZSwKICAgICAgICAgICAgcGhvbmU6IHRoaXMuZm9ybS5waG9uZSwKICAgICAgICAgICAgZW1haWw6IHRoaXMuZm9ybS5lbWFpbCwKICAgICAgICAgICAgZW1lcmdlbmN5X2NvbnRhY3Q6IHRoaXMuZm9ybS5jb250YWN0LAogICAgICAgICAgICBlbWVyZ2VuY3lfY29udGFjdF9waG9uZTogdGhpcy5mb3JtLmNvbnRhY3RfcGhvbmUsCiAgICAgICAgICAgIGVtZXJnZW5jeV9jb250YWN0X3JlbGF0aW9uOiB0aGlzLnZhbHVlLAogICAgICAgICAgICBhZGRyZXNzOiB0aGlzLmZvcm0uYWRkcmVzcywKICAgICAgICAgIH07CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ2N1cnJlbnQvdXBDaGFpbk1zZycscGFyYW1zKQogICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2hhbnRTdGVwT25lKHBhcmFtcyk7CiAgICAgICAgICBjb25zdCB7IGNvZGUgfSA9IHJlc3VsdDsKICAgICAgICAgIGlmIChjb2RlICE9IDIwMCkgewogICAgICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnNvbGUubG9nKCLpqozor4HpgJrov4ciKTsKICAgICAgICAgIHRoaXMuJGVtaXQoInVwU3RlcCIsIDEpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["step_one.vue"],"names":[],"mappings":";AAuFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"step_one.vue","sourceRoot":"src/views/chant/components","sourcesContent":["<!-- 基本信息 -->\n<template>\n  <div class=\"step-one step-public\">\n    <p class=\"step-title\">基本信息</p>\n    <div class=\"step-content\">\n      <div class=\"content-msg\">\n        <el-form\n          ref=\"step-form\"\n          :model=\"form\"\n          :rules=\"ruleForm\"\n          label-position=\"top\"\n        >\n          <el-form-item prop=\"name\">\n            <P-input\n              title=\"姓名\"\n              v-model=\"form.name\"\n              placeholder=\"请输入真实姓名\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"phone\">\n            <P-input\n              title=\"手机号\"\n              v-model=\"form.phone\"\n              placeholder=\"请输入本人电话\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"email\">\n            <P-input\n              title=\"邮箱\"\n              v-model=\"form.email\"\n              placeholder=\"请输入本人邮箱\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"contact\">\n            <P-input\n              title=\"紧急联系人\"\n              v-model=\"form.contact\"\n              placeholder=\"请输入紧急联系人姓名\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"contact_phone\">\n            <P-input\n              title=\"紧急联系人电话\"\n              v-model=\"form.contact_phone\"\n              placeholder=\"请输入紧急联系人电话\"\n            ></P-input>\n          </el-form-item>\n          <el-form-item prop=\"与本人的关系\">\n            <div class=\"select-mine\">\n              <p class=\"other-title\">与本人的关系</p>\n              <el-select v-model=\"value\" placeholder=\"请选择\">\n                <el-option\n                  v-for=\"item in options\"\n                  :key=\"item.value\"\n                  :label=\"item.label\"\n                  :value=\"item.value\"\n                >\n                </el-option>\n              </el-select>\n              <p class=\"select-error\" v-if=\"!value\">请选择与本人关系</p>\n            </div>\n          </el-form-item>\n          <el-form-item prop=\"address\">\n            <P-input\n              title=\"紧急联系人电话\"\n              v-model=\"form.address\"\n              placeholder=\"请输入本人现常住地址\"\n            ></P-input>\n          </el-form-item>\n        </el-form>\n      </div>\n      <div class=\"content-btn\">\n        <div class=\"btn-label\"></div>\n        <div class=\"btn-box\">\n          <P-button\n            type=\"primary\"\n            class=\"btn-primary\"\n            @click=\"submitStepOne('step-form')\"\n            >下一步</P-button\n          >\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ChantStepOne } from \"../../../api/api\";\nimport { checkEmail } from \"../../../utils/index\";\nimport { mapState } from \"vuex\";\nexport default {\n  data() {\n    const verify_email = (rule, value, callback) => {\n      if (!checkEmail(value)) {\n        callback(new Error(\"请输入正确的邮箱格式\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      options: [\n        {\n          value: \"1\",\n          label: \"朋友\",\n        },\n        {\n          value: \"2\",\n          label: \"同事\",\n        },\n        {\n          value: \"3\",\n          label: \"亲属\",\n        },\n      ],\n      value: \"\",\n      form: {\n        name: null, //真实姓名\n        phone: null, //手机号\n        email: null, //邮箱\n        contact: null, //紧急联系人\n        contact_phone: null, //紧急联系人电话\n        relation: null, //与本人的关系\n        address: null, //常用地址\n      },\n      ruleForm: {\n        name: [\n          {\n            required: true,\n            message: this.$t(\"请输入真实姓名\"),\n            trigger: \"blur\",\n          },\n        ],\n        phone: [\n          { required: true, message: this.$t(\"请输入手机号\"), trigger: \"blur\" },\n        ],\n        email: [\n          {\n            required: true,\n            message: this.$t(\"请输入邮箱地址\"),\n            trigger: \"blur\",\n          },\n          { validator: verify_email, trigger: \"blur\" },\n        ],\n        contact: [\n          {\n            required: true,\n            message: this.$t(\"请输入紧急联系人\"),\n            trigger: \"blur\",\n          },\n        ],\n        contact_phone: [\n          {\n            required: true,\n            message: this.$t(\"请输入紧急联系人电话\"),\n            trigger: \"blur\",\n          },\n        ],\n        relation: [\n          {\n            required: true,\n            message: this.$t(\"请选择与本人的关系\"),\n            trigger: \"blur\",\n          },\n        ],\n        address: [\n          {\n            required: true,\n            message: this.$t(\"请输入常用地址\"),\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  computed:{\n    ...mapState(['current'])\n  },\n  created(){\n    const msg = this.current.chantMsg;\n    console.log(msg.username)\n    this.value  = msg.emergency_contact_relation;\n    this.form = {\n        name: msg.username, //真实姓名\n        phone: msg.phone, //手机号\n        email: msg.email, //邮箱\n        contact: msg.emergency_contact, //紧急联系人\n        contact_phone: msg.emergency_contact_phone, //紧急联系人电话\n        relation:null,\n        address: msg.address, //常用地址\n    };\n    console.log(this.form)\n  },\n  methods: {\n    submitStepOne(formName) {\n      //   this.$emit(\"upStep\", 1);\n      //   return;\n      this.$refs[formName].validate(async (res) => {\n        if (res) {\n          this.$toast.loading({\n            message: \"加载中...\",\n            forbidClick: true,\n          });\n          const params = {\n            username: this.form.name,\n            phone: this.form.phone,\n            email: this.form.email,\n            emergency_contact: this.form.contact,\n            emergency_contact_phone: this.form.contact_phone,\n            emergency_contact_relation: this.value,\n            address: this.form.address,\n          };\n          this.$store.commit('current/upChainMsg',params)\n          const result = await ChantStepOne(params);\n          const { code } = result;\n          if (code != 200) {\n            this.$toast(result.message);\n            return;\n          }\n          console.log(\"验证通过\");\n          this.$emit(\"upStep\", 1);\n        }\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./step.less\");\n.content-msg {\n  padding-bottom: 30px !important;\n  .other-title {\n    font-size: 14px;\n    font-weight: bold;\n    color: #333;\n    margin-top: 10px;\n  }\n  .select-mine {\n    position: relative;\n    .select-error {\n      position: absolute;\n      bottom: -27px;\n      font-size: 12px;\n      color: #f56c6c;\n    }\n  }\n  /deep/.el-select {\n    width: 100%;\n    .el-input__inner {\n      height: 44px;\n      border-color: #eee;\n      padding-left: 10px;\n      background: #fdfdfd;\n    }\n  }\n}\n</style>"]}]}