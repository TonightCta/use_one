{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/bankCard/addUpdate.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/bankCard/addUpdate.vue","mtime":1657511087064},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICAgIGRhdGEoKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYm9vbDogewogICAgICAgICAgICAgICAgY2hlY2tUaGU6IGZhbHNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvcm06IHsKICAgICAgICAgICAgICAgIGlkOiAnJywKICAgICAgICAgICAgICAgIHBfaWQ6IHRoaXMuJHN0b3JlLnN0YXRlLmNhcmQuYWRkdHlwZSwKICAgICAgICAgICAgICAgIHVzZXJuYW1lOiAnJywKICAgICAgICAgICAgICAgIGFjY291bnQ6ICcnLAogICAgICAgICAgICAgICAgYmFuazogJycsCiAgICAgICAgICAgICAgICBiYW5rX2JyYW5jaDogJycsCiAgICAgICAgICAgICAgICBxcmNvZGU6ICcnLAogICAgICAgICAgICAgICAgc3RhdHVzOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBydWxlczogewogICAgICAgICAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5oKo55qE5aeT5ZCNJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICAgICAgICAgICAgeyBtaW46IDIsIG1heDogMTAsIG1lc3NhZ2U6ICfplb/luqblnKggMiDliLAgMTAg5Liq5a2X56ymJywgdHJpZ2dlcjogJ2JsdXInIH0KICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgICBhY2NvdW50OiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpemTtuihjOWNoeWPtycsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgICAgICAgICAgIHsgdmFsaWRhdG9yOiBuZXcgUmVnRXhwKCkuYmFua0NhcmQsIHRyaWdnZXI6ICdibHVyJyB9CiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgYmFuazogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXlvIDmiLfpk7booYwnLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgICAgICB7IG1pbjogMywgbWF4OiAyMCwgbWVzc2FnZTogJ+mVv+W6puWcqCAzIOWIsCAyMCDkuKrlrZfnrKYnLCB0cmlnZ2VyOiAnYmx1cicgfQogICAgICAgICAgICAgICAgXQogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGVydDogewogICAgICAgICAgICAgICAgc2hvdzogZmFsc2UsCiAgICAgICAgICAgICAgICBjYW5jZWxTd2l0Y2g6IGZhbHNlLAogICAgICAgICAgICAgICAgaW5kZXg6IDAsCiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnJwogICAgICAgICAgICB9CgogICAgICAgIH0KICAgIH0sCiAgICB3YXRjaDogewogICAgICAgICckcm91dGUucGFyYW1zJzogewogICAgICAgICAgICBkZWVwOiB0cnVlLAogICAgICAgICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgICAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICBpZiAodi5pZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybS5pZCA9IHYuaWQKICAgICAgICAgICAgICAgICAgICB0aGlzLm9uTGlzdCh2LmlkKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgIH0sCiAgICBtb3VudGVkKCkgewogICAgICAgIGlmICh0aGlzLmZvcm0ucF9pZCA9PSAnJyAmJiB0aGlzLmZvcm0uaWQgPT0gJycpIHsKICAgICAgICAgICAgdGhpcy4kcm91dGVyLmJhY2soLTEpCiAgICAgICAgfQogICAgfSwKICAgIG1ldGhvZHM6IHsKICAgICAgICBvbkFsZXJ0KCkgewogICAgICAgICAgICB0aGlzLmFsZXJ0LnNob3cgPSBmYWxzZQogICAgICAgICAgICBpZiAodGhpcy5hbGVydC5pbmRleCA9PT0gMSkgewogICAgICAgICAgICAgICAgdGhpcy5kZWwoKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvblN1Ym1pdChmb3JtTmFtZSkgewogICAgICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgocmVzKSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm9vbC5jaGVja1RoZSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mb3JtLmlkID09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlN1Ym1pdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLlVwZGF0ZSgpCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0LnNob3cgPSB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWxlcnQuY2FuY2VsU3dpdGNoID0gZmFsc2UKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydC5pbmRleCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGVydC5tZXNzYWdlID0gJ+ivt+WLvumAieS6pOaYk+mjjumZqScKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0sCiAgICAgICAgY2hlY2tUaGUoKSB7CiAgICAgICAgICAgIHRoaXMuYm9vbC5jaGVja1RoZSA9ICF0aGlzLmJvb2wuY2hlY2tUaGUKICAgICAgICB9LAogICAgICAgIGFzeW5jIFN1Ym1pdCgpIHsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuU3VibWl0KHRoaXMsICdjYXJkL2FkZCcsIHRoaXMuZm9ybSkKICAgICAgICAgICAgY29uc3QgeyBjb2RlLCBtZXNzYWdlIH0gPSByZXNwb25zZQogICAgICAgICAgICBpZiAoY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnY2FyZC9TRVRfQUREVFlQRScsICcnKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9iYW5rY2FyZCcgfSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmZhaWwobWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIG9uTGlzdChpZCkgewogICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IEFQSS5HZXREYXRhKHRoaXMsICdjYXJkL2dldGluZm8nLCBpZCkKICAgICAgICAgICAgY29uc3QgeyBjb2RlLCBkYXRhLCBtZXNzYWdlIH0gPSByZXNwb25zZQogICAgICAgICAgICBpZiAoY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMuZm9ybSA9IGRhdGEKICAgICAgICAgICAgICAgIHRoaXMuYm9vbC5jaGVja1RoZSA9IHRydWUKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5iYWNrKC0xKQogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBVcGRhdGUoKSB7CiAgICAgICAgICAgIEFQSS5VcGRhdGUodGhpcywgJ2NhcmQvdXBkYXRlJywgdGhpcy5mb3JtKS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5jb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygtMSkKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3QuZmFpbChlcnJvci5tZXNzYWdlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBjbGlja0ljb24odikgewogICAgICAgICAgICBpZiAodiA9PSAnZGVsJykgewogICAgICAgICAgICAgICAgdGhpcy5hbGVydC5zaG93ID0gdHJ1ZQogICAgICAgICAgICAgICAgdGhpcy5hbGVydC5jYW5jZWxTd2l0Y2ggPSB0cnVlCiAgICAgICAgICAgICAgICB0aGlzLmFsZXJ0LmluZGV4ID0gMQogICAgICAgICAgICAgICAgdGhpcy5hbGVydC5tZXNzYWdlID0gJ+ehruiupOWIoOmZpOivpeaUtuasvuaWueW8jz8nCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGFzeW5jIGRlbCgpIHsKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBBUEkuRGVsKHRoaXMsICdjYXJkL2RlbCcsIHRoaXMuZm9ybS5pZCkKICAgICAgICAgICAgY29uc3QgeyBjb2RlLCBkYXRhLCBtZXNzYWdlIH0gPSByZXNwb25zZQogICAgICAgICAgICBpZiAoY29kZSA9PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy9iYW5rY2FyZCcgfSkKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KfTsK"},{"version":3,"sources":["addUpdate.vue"],"names":[],"mappings":";AAgFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addUpdate.vue","sourceRoot":"src/views/bankCard","sourcesContent":["<!--\n * @Name: 添加银行卡\n * @Date: 2022-07-04 16:09:36\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-06 14:12:28\n-->\n\n<template>\n    <P-main>\n        <Navigation v-if=\"form.id == ''\" />\n        <Navigation v-else :delSwitch=\"true\" @click-icon=\"clickIcon\" />\n        <P-body type=\"Fei\" class=\"m-55-b\">\n            <h1>{{form.id === '' ? '添加':''}}银行卡</h1>\n            <el-form :model=\"form\" ref=\"form\" :rules=\"rules\" label-width=\"130px\" class=\"main\" label-position=\"top\"\n                :hide-required-asterisk=\"true\">\n                <div class=\"form-item\">\n                    <el-form-item prop=\"username\">\n                        <template #label>\n                            <div class=\"label\">\n                                姓名<span>*</span>\n                            </div>\n                        </template>\n                        <el-input v-model=\"form.username\" class=\"ui-input\" placeholder=\"请输入您的姓名\"></el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"account\">\n                        <template #label>\n                            <div class=\"label\">\n                                银行卡号<span>*</span>\n                            </div>\n                        </template>\n                        <el-input v-model=\"form.account\" class=\"ui-input\" placeholder=\"请输入银行卡号\" :maxlength=\"19\">\n                        </el-input>\n                    </el-form-item>\n                    <el-form-item prop=\"bank\">\n                        <template #label>\n                            <div class=\"label\">\n                                开户银行<span>*</span>\n                            </div>\n                        </template>\n                        <el-input v-model=\"form.bank\" class=\"ui-input\" placeholder=\"请输入开户银行\"></el-input>\n                    </el-form-item>\n                </div>\n                <div class=\"form-item m-10-t\">\n                    <el-form-item label=\"开户支行 (选填）\">\n                        <el-input v-model=\"form.bank_branch\" class=\"ui-input\" placeholder=\"请输入开户支行\"></el-input>\n                    </el-form-item>\n                </div>\n            </el-form>\n\n            <B-typographya class=\"prompt\">\n                <template #icon>\n                    <i class=\"el-icon-warning\" />\n                </template>\n                <template #title>\n                    风险提示:C2C属于场外交易，法币不经过平台，平台不会自动扣款，需要您手动自行转账给对方，对方才能收到款项。当您在法币交易出售资产时，您选择的收款方式将会展示给买方，请确认信息准确无误。\n                </template>\n            </B-typographya>\n\n            <B-typographya class=\"text-yesNo\">\n                <template #icon>\n                    <B-svg name=\"Gou1\" class-name=\"b-icon-svg\" :class=\"[bool.checkThe ? 'active':'']\"\n                        @click=\"checkThe\" />\n                </template>\n                <template #title>\n                    <div @click=\"checkThe\">我已阅读并充分理解上述内容，由于款项造成的交易风险自行承担</div>\n                </template>\n            </B-typographya>\n        </P-body>\n        <Foo-ter>\n            <P-button type=\"primary\" class=\"btn-primary h-44-i\" @click=\"onSubmit('form')\">{{form.id === '' ? '保存':'修改'}}\n            </P-button>\n        </Foo-ter>\n\n        <Alert v-model=\"alert.show\" title=\"提示\" :cancel-switch=\"alert.cancelSwitch\" @click=\"onAlert\">\n            <div class=\"ui-flex-row\">{{alert.message}}</div>\n        </Alert>\n    </P-main>\n</template>\n\n<script>\nexport default {\n    data() {\n        return {\n            bool: {\n                checkThe: false\n            },\n            form: {\n                id: '',\n                p_id: this.$store.state.card.addtype,\n                username: '',\n                account: '',\n                bank: '',\n                bank_branch: '',\n                qrcode: '',\n                status: ''\n            },\n            rules: {\n                username: [\n                    { required: true, message: '请输入您的姓名', trigger: 'blur' },\n                    { min: 2, max: 10, message: '长度在 2 到 10 个字符', trigger: 'blur' }\n                ],\n                account: [\n                    { required: true, message: '请输入银行卡号', trigger: 'blur' },\n                    { validator: new RegExp().bankCard, trigger: 'blur' }\n                ],\n                bank: [\n                    { required: true, message: '请输入开户银行', trigger: 'blur' },\n                    { min: 3, max: 20, message: '长度在 3 到 20 个字符', trigger: 'blur' }\n                ]\n            },\n            alert: {\n                show: false,\n                cancelSwitch: false,\n                index: 0,\n                message: ''\n            }\n\n        }\n    },\n    watch: {\n        '$route.params': {\n            deep: true,\n            immediate: true,\n            handler: function (v) {\n                if (v.id) {\n                    this.form.id = v.id\n                    this.onList(v.id)\n                }\n            }\n        },\n    },\n    mounted() {\n        if (this.form.p_id == '' && this.form.id == '') {\n            this.$router.back(-1)\n        }\n    },\n    methods: {\n        onAlert() {\n            this.alert.show = false\n            if (this.alert.index === 1) {\n                this.del()\n            }\n        },\n        onSubmit(formName) {\n            this.$refs[formName].validate((res) => {\n                if (res) {\n                    if (this.bool.checkThe) {\n                        if (this.form.id == '') {\n                            this.Submit()\n                        } else {\n                            this.Update()\n                        }\n                    } else {\n                        this.alert.show = true\n                        this.alert.cancelSwitch = false\n                        this.alert.index = 0\n                        this.alert.message = '请勾选交易风险'\n                    }\n                }\n            });\n        },\n        checkThe() {\n            this.bool.checkThe = !this.bool.checkThe\n        },\n        async Submit() {\n            const response = await API.Submit(this, 'card/add', this.form)\n            const { code, message } = response\n            if (code == 200) {\n                this.$store.commit('card/SET_ADDTYPE', '');\n                this.$router.push({ path: '/bankcard' })\n            } else {\n                this.$toast.fail(message);\n            }\n        },\n        async onList(id) {\n            const response = await API.GetData(this, 'card/getinfo', id)\n            const { code, data, message } = response\n            if (code == 200) {\n                this.form = data\n                this.bool.checkThe = true\n            } else {\n                this.$router.back(-1)\n            }\n        },\n        async Update() {\n            API.Update(this, 'card/update', this.form).then(response => {\n                if (response.code == 200) {\n                    this.$router.go(-1)\n                }\n            }).catch(error => {\n                this.$toast.fail(error.message);\n            });\n        },\n        clickIcon(v) {\n            if (v == 'del') {\n                this.alert.show = true\n                this.alert.cancelSwitch = true\n                this.alert.index = 1\n                this.alert.message = '确认删除该收款方式?'\n            }\n        },\n        async del() {\n            const response = await API.Del(this, 'card/del', this.form.id)\n            const { code, data, message } = response\n            if (code == 200) {\n                this.$router.push({ path: '/bankcard' })\n            }\n        }\n    }\n};\n</script>\n\n<style lang=\"less\" scoped>\nh1 {\n    padding: 12px;\n    padding-bottom: 15px;\n    font-size: 23px;\n    color: #333333;\n}\n.body {\n    padding: 0px;\n    .form-item {\n        padding: 12px;\n        background: #fff;\n        /deep/.el-form-item {\n            margin-bottom: 10px;\n            &.is-error {\n                margin-bottom: 22px;\n            }\n            .el-form-item__label {\n                padding: 0px;\n            }\n            .el-input__inner {\n                height: 40px;\n                padding: 0 10px;\n                border: 1px solid #eeeeee;\n            }\n        }\n        .label {\n            span {\n                vertical-align: -7px;\n                color: #ff4d4d;\n                font-size: 20px;\n                margin-left: 3px;\n            }\n        }\n    }\n}\n\n.prompt {\n    margin-top: 12px;\n    padding: 10px;\n    background: #ffebeb;\n    border-radius: 4px;\n    /deep/.title {\n        font-size: 12px;\n        font-weight: 400;\n        color: #ff7676;\n        .el-icon-warning {\n            font-size: 14px;\n        }\n    }\n}\n\n.text-yesNo {\n    padding: 12px;\n    /deep/.title {\n        font-size: 12px;\n        color: #666666;\n        .icon-svg {\n            width: 11px;\n            height: 20px;\n            .b-icon-svg {\n                width: 11px;\n                height: 11px;\n            }\n        }\n    }\n    .b-icon-svg {\n        width: 11px;\n        height: 11px;\n        border-radius: 2px;\n        border: 1px solid #666666;\n        /deep/use {\n            display: none;\n        }\n        &.active {\n            /deep/use {\n                display: block;\n            }\n        }\n    }\n}\n</style>"]}]}