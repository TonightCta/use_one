{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/login/registered.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/login/registered.vue","mtime":1657511087068},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBNaXhpbnMgZnJvbSAnLi9taXhpbnMnCgpleHBvcnQgZGVmYXVsdCB7CiAgICBtaXhpbnM6IFtNaXhpbnNdLAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBhY2NvdW50KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmUgPT0gMCA/IHRoaXMuRm9ybS5waG9uZSA6IHRoaXMuRm9ybS5lbWFpbAogICAgICAgIH0KICAgIH0sCiAgICBtZXRob2RzOiB7CiAgICAgICAgb25QaG9uZU9yRW1haWwocmVzcG9uc2UsIHJ1bGVGb3JtKSB7CiAgICAgICAgICAgIGNvbnN0IHsgY29kZSwgbWVzc2FnZSB9ID0gcmVzcG9uc2UKICAgICAgICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbU5hbWUgPSAnVmVyaWZpY2F0aW9uJwogICAgICAgICAgICAgICAgdGhpcy5Gb3JtLnBob25lID0gcnVsZUZvcm0ucGhvbmUKICAgICAgICAgICAgICAgIHRoaXMuRm9ybS5lbWFpbCA9IHJ1bGVGb3JtLmVtYWlsCiAgICAgICAgICAgICAgICB0aGlzLkZvcm0ucGhvbmVfcHJlZml4ID0gcnVsZUZvcm0ucGhvbmVfcHJlZml4CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBvblZlcmlmaWNhdGlvbihyZXNwb25zZSwgcnVsZUZvcm0pIHsKICAgICAgICAgICAgY29uc3QgeyBjb2RlLCBtZXNzYWdlIH0gPSByZXNwb25zZTsKICAgICAgICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNvbU5hbWUgPSAnUGFzc3dvcmQnCiAgICAgICAgICAgICAgICB0aGlzLkZvcm0uY29kZSA9IHJ1bGVGb3JtCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2JvdHRvbScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBhc3luYyBvblBhc3N3b3JkKHJ1bGVGb3JtKSB7CiAgICAgICAgICAgIHRoaXMuJHRvYXN0LmxvYWRpbmcoewogICAgICAgICAgICAgICAgZHVyYXRpb246IDAsCiAgICAgICAgICAgICAgICBmb3JiaWRDbGljazogdHJ1ZSwKICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuJHQoJ+azqOWGjOS4rScpCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncmVnaXN0ZXJlZC9yZWdpc3RlcicsIHsKICAgICAgICAgICAgICAgIHR5cGU6IHRoaXMubGlzdFt0aGlzLmFjdGl2ZV0uaWQsCiAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5Gb3JtLmVtYWlsLAogICAgICAgICAgICAgICAgcGhvbmU6IHRoaXMuRm9ybS5waG9uZSwKICAgICAgICAgICAgICAgIHBob25lX3ByZWZpeDogdGhpcy5Gb3JtLnBob25lX3ByZWZpeCwKICAgICAgICAgICAgICAgIGNvZGU6IHRoaXMuRm9ybS5jb2RlLAogICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHJ1bGVGb3JtLnBhc3N3b3JkLAogICAgICAgICAgICAgICAgcGFzc3dvcmRfY29uZmlybWF0aW9uOiBydWxlRm9ybS5jb25maXJtUGFzc3dvcmQsCiAgICAgICAgICAgIH0pCgogICAgICAgICAgICBjb25zdCB7IGNvZGUsIG1lc3NhZ2UgfSA9IHJlc3BvbnNlCiAgICAgICAgICAgIGlmIChjb2RlID09IDIwMCkgewogICAgICAgICAgICAgICAgdGhpcy4kdG9hc3Quc3VjY2Vzcygn5rOo5YaM5oiQ5YqfJyk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGg6ICcvbG9naW4nCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0sIDE1MDApCiAgICAgICAgICAgIH0gZWxzZSBpZiAoY29kZSA9PSAxMDAwMDUpIHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmZhaWwobWVzc2FnZSk7CiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmNvbU5hbWUgPSAnVmVyaWZpY2F0aW9uJwogICAgICAgICAgICAgICAgfSwgMTUwMCkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuJHRvYXN0LmZhaWwoJ+ivt+mHjeaWsOazqOWGjCcpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21OYW1lID0gJ1Bob25lT3JFbWFpbCcKICAgICAgICAgICAgICAgIH0sIDE1MDApCiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG9uVkNsaWNrTGVmdCgpIHsKICAgICAgICAgICAgdGhpcy5jb21OYW1lID0gJ1Bob25lT3JFbWFpbCcKICAgICAgICB9LAogICAgICAgIG9uUENsaWNrTGVmdCgpIHsKICAgICAgICAgICAgdGhpcy5jb21OYW1lID0gJ1ZlcmlmaWNhdGlvbicKICAgICAgICB9CiAgICB9Cn07Cg=="},{"version":3,"sources":["registered.vue"],"names":[],"mappings":";AAkBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"registered.vue","sourceRoot":"src/views/login","sourcesContent":["<!--\n * @Name: 注册\n * @Date: 2022-06-26 14:39:56\n * @LastEditors: VSCode\n * @LastEditTime: 2022-06-30 11:18:41\n-->\n<template>\n    <div>\n        <PhoneOrEmail v-if=\"comName == 'PhoneOrEmail'\" title=\"注册\" :tabs-active.sync=\"active\" :list=\"list\"\n            :phone_prefix=\"Form.phone_prefix\" :phone=\"Form.phone\" :email=\"Form.email\" @click=\"onPhoneOrEmail\" />\n        <Verification v-if=\"comName == 'Verification'\" :title=\"list[active]\" :active=\"active\" :scene=\"1\"\n            :phone_prefix=\"Form.phone_prefix\" :phone=\"Form.phone\" :email=\"Form.email\" @click=\"onVerification\"\n            @click-left=\"onVClickLeft\" />\n        <Password v-if=\"comName == 'Password'\" @click=\"onPassword\" @click-left=\"onPClickLeft\" />\n    </div>\n</template>\n\n<script>\nimport Mixins from './mixins'\n\nexport default {\n    mixins: [Mixins],\n    computed: {\n        account() {\n            return this.active == 0 ? this.Form.phone : this.Form.email\n        }\n    },\n    methods: {\n        onPhoneOrEmail(response, ruleForm) {\n            const { code, message } = response\n            if (code == 200) {\n                this.comName = 'Verification'\n                this.Form.phone = ruleForm.phone\n                this.Form.email = ruleForm.email\n                this.Form.phone_prefix = ruleForm.phone_prefix\n            } else {\n                this.$toast({\n                    message: message,\n                    position: 'bottom'\n                });\n            }\n        },\n        onVerification(response, ruleForm) {\n            const { code, message } = response;\n            if (code == 200) {\n                this.comName = 'Password'\n                this.Form.code = ruleForm\n            } else {\n                this.$toast({\n                    message: message,\n                    position: 'bottom'\n                });\n            }\n        },\n        async onPassword(ruleForm) {\n            this.$toast.loading({\n                duration: 0,\n                forbidClick: true,\n                message: this.$t('注册中')\n            });\n\n            const response = await this.$store.dispatch('registered/register', {\n                type: this.list[this.active].id,\n                email: this.Form.email,\n                phone: this.Form.phone,\n                phone_prefix: this.Form.phone_prefix,\n                code: this.Form.code,\n                password: ruleForm.password,\n                password_confirmation: ruleForm.confirmPassword,\n            })\n\n            const { code, message } = response\n            if (code == 200) {\n                this.$toast.success('注册成功');\n                setTimeout(() => {\n                    this.$router.push({\n                        path: '/login'\n                    })\n                }, 1500)\n            } else if (code == 100005) {\n                this.$toast.fail(message);\n                setTimeout(() => {\n                    this.comName = 'Verification'\n                }, 1500)\n            } else {\n                this.$toast.fail('请重新注册');\n                setTimeout(() => {\n                    this.comName = 'PhoneOrEmail'\n                }, 1500)\n            }\n        },\n        onVClickLeft() {\n            this.comName = 'PhoneOrEmail'\n        },\n        onPClickLeft() {\n            this.comName = 'Verification'\n        }\n    }\n};\n</script>"]}]}