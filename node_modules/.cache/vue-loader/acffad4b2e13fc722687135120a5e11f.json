{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/order/PleasePayment.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/order/PleasePayment.vue","mtime":1658713050076},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBblF1YW5CYW9aaGFuZyBmcm9tICJAL2NvbXBvbmVudHMvQW5RdWFuQmFvWmhhbmciOwppbXBvcnQgUGF5Q2hvb3NlIGZyb20gIkAvY29tcG9uZW50cy9wYXktd2F5L3BheS1jaG9vc2UiOwppbXBvcnQgQ2FuY2VsQWxlcnRPcmRlciBmcm9tICIuL2NvbXBvbmVudHMvY2FuY2VsQWxlcnRPcmRlciI7CmltcG9ydCB7IE9yZGVyRGV0YWlscywgVHlwZXMsIENhbmNlbE9yZGVyIH0gZnJvbSAiLi4vLi4vYXBpL2FwaSI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEFuUXVhbkJhb1poYW5nLCBQYXlDaG9vc2UsIENhbmNlbEFsZXJ0T3JkZXIgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaWQ6ICIiLAogICAgICBzdGF0ZTogewogICAgICAgIGluZGV4OiAwLAogICAgICAgIHRpdGxlOiBbIuivt+S7mOasviIsICLorqLljZXlt7Llj5bmtogiLCAi6K6i5Y2V5bey5a6M5oiQIl0sCiAgICAgIH0sCiAgICAgIGJvb2w6IHsKICAgICAgICBzaG93OiBmYWxzZSwKICAgICAgICBjYW5jZWw6IGZhbHNlLAogICAgICB9LAogICAgICBvcmRlck1zZzoge30sIC8v6K6i5Y2V5L+h5oGvCiAgICAgIGRhdGU6IDAsIC8v57uT5p2f5YCS6K6h5pe2CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsnY3VycmVudCddKSwKICAgIG9yZGVySUQoKSB7CiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnQub3JkZXJJRAogICAgfSwKICAgIGxpc3QoKSB7CiAgICAgIGNvbnN0IG1zZyA9IHRoaXMub3JkZXJNc2c7CiAgICAgIHJldHVybiBbCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICLmgLvph5Hpop0iLAogICAgICAgICAgdmFsdWU6IG1zZy5hbW91bnRfY3VycmVuY3k/LnRvRml4ZWQoMiksCiAgICAgICAgICBib3JkZXI6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGl0bGU6ICLljZXku7ciLAogICAgICAgICAgdmFsdWU6IE51bWJlcihtc2cucHJpY2UpPy50b0ZpeGVkKDQpLAogICAgICAgICAgZXh0cmE6IG1zZy5jdXJyZW5jeSwKICAgICAgICAgIGJvcmRlcjogZmFsc2UsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICB0aXRsZTogIuaVsOmHjyIsCiAgICAgICAgICB2YWx1ZTogbXNnLmFtb3VudF9jb2luPy50b0ZpeGVkKDQpLAogICAgICAgICAgZXh0cmE6IG1zZy5jb2luLAogICAgICAgICAgYm9yZGVyOiBmYWxzZSwKICAgICAgICB9LAogICAgICAgIHsgdGl0bGU6ICLorqLljZXnvJblj7ciLCB2YWx1ZTogbXNnLm9yZGVyX3NuLCBib3JkZXI6IGZhbHNlIH0sCiAgICAgICAgeyB0aXRsZTogIuS4i+WNleaXtumXtCIsIHZhbHVlOiBtc2cuY3JlYXRlZF9hdCwgYm9yZGVyOiBmYWxzZSB9LAogICAgICBdOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICAiJHJvdXRlLnBhcmFtcyI6IHsKICAgICAgZGVlcDogdHJ1ZSwKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiAodikgewogICAgICAgIGlmICh2LmlkKSB7CiAgICAgICAgICB0aGlzLmlkID0gdi5pZDsKICAgICAgICAgIGNvbnNvbGUubG9nKHYpOwogICAgICAgIH0KICAgICAgfSwKICAgIH0sCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRPcmRlckRldGFpbCgpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/ojrflj5borqLljZXor6bmg4UKICAgIGFzeW5jIGdldE9yZGVyRGV0YWlsKCkgewogICAgICBjb25zdCB0eXBlcyA9IGF3YWl0IFR5cGVzKHsgc2NlbmU6ICJBZHNPcmRlclN0YXR1cyIgfSk7CiAgICAgIGNvbnNvbGUubG9nKHR5cGVzKTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgT3JkZXJEZXRhaWxzKHsgaWQ6IHRoaXMub3JkZXJJRCB9KTsKICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgdGhpcy5vcmRlck1zZyA9IHJlc3VsdC5kYXRhOwogICAgICB0eXBlcy5kYXRhLm1hcC5mb3JFYWNoKChlKSA9PiB7CiAgICAgICAgaWYgKHRoaXMub3JkZXJNc2cuc3RhdHVzID09IGUudmFsKSB7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy5vcmRlck1zZywgInN0YXR1c190ZXh0IiwgZS5uYW1lKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmRhdGUgPQogICAgICAgIG5ldyBEYXRlKHRoaXMub3JkZXJNc2cuZXhwaXJlc19hdCkuZ2V0VGltZSgpIC0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9LAogICAgLy/lj5bmtojorqLljZUKICAgIGFzeW5jIGNhbmNlbFRoZU9yZGVyKHYpIHsKICAgICAgLy8gICB0aGlzLnN0YXRlLmluZGV4ID0gMTsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQ2FuY2VsT3JkZXIoewogICAgICAgIHR5cGU6IHRoaXMub3JkZXJNc2cudHlwZSwKICAgICAgICBpZDogdGhpcy5vcmRlck1zZy5pZCwKICAgICAgfSk7CiAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7CiAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzdWx0OwogICAgICBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHYuc2hvdyA9IGZhbHNlOwogICAgICB0aGlzLiR0b2FzdCgi6K6i5Y2V5Y+W5raI5oiQ5YqfIik7CiAgICAgIHRoaXMuZ2V0T3JkZXJEZXRhaWwoKTsKICAgIH0sCiAgICBvblBheUNob29zZShyb3cpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICIvcGF5bWVudCIsCiAgICAgIH0pOwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["PleasePayment.vue"],"names":[],"mappings":";AAyIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PleasePayment.vue","sourceRoot":"src/views/order","sourcesContent":["<!--\n * @Name: '请付款', '订单已取消', '订单已完成'\n * @Date: 2022-06-21 14:28:01\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 17:52:22\n-->\n<template>\n  <P-main type=\"Fei\">\n    <Navigation class-name=\"Fei\" :WeiXinXiSwitch=\"true\" />\n    <div class=\"prompt\">\n      <div class=\"title\">{{ orderMsg.status_text }}</div>\n      <div class=\"note\">\n        <template v-if=\"orderMsg.status == 0\">\n          <div class=\"note-count\" v-if=\"orderMsg.type == 2\">\n            <p>请在</p>\n            <van-count-down :time=\"date\" />\n            <p>内付款给卖家，超时自动取消</p>\n          </div>\n          <div class=\"note-count\" v-else>\n            <p>买家将在</p>\n            <van-count-down :time=\"date\" />\n            <p>内付款</p>\n          </div>\n        </template>\n        <template v-if=\"orderMsg.status == 1\">{{\n          orderMsg.type == 2 ? \"等待卖家放行\" : \"买家已付款，请放行\"\n        }}</template>\n        <template v-if=\"orderMsg.status == 2\">您的订单申诉中</template>\n        <template v-if=\"orderMsg.status == 3\"\n          >您购买的资产已放入发币账户</template\n        >\n        <template v-if=\"orderMsg.status == 4\">您已取消订单</template>\n      </div>\n    </div>\n    <h4 class=\"h4\" :class=\"orderMsg.type == 1 && 'red-line'\">\n      {{ orderMsg.type == 1 ? \"出售\" : \"购买\" }} {{ orderMsg.coin }}\n    </h4>\n    <div class=\"content ui-flex-1\">\n      <P-cell :list=\"list\" theme=\"cell\">\n        <template #value_0=\"scope\">\n          <div\n            class=\"theAmountOf\"\n            :class=\"{ 'theAmountOf-hong': orderMsg.type == 1 }\"\n          >\n            <div class=\"fh\">{{ orderMsg.currency }}</div>\n            <div class=\"jg\">{{ scope.row.value }}</div>\n          </div>\n        </template>\n        <template #value_3=\"scope\">\n          <ul class=\"ui-list ui-list-hx\">\n            <li>{{ scope.row.value }}</li>\n            <li>\n              <P-copy v-model=\"scope.row.value\">\n                <B-svg name=\"copy\" style=\"width: 17px; height: 17px\"></B-svg>\n              </P-copy>\n            </li>\n          </ul>\n        </template>\n      </P-cell>\n\n      <van-cell-group :border=\"false\" class=\"m-30-t cell\">\n        <!-- <van-cell\n          v-if=\"state.index == 2\"\n          :border=\"false\"\n          title=\"买家昵称\"\n          value=\"彭于晏快递\"\n          is-link\n        ></van-cell> -->\n        <van-cell\n          v-if=\"orderMsg.type == 1\"\n          :border=\"false\"\n          title=\"买家姓名\"\n          :value=\"orderMsg.order_user.name\"\n        ></van-cell>\n        <van-cell\n          v-if=\"orderMsg.type == 2\"\n          :border=\"false\"\n          title=\"卖家昵称\"\n          :value=\"orderMsg.adv_user.name\"\n        >\n          <template #extra>\n            <div class=\"ui-flex-row\">\n              <div class=\"p-5-l\">\n                <B-svg\n                  name=\"renzhengxinxi\"\n                  style=\"width:12px; height:;13px\"\n                ></B-svg>\n              </div>\n              <van-icon name=\"arrow\" />\n            </div>\n          </template>\n        </van-cell>\n        <!-- v-if=\"state.index == 0 || state.index == 2\" -->\n        <van-cell :border=\"false\" title=\"收款方式\">\n          <template #right-icon>\n            <img\n              v-if=\"orderMsg?.adv_payments\"\n              :src=\"orderMsg?.adv_payments[0].logo\"\n              alt=\"\"\n            />\n          </template>\n        </van-cell>\n      </van-cell-group>\n\n      <template v-if=\"orderMsg.status == 0\">\n        <div class=\"Footer ui-flex\">\n          <div class=\"ui-flex-1\" v-if=\"orderMsg.type == 2\">\n            <van-button\n              type=\"default\"\n              class=\"btn-default\"\n              @click=\"bool.cancel = true\"\n              >取消订单</van-button\n            >\n          </div>\n          <div class=\"ui-flex-2 m-10-l\">\n            <van-button\n              type=\"info\"\n              class=\"btn-info\"\n              @click=\"bool.show = true\"\n              v-if=\"orderMsg.type == 2\"\n              >去付款</van-button\n            >\n            <van-button type=\"info\" class=\"btn-info\" v-else>去放行</van-button>\n          </div>\n        </div>\n      </template>\n    </div>\n    <AnQuanBaoZhang v-if=\"orderMsg.status == 0\"></AnQuanBaoZhang>\n    <PayChoose v-model=\"bool.show\" @click=\"onPayChoose\"></PayChoose>\n    <CancelAlertOrder\n      v-model=\"bool.cancel\"\n      @click=\"cancelTheOrder\"\n    ></CancelAlertOrder>\n  </P-main>\n</template>\n\n<script>\nimport AnQuanBaoZhang from \"@/components/AnQuanBaoZhang\";\nimport PayChoose from \"@/components/pay-way/pay-choose\";\nimport CancelAlertOrder from \"./components/cancelAlertOrder\";\nimport { OrderDetails, Types, CancelOrder } from \"../../api/api\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: { AnQuanBaoZhang, PayChoose, CancelAlertOrder },\n  data() {\n    return {\n      id: \"\",\n      state: {\n        index: 0,\n        title: [\"请付款\", \"订单已取消\", \"订单已完成\"],\n      },\n      bool: {\n        show: false,\n        cancel: false,\n      },\n      orderMsg: {}, //订单信息\n      date: 0, //结束倒计时\n    };\n  },\n  computed: {\n    ...mapState(['current']),\n    orderID() {\n      return this.current.orderID\n    },\n    list() {\n      const msg = this.orderMsg;\n      return [\n        {\n          title: \"总金额\",\n          value: msg.amount_currency?.toFixed(2),\n          border: false,\n        },\n        {\n          title: \"单价\",\n          value: Number(msg.price)?.toFixed(4),\n          extra: msg.currency,\n          border: false,\n        },\n        {\n          title: \"数量\",\n          value: msg.amount_coin?.toFixed(4),\n          extra: msg.coin,\n          border: false,\n        },\n        { title: \"订单编号\", value: msg.order_sn, border: false },\n        { title: \"下单时间\", value: msg.created_at, border: false },\n      ];\n    },\n  },\n  watch: {\n    \"$route.params\": {\n      deep: true,\n      immediate: true,\n      handler: function (v) {\n        if (v.id) {\n          this.id = v.id;\n          console.log(v);\n        }\n      },\n    },\n  },\n  created() {\n    this.getOrderDetail();\n  },\n  methods: {\n    //获取订单详情\n    async getOrderDetail() {\n      const types = await Types({ scene: \"AdsOrderStatus\" });\n      console.log(types);\n      const result = await OrderDetails({ id: this.orderID });\n      console.log(result);\n      this.orderMsg = result.data;\n      types.data.map.forEach((e) => {\n        if (this.orderMsg.status == e.val) {\n          this.$set(this.orderMsg, \"status_text\", e.name);\n        }\n      });\n      this.date =\n        new Date(this.orderMsg.expires_at).getTime() - new Date().getTime();\n    },\n    //取消订单\n    async cancelTheOrder(v) {\n      //   this.state.index = 1;\n      const result = await CancelOrder({\n        type: this.orderMsg.type,\n        id: this.orderMsg.id,\n      });\n      console.log(result);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      v.show = false;\n      this.$toast(\"订单取消成功\");\n      this.getOrderDetail();\n    },\n    onPayChoose(row) {\n      this.$router.push({\n        path: \"/payment\",\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.red-line::before {\n  background: #fd5656;\n}\n.prompt {\n  padding: 18px 12px;\n  background: #fff;\n\n  .title {\n    font-size: 22px;\n    color: #333333;\n    font-weight: bold;\n  }\n  .note {\n    font-size: 12px;\n    color: #666666;\n    margin-top: 10px;\n    .note-count {\n      display: flex;\n      align-items: center;\n      p {\n        transform: translateY(1px);\n      }\n    }\n    /deep/.van-count-down {\n      font-size: 17px;\n      color: #fd5656;\n      margin: 0px 3px;\n      font-weight: bold;\n    }\n  }\n}\n\n.content {\n  padding: 10px 0px;\n  background: #fff;\n  .theAmountOf {\n    position: absolute;\n    right: 16px;\n    top: 6px;\n  }\n  img {\n    width: 16px;\n    height: 16px;\n    vertical-align: middle;\n  }\n  /deep/.van-cell {\n    align-items: center;\n  }\n  /deep/.svg-icon {\n    width: 15px;\n    height: 15px;\n  }\n}\n</style>"]}]}