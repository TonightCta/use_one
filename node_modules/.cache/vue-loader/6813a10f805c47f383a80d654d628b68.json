{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/ad/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/ad/index.vue","mtime":1658713050072},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_babel-loader@8.2.5@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBZHZlcnRpc2luZ0xpc3QgZnJvbSAiQC9jb21wb25lbnRzL2FkdmVydGlzaW5nLWxpc3QiOwppbXBvcnQgU2NyZWVuaW5nIGZyb20gIi4vY29tcG9uZW50cy9zY3JlZW5pbmciOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gInZ1ZXgiOwppbXBvcnQgeyBTZXROaWNrbmFtZSwgQWR2TGlzdCwgVHlwZXMsIFVwQWR2U3RhdHVzIH0gZnJvbSAiLi4vLi4vYXBpL2FwaSI7CmltcG9ydCBJbmZpbml0ZUxvYWRpbmcgZnJvbSAidnVlLWluZmluaXRlLWxvYWRpbmciOwppbXBvcnQgeyBzZXRUeXBlcyB9IGZyb20gIi4uLy4uL3V0aWxzIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFkdmVydGlzaW5nTGlzdCwKICAgIFNjcmVlbmluZywKICAgIEluZmluaXRlTG9hZGluZywKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBib29sOiB7CiAgICAgICAgU2NyZWVuaW5nQ2xhc3M6IGZhbHNlLAogICAgICAgIFNjcmVlbmluZzogZmFsc2UsCiAgICAgICAgU2NyZWVuaW5nQm9vbDogdHJ1ZSwKICAgICAgICBtb3JlQW5kTW9yZTogZmFsc2UsCiAgICAgICAgY2xvc2VUaGVBZDogZmFsc2UsCiAgICAgICAgZ29DaGFudDogZmFsc2UsCiAgICAgICAgc2V0Tmlja05hbWU6IGZhbHNlLAogICAgICB9LAogICAgICBuaWNrbmFtZTogIiIsCiAgICAgIHNlbGVjdDogW3sgbmFtZTogIuS/ruaUuSIgfSwgeyBuYW1lOiAi5YWz6Zet5bm/5ZGKIiwgY29sb3I6ICIjRkQ1NjU2IiB9XSwKICAgICAgYWR2TGlzdDogW10sIC8v5bm/5ZGK5YiX6KGoCiAgICAgIGFkdkxpc3RTZWM6IFtdLAogICAgICBwYWdlOiAwLAogICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgYWR2SUQ6IG51bGwsCiAgICAgIGFycjI6IFtdLAogICAgICBhcnIzOiBbXSwKICAgICAgYXJyNDogW10sCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgICJib29sLlNjcmVlbmluZyIodikgewogICAgICBpZiAoIXYpIHsKICAgICAgICB0aGlzLm9wZW5TY3JlZW5pbmcoZmFsc2UpOwogICAgICB9CiAgICB9LAogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKFsiY3VycmVudCJdKSwKICB9LAogIGNyZWF0ZWQoKSB7CiAgICAvLyB0aGlzLmdldEZpbHRlckFkdigpOwogICAgLy8gdGhpcy5nZXRBZHZMaXN0KCk7CiAgfSwKICBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLy/nrZvpgInnsbvlnosKICAgIGdldEZpbHRlcihfcGFyYW1zKSB7CiAgICAgIHRoaXMuZ2V0QWR2TGlzdChfcGFyYW1zKTsKICAgICAgdGhpcy5ib29sLlNjcmVlbmluZyA9IGZhbHNlOwogICAgfSwKICAgIC8v6I635Y+W5bm/5ZGK5YiX6KGoCiAgICBhc3luYyBnZXRBZHZMaXN0KF9wYXJhbXMpIHsKICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgQWR2TGlzdCh7CiAgICAgICAgcGFnZTogdGhpcy5wYWdlLAogICAgICAgIGxpbWl0OiAxMCwKICAgICAgICBzZWFyY2g6IF9wYXJhbXMgPyBfcGFyYW1zIDoge30sCiAgICAgIH0pOwogICAgICBjb25zdCB0eXBlcyA9IGF3YWl0IFR5cGVzKHsgc2NlbmU6ICJBZHNTdGF0dXMiIH0pOwogICAgICBpZiAodGhpcy5wYWdlID4gMSkgewogICAgICAgIHJlc3VsdC5kYXRhLmxpc3QuZm9yRWFjaCgoZSkgPT4gewogICAgICAgICAgdGhpcy5hZHZMaXN0LnB1c2goZSk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hZHZMaXN0ID0gcmVzdWx0LmRhdGEubGlzdDsKICAgICAgfQogICAgICB0aGlzLmFkdkxpc3QuZm9yRWFjaCgoZSkgPT4gewogICAgICAgIHRoaXMuJHNldChlLCAiY2hlY2tlZCIsIGUuc3RhdHVzID09IDEgPyB0cnVlIDogZmFsc2UpOwogICAgICAgIHRoaXMuJHNldChlLCAidHlwZV90ZXh0IiwgZS50eXBlID09IDEgPyAi5Ye65ZSuIiA6ICLotK3kubAiKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWR2TGlzdCA9IHNldFR5cGVzKHRoaXMuYWR2TGlzdCx0eXBlcy5kYXRhLm1hcCkKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBhc3luYyBsb2FkTW9yZUV2ZW50KCRzdGF0ZSkgewogICAgICAvLyAgIHRoaXMuc3RhdGUgPSAkc3RhdGU7CiAgICAgIC8vICAgdGhpcy5sb2FkTW9yZURvbSA9IHRydWU7CiAgICAgIHRoaXMucGFnZSArPSAxOwogICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmdldEFkdkxpc3QoKTsKICAgICAgY29uc3QgeyBkYXRhIH0gPSByZXN1bHQ7CiAgICAgIGlmICh0aGlzLmFkdkxpc3QubGVuZ3RoID09IGRhdGEudG90YWwpIHsKICAgICAgICAkc3RhdGUuY29tcGxldGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAkc3RhdGUubG9hZGVkKCk7CiAgICAgIH0KICAgIH0sCiAgICAvL+abtOaWsOW5v+WRiueKtuaAgQogICAgYXN5bmMgdXBBZHZTdGF0dXNFdihfcm93LCBfc3RhdHVzKSB7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICBpZDogX3N0YXR1cyA/IF9zdGF0dXMgOiBfcm93LmlkLAogICAgICAgIHN0YXR1czogX3N0YXR1cyA/IDMgOiBfcm93LnN0YXR1cyA9PSAxID8gMiA6IDEsCiAgICAgIH07CiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IFVwQWR2U3RhdHVzKHBhcmFtcyk7CiAgICAgIGNvbnN0IHsgY29kZSB9ID0gcmVzdWx0OwogICAgICBpZiAoY29kZSAhPSAyMDApIHsKICAgICAgICB0aGlzLiR0b2FzdChyZXN1bHQubWVzc2FnZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJHRvYXN0LnN1Y2Nlc3MoewogICAgICAgIG1lc3NhZ2U6ICLkv67mlLnmiJDlip8iLAogICAgICAgIGZvcmJpZENsaWNrOiB0cnVlLAogICAgICB9KTsKICAgICAgdGhpcy5nZXRBZHZMaXN0KCk7CiAgICAgIHRoaXMuYm9vbC5jbG9zZVRoZUFkID0gZmFsc2U7CiAgICB9LAogICAgb3BlblNjcmVlbmluZyhib29sKSB7CiAgICAgIGlmICh0aGlzLmJvb2wuU2NyZWVuaW5nQm9vbCkgewogICAgICAgIHRoaXMuYm9vbC5TY3JlZW5pbmdCb29sID0gZmFsc2U7CiAgICAgICAgaWYgKHRoaXMuYm9vbC5TY3JlZW5pbmdDbGFzcykgewogICAgICAgICAgaWYgKGJvb2wpIHsKICAgICAgICAgICAgdGhpcy5ib29sLlNjcmVlbmluZyA9ICF0aGlzLmJvb2wuU2NyZWVuaW5nOwogICAgICAgICAgfQogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIHRoaXMuYm9vbC5TY3JlZW5pbmdDbGFzcyA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nQm9vbCA9IHRydWU7CiAgICAgICAgICB9LCA1MDApOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmJvb2wuU2NyZWVuaW5nQ2xhc3MgPSB0cnVlOwogICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgIGlmIChib29sKSB7CiAgICAgICAgICAgICAgdGhpcy5ib29sLlNjcmVlbmluZyA9ICF0aGlzLmJvb2wuU2NyZWVuaW5nOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuYm9vbC5TY3JlZW5pbmdCb29sID0gdHJ1ZTsKICAgICAgICAgIH0sIDUwKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBvcGVyYXRpb24ocm93KSB7CiAgICAgIHRoaXMuYm9vbC5tb3JlQW5kTW9yZSA9IHRydWU7CiAgICAgIHRoaXMuYWR2SUQgPSByb3cuaWQ7CiAgICB9LAogICAgLy/mm7TlpJrmk43nurUKICAgIG1vcmVPcGVyYXRpb25zKGFjdGlvbiwgaW5kZXgpIHsKICAgICAgaWYgKGluZGV4ID09PSAxKSB7CiAgICAgICAgdGhpcy5ib29sLmNsb3NlVGhlQWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICAgIHBhdGg6ICIvcmVsZWFzZSIsCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBpZDogdGhpcy5hZHZJRCwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBvbkxpc3QoKSB7CiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgQVBJLkdldERhdGEodGhpcywgImFwaS9saXN0Iik7CiAgICAgIGNvbnN0IHsgY29kZSwgaXRlbXMsIHRvdGFsIH0gPSByZXNwb25zZTsKICAgICAgaWYgKGNvZGUgPT0gMjAwKSB7CiAgICAgICAgdGhpcy4kcmVmc1siUC1saXN0Il0uQWRkKGl0ZW1zLCB0b3RhbCk7CiAgICAgIH0KICAgIH0sCiAgICBvblJlZnJlc2goKSB7CiAgICAgIC8vIHRoaXMub25MaXN0KCk7CiAgICAgIHRoaXMucGFnZSA9IDA7CiAgICAgIHRoaXMuZ2V0QWR2TGlzdCgpOwogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgNTAwKTsKICAgIH0sCiAgICAvL+WPkeW4g+W5v+WRigogICAgZ29SZWxlYXNlKCkgewogICAgICAvLyAgaHJlZj0iL3JlbGVhc2UiLwogICAgICBpZiAoIXRoaXMuY3VycmVudC5hY2NvdW50LnNlY3VyaXR5KSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9sb2dpbj9SZXR1cm5Vcmw9LyIpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCB7IG1lcmNoYW50IH0gPSB0aGlzLmN1cnJlbnQuYWNjb3VudC5zZWN1cml0eTsKICAgICAgY29uc3QgeyBtZXJjaGFudF9uYW1lIH0gPSB0aGlzLmN1cnJlbnQuYWNjb3VudC5tZXJjaGFudEluZm87CiAgICAgIGlmIChtZXJjaGFudCA9PSAwKSB7CiAgICAgICAgdGhpcy5ib29sLmdvQ2hhbnQgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAoIW1lcmNoYW50X25hbWUpIHsKICAgICAgICB0aGlzLmJvb2wuc2V0Tmlja05hbWUgPSB0cnVlOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3JlbGVhc2UiKTsKICAgIH0sCiAgICAvL+iuvue9ruaYteensAogICAgYXN5bmMgc3VibWl0Tmlja25hbWUoKSB7CiAgICAgIGlmICghdGhpcy5uaWNrbmFtZSkgewogICAgICAgIHRoaXMuJHRvYXN0KCLor7fovpPlhaXmmLXnp7AiKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgU2V0Tmlja25hbWUoeyBtZXJjaGFudF9uYW1lOiB0aGlzLm5pY2tuYW1lIH0pOwogICAgICBjb25zdCB7IGNvZGUgfSA9IHJlc3VsdDsKICAgICAgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAgICAgdGhpcy4kdG9hc3QocmVzdWx0Lm1lc3NhZ2UpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgiY3VycmVudC91cFVzZXJJbmZvIik7CiAgICAgIHRoaXMuJHRvYXN0KCLorr7nva7miJDlip8iKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9yZWxlYXNlIik7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA6JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/ad","sourcesContent":["<template>\n  <P-main>\n    <Navigation\n      title=\"我的广告\"\n      :left-arrow=\"false\"\n      :class=\"[bool.ScreeningClass ? 'navigation' : '']\"\n    >\n      <template #right>\n        <B-svg name=\"shaixuan\" @click=\"openScreening(true)\" />\n      </template>\n    </Navigation>\n    <P-body type=\"Fei\">\n      <!-- <P-list\n        ref=\"P-list\"\n        :footer=\"true\"\n        theme=\"card\"\n        @refresh=\"onRefresh\"\n        @load=\"onList\"\n      >\n        <template v-slot=\"{ row }\">\n          <B-a :href=\"`/advertisingfordetails/${row.id}`\">\n            <Advertising-list\n              :name=\"row.name\"\n              :Price=\"row.Price\"\n              :badge=\"row.number\"\n              :date=\"row.datetime\"\n              :state=\"row.number\"\n              @operation=\"operation(row)\"\n            />\n          </B-a>\n        </template>\n      </P-list> -->\n      <div class=\"adv-list-parent\">\n        <van-pull-refresh v-model=\"loading\" @refresh=\"onRefresh\">\n          <ul class=\"adv-list\">\n            <li\n              v-for=\"(row, index) in advList\"\n              :key=\"index\"\n              :class=\"row.adv_type == 2 ? 'green-color' : 'red-color'\"\n            >\n              <!-- 标题信息 -->\n              <div class=\"adv-title\">\n                <p class=\"title-msg\">\n                  <span></span>{{ row.adv_type == 2 ? \"购买\" : \"出售\" }}&nbsp;{{\n                    row.coin\n                  }}\n                </p>\n                <div>\n                  <span>{{ row.status_text }}</span>\n                  <van-switch\n                    v-if=\"row.status == 1 || row.status == 2\"\n                    active-color=\"#2CBC94\"\n                    inactive-color=\"#ccc\"\n                    v-model=\"row.checked\"\n                    @change=\"upAdvStatusEv(row)\"\n                    size=\"16\"\n                  />\n                </div>\n              </div>\n              <!-- 广告信息 -->\n              <div\n                class=\"adv-content\"\n                @click=\"\n                  $router.push('/advertisingfordetails');\n                  $store.commit('current/upAdvID', row.id);\n                \"\n              >\n                <div class=\"price-msg\">\n                  <p>\n                    <span>数量</span>{{ row.amount.toFixed(2) }}&nbsp;{{\n                      row.coin\n                    }}\n                  </p>\n                  <p>\n                    <span>限额</span>{{ row.min_currency.toFixed(2) }}-{{\n                      row.max_currency.toFixed(2)\n                    }}&nbsp;{{ row.currency }}\n                  </p>\n                </div>\n                <div class=\"price-limit\">\n                  <p>单价</p>\n                  <p class=\"with-color\">\n                    <span>{{ row.currency_symbol }}</span\n                    >{{ row.price.toFixed(2) }}\n                  </p>\n                </div>\n              </div>\n              <!-- 操作信息 -->\n              <div class=\"adv-footer\">\n                <div class=\"pay-way\">\n                  <p v-for=\"(pay, index) in row.payments\" :key=\"index\">\n                    <img :src=\"pay.logo\" alt=\"\" />\n                  </p>\n                </div>\n                <div\n                  class=\"iconfont icon-qita\"\n                  @click=\"operation(row)\"\n                  v-if=\"row.status == 1 || row.status == 2\"\n                ></div>\n              </div>\n            </li>\n          </ul>\n          <infinite-loading\n            spinner=\"spiral\"\n            @infinite=\"loadMoreEvent\"\n            :distance=\"0\"\n          >\n            <div slot=\"spinner\">\n              <mt-spinner type=\"triple-bounce\" color=\"#2CBC94\"></mt-spinner>\n            </div>\n          </infinite-loading>\n        </van-pull-refresh>\n      </div>\n    </P-body>\n    <Screening v-model=\"bool.Screening\" @click=\"getFilter\" />\n    <P-select\n      v-model=\"bool.moreAndMore\"\n      :list=\"select\"\n      cancelText=\"取消\"\n      @select=\"moreOperations\"\n    />\n    <Alert\n      type=\"typography\"\n      @click=\"upAdvStatusEv(null, advID)\"\n      v-model=\"bool.closeTheAd\"\n      title=\"确认关闭广告?\"\n    >\n      若您已向卖家付款，请勿取消订单，否则可能会导致资金损失。若当日取消超过3次将会禁止交易。\n    </Alert>\n    <P-suspension-add @click=\"goRelease\" />\n    <!-- 申请成为商家 -->\n    <Alert\n      title=\"提示\"\n      v-model=\"bool.goChant\"\n      @click=\"$router.push('/chant-application')\"\n    >\n      <p class=\"text-center\">您尚未成为商家，是否前往申请？</p>\n    </Alert>\n    <!-- 设置昵称 -->\n    <Alert\n      v-model=\"bool.setNickName\"\n      title=\"设置昵称\"\n      @click=\"submitNickname\"\n      btnDetermineName=\"添加\"\n    >\n      <div class=\"set-nickname\">\n        <p>\n          <span class=\"iconfont icon-attention\"></span>\n          发布广告需设置法币账户昵称，完成设置后不可修改。\n        </p>\n        <input type=\"text\" placeholder=\"请输入昵称\" v-model=\"nickname\" />\n      </div>\n    </Alert>\n  </P-main>\n</template>\n\n<script>\nimport AdvertisingList from \"@/components/advertising-list\";\nimport Screening from \"./components/screening\";\nimport { mapState } from \"vuex\";\nimport { SetNickname, AdvList, Types, UpAdvStatus } from \"../../api/api\";\nimport InfiniteLoading from \"vue-infinite-loading\";\nimport { setTypes } from \"../../utils\";\nexport default {\n  components: {\n    AdvertisingList,\n    Screening,\n    InfiniteLoading,\n  },\n  data() {\n    return {\n      bool: {\n        ScreeningClass: false,\n        Screening: false,\n        ScreeningBool: true,\n        moreAndMore: false,\n        closeTheAd: false,\n        goChant: false,\n        setNickName: false,\n      },\n      nickname: \"\",\n      select: [{ name: \"修改\" }, { name: \"关闭广告\", color: \"#FD5656\" }],\n      advList: [], //广告列表\n      advListSec: [],\n      page: 0,\n      loading: false,\n      advID: null,\n      arr2: [],\n      arr3: [],\n      arr4: [],\n    };\n  },\n  watch: {\n    \"bool.Screening\"(v) {\n      if (!v) {\n        this.openScreening(false);\n      }\n    },\n  },\n  computed: {\n    ...mapState([\"current\"]),\n  },\n  created() {\n    // this.getFilterAdv();\n    // this.getAdvList();\n  },\n  mounted() {},\n  methods: {\n    //筛选类型\n    getFilter(_params) {\n      this.getAdvList(_params);\n      this.bool.Screening = false;\n    },\n    //获取广告列表\n    async getAdvList(_params) {\n      const result = await AdvList({\n        page: this.page,\n        limit: 10,\n        search: _params ? _params : {},\n      });\n      const types = await Types({ scene: \"AdsStatus\" });\n      if (this.page > 1) {\n        result.data.list.forEach((e) => {\n          this.advList.push(e);\n        });\n      } else {\n        this.advList = result.data.list;\n      }\n      this.advList.forEach((e) => {\n        this.$set(e, \"checked\", e.status == 1 ? true : false);\n        this.$set(e, \"type_text\", e.type == 1 ? \"出售\" : \"购买\");\n      });\n      this.advList = setTypes(this.advList,types.data.map)\n      return result;\n    },\n    async loadMoreEvent($state) {\n      //   this.state = $state;\n      //   this.loadMoreDom = true;\n      this.page += 1;\n      const result = await this.getAdvList();\n      const { data } = result;\n      if (this.advList.length == data.total) {\n        $state.complete();\n      } else {\n        $state.loaded();\n      }\n    },\n    //更新广告状态\n    async upAdvStatusEv(_row, _status) {\n      const params = {\n        id: _status ? _status : _row.id,\n        status: _status ? 3 : _row.status == 1 ? 2 : 1,\n      };\n      const result = await UpAdvStatus(params);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      this.$toast.success({\n        message: \"修改成功\",\n        forbidClick: true,\n      });\n      this.getAdvList();\n      this.bool.closeTheAd = false;\n    },\n    openScreening(bool) {\n      if (this.bool.ScreeningBool) {\n        this.bool.ScreeningBool = false;\n        if (this.bool.ScreeningClass) {\n          if (bool) {\n            this.bool.Screening = !this.bool.Screening;\n          }\n          setTimeout(() => {\n            this.bool.ScreeningClass = false;\n            this.bool.ScreeningBool = true;\n          }, 500);\n        } else {\n          this.bool.ScreeningClass = true;\n          setTimeout(() => {\n            if (bool) {\n              this.bool.Screening = !this.bool.Screening;\n            }\n            this.bool.ScreeningBool = true;\n          }, 50);\n        }\n      }\n    },\n    operation(row) {\n      this.bool.moreAndMore = true;\n      this.advID = row.id;\n    },\n    //更多操纵\n    moreOperations(action, index) {\n      if (index === 1) {\n        this.bool.closeTheAd = true;\n      } else {\n        this.$router.push({\n          path: \"/release\",\n          query: {\n            id: this.advID,\n          },\n        });\n      }\n    },\n    async onList() {\n      const response = await API.GetData(this, \"api/list\");\n      const { code, items, total } = response;\n      if (code == 200) {\n        this.$refs[\"P-list\"].Add(items, total);\n      }\n    },\n    onRefresh() {\n      // this.onList();\n      this.page = 0;\n      this.getAdvList();\n      setTimeout(() => {\n        this.loading = false;\n      }, 500);\n    },\n    //发布广告\n    goRelease() {\n      //  href=\"/release\"/\n      if (!this.current.account.security) {\n        this.$router.push(\"/login?ReturnUrl=/\");\n        return;\n      }\n      const { merchant } = this.current.account.security;\n      const { merchant_name } = this.current.account.merchantInfo;\n      if (merchant == 0) {\n        this.bool.goChant = true;\n        return;\n      }\n      if (!merchant_name) {\n        this.bool.setNickName = true;\n        return;\n      }\n      this.$router.push(\"/release\");\n    },\n    //设置昵称\n    async submitNickname() {\n      if (!this.nickname) {\n        this.$toast(\"请输入昵称\");\n        return;\n      }\n      const result = await SetNickname({ merchant_name: this.nickname });\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      await this.$store.dispatch(\"current/upUserInfo\");\n      this.$toast(\"设置成功\");\n      this.$router.push(\"/release\");\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n@import url(\"./index.less\");\n.navigation {\n  /deep/.van-nav-bar {\n    z-index: 9999;\n  }\n}\n</style>"]}]}