{"remainingRequest":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js??vue-loader-options!/Users/tql_yy/Documents/code/use_one/src/views/order/PleasePayment.vue?vue&type=style&index=0&id=6a679c1e&lang=less&scoped=true&","dependencies":[{"path":"/Users/tql_yy/Documents/code/use_one/src/views/order/PleasePayment.vue","mtime":1658713050076},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/loaders/stylePostLoader.js","mtime":1655715156000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_less-loader@4.1.0@less-loader/dist/cjs.js","mtime":1657523213663},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/tql_yy/Documents/code/use_one/node_modules/_vue-loader@15.10.0@vue-loader/lib/index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5yZWQtbGluZTo6YmVmb3JlIHsKICBiYWNrZ3JvdW5kOiAjZmQ1NjU2Owp9Ci5wcm9tcHQgewogIHBhZGRpbmc6IDE4cHggMTJweDsKICBiYWNrZ3JvdW5kOiAjZmZmOwoKICAudGl0bGUgewogICAgZm9udC1zaXplOiAyMnB4OwogICAgY29sb3I6ICMzMzMzMzM7CiAgICBmb250LXdlaWdodDogYm9sZDsKICB9CiAgLm5vdGUgewogICAgZm9udC1zaXplOiAxMnB4OwogICAgY29sb3I6ICM2NjY2NjY7CiAgICBtYXJnaW4tdG9wOiAxMHB4OwogICAgLm5vdGUtY291bnQgewogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBhbGlnbi1pdGVtczogY2VudGVyOwogICAgICBwIHsKICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMXB4KTsKICAgICAgfQogICAgfQogICAgL2RlZXAvLnZhbi1jb3VudC1kb3duIHsKICAgICAgZm9udC1zaXplOiAxN3B4OwogICAgICBjb2xvcjogI2ZkNTY1NjsKICAgICAgbWFyZ2luOiAwcHggM3B4OwogICAgICBmb250LXdlaWdodDogYm9sZDsKICAgIH0KICB9Cn0KCi5jb250ZW50IHsKICBwYWRkaW5nOiAxMHB4IDBweDsKICBiYWNrZ3JvdW5kOiAjZmZmOwogIC50aGVBbW91bnRPZiB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICByaWdodDogMTZweDsKICAgIHRvcDogNnB4OwogIH0KICBpbWcgewogICAgd2lkdGg6IDE2cHg7CiAgICBoZWlnaHQ6IDE2cHg7CiAgICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOwogIH0KICAvZGVlcC8udmFuLWNlbGwgewogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICB9CiAgL2RlZXAvLnN2Zy1pY29uIHsKICAgIHdpZHRoOiAxNXB4OwogICAgaGVpZ2h0OiAxNXB4OwogIH0KfQo="},{"version":3,"sources":["PleasePayment.vue"],"names":[],"mappings":";AAuPA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PleasePayment.vue","sourceRoot":"src/views/order","sourcesContent":["<!--\n * @Name: '请付款', '订单已取消', '订单已完成'\n * @Date: 2022-06-21 14:28:01\n * @LastEditors: VSCode\n * @LastEditTime: 2022-07-07 17:52:22\n-->\n<template>\n  <P-main type=\"Fei\">\n    <Navigation class-name=\"Fei\" :WeiXinXiSwitch=\"true\" />\n    <div class=\"prompt\">\n      <div class=\"title\">{{ orderMsg.status_text }}</div>\n      <div class=\"note\">\n        <template v-if=\"orderMsg.status == 0\">\n          <div class=\"note-count\" v-if=\"orderMsg.type == 2\">\n            <p>请在</p>\n            <van-count-down :time=\"date\" />\n            <p>内付款给卖家，超时自动取消</p>\n          </div>\n          <div class=\"note-count\" v-else>\n            <p>买家将在</p>\n            <van-count-down :time=\"date\" />\n            <p>内付款</p>\n          </div>\n        </template>\n        <template v-if=\"orderMsg.status == 1\">{{\n          orderMsg.type == 2 ? \"等待卖家放行\" : \"买家已付款，请放行\"\n        }}</template>\n        <template v-if=\"orderMsg.status == 2\">您的订单申诉中</template>\n        <template v-if=\"orderMsg.status == 3\"\n          >您购买的资产已放入发币账户</template\n        >\n        <template v-if=\"orderMsg.status == 4\">您已取消订单</template>\n      </div>\n    </div>\n    <h4 class=\"h4\" :class=\"orderMsg.type == 1 && 'red-line'\">\n      {{ orderMsg.type == 1 ? \"出售\" : \"购买\" }} {{ orderMsg.coin }}\n    </h4>\n    <div class=\"content ui-flex-1\">\n      <P-cell :list=\"list\" theme=\"cell\">\n        <template #value_0=\"scope\">\n          <div\n            class=\"theAmountOf\"\n            :class=\"{ 'theAmountOf-hong': orderMsg.type == 1 }\"\n          >\n            <div class=\"fh\">{{ orderMsg.currency }}</div>\n            <div class=\"jg\">{{ scope.row.value }}</div>\n          </div>\n        </template>\n        <template #value_3=\"scope\">\n          <ul class=\"ui-list ui-list-hx\">\n            <li>{{ scope.row.value }}</li>\n            <li>\n              <P-copy v-model=\"scope.row.value\">\n                <B-svg name=\"copy\" style=\"width: 17px; height: 17px\"></B-svg>\n              </P-copy>\n            </li>\n          </ul>\n        </template>\n      </P-cell>\n\n      <van-cell-group :border=\"false\" class=\"m-30-t cell\">\n        <!-- <van-cell\n          v-if=\"state.index == 2\"\n          :border=\"false\"\n          title=\"买家昵称\"\n          value=\"彭于晏快递\"\n          is-link\n        ></van-cell> -->\n        <van-cell\n          v-if=\"orderMsg.type == 1\"\n          :border=\"false\"\n          title=\"买家姓名\"\n          :value=\"orderMsg.order_user.name\"\n        ></van-cell>\n        <van-cell\n          v-if=\"orderMsg.type == 2\"\n          :border=\"false\"\n          title=\"卖家昵称\"\n          :value=\"orderMsg.adv_user.name\"\n        >\n          <template #extra>\n            <div class=\"ui-flex-row\">\n              <div class=\"p-5-l\">\n                <B-svg\n                  name=\"renzhengxinxi\"\n                  style=\"width:12px; height:;13px\"\n                ></B-svg>\n              </div>\n              <van-icon name=\"arrow\" />\n            </div>\n          </template>\n        </van-cell>\n        <!-- v-if=\"state.index == 0 || state.index == 2\" -->\n        <van-cell :border=\"false\" title=\"收款方式\">\n          <template #right-icon>\n            <img\n              v-if=\"orderMsg?.adv_payments\"\n              :src=\"orderMsg?.adv_payments[0].logo\"\n              alt=\"\"\n            />\n          </template>\n        </van-cell>\n      </van-cell-group>\n\n      <template v-if=\"orderMsg.status == 0\">\n        <div class=\"Footer ui-flex\">\n          <div class=\"ui-flex-1\" v-if=\"orderMsg.type == 2\">\n            <van-button\n              type=\"default\"\n              class=\"btn-default\"\n              @click=\"bool.cancel = true\"\n              >取消订单</van-button\n            >\n          </div>\n          <div class=\"ui-flex-2 m-10-l\">\n            <van-button\n              type=\"info\"\n              class=\"btn-info\"\n              @click=\"bool.show = true\"\n              v-if=\"orderMsg.type == 2\"\n              >去付款</van-button\n            >\n            <van-button type=\"info\" class=\"btn-info\" v-else>去放行</van-button>\n          </div>\n        </div>\n      </template>\n    </div>\n    <AnQuanBaoZhang v-if=\"orderMsg.status == 0\"></AnQuanBaoZhang>\n    <PayChoose v-model=\"bool.show\" @click=\"onPayChoose\"></PayChoose>\n    <CancelAlertOrder\n      v-model=\"bool.cancel\"\n      @click=\"cancelTheOrder\"\n    ></CancelAlertOrder>\n  </P-main>\n</template>\n\n<script>\nimport AnQuanBaoZhang from \"@/components/AnQuanBaoZhang\";\nimport PayChoose from \"@/components/pay-way/pay-choose\";\nimport CancelAlertOrder from \"./components/cancelAlertOrder\";\nimport { OrderDetails, Types, CancelOrder } from \"../../api/api\";\nimport { mapState } from \"vuex\";\nexport default {\n  components: { AnQuanBaoZhang, PayChoose, CancelAlertOrder },\n  data() {\n    return {\n      id: \"\",\n      state: {\n        index: 0,\n        title: [\"请付款\", \"订单已取消\", \"订单已完成\"],\n      },\n      bool: {\n        show: false,\n        cancel: false,\n      },\n      orderMsg: {}, //订单信息\n      date: 0, //结束倒计时\n    };\n  },\n  computed: {\n    ...mapState(['current']),\n    orderID() {\n      return this.current.orderID\n    },\n    list() {\n      const msg = this.orderMsg;\n      return [\n        {\n          title: \"总金额\",\n          value: msg.amount_currency?.toFixed(2),\n          border: false,\n        },\n        {\n          title: \"单价\",\n          value: Number(msg.price)?.toFixed(4),\n          extra: msg.currency,\n          border: false,\n        },\n        {\n          title: \"数量\",\n          value: msg.amount_coin?.toFixed(4),\n          extra: msg.coin,\n          border: false,\n        },\n        { title: \"订单编号\", value: msg.order_sn, border: false },\n        { title: \"下单时间\", value: msg.created_at, border: false },\n      ];\n    },\n  },\n  watch: {\n    \"$route.params\": {\n      deep: true,\n      immediate: true,\n      handler: function (v) {\n        if (v.id) {\n          this.id = v.id;\n          console.log(v);\n        }\n      },\n    },\n  },\n  created() {\n    this.getOrderDetail();\n  },\n  methods: {\n    //获取订单详情\n    async getOrderDetail() {\n      const types = await Types({ scene: \"AdsOrderStatus\" });\n      console.log(types);\n      const result = await OrderDetails({ id: this.orderID });\n      console.log(result);\n      this.orderMsg = result.data;\n      types.data.map.forEach((e) => {\n        if (this.orderMsg.status == e.val) {\n          this.$set(this.orderMsg, \"status_text\", e.name);\n        }\n      });\n      this.date =\n        new Date(this.orderMsg.expires_at).getTime() - new Date().getTime();\n    },\n    //取消订单\n    async cancelTheOrder(v) {\n      //   this.state.index = 1;\n      const result = await CancelOrder({\n        type: this.orderMsg.type,\n        id: this.orderMsg.id,\n      });\n      console.log(result);\n      const { code } = result;\n      if (code != 200) {\n        this.$toast(result.message);\n        return;\n      }\n      v.show = false;\n      this.$toast(\"订单取消成功\");\n      this.getOrderDetail();\n    },\n    onPayChoose(row) {\n      this.$router.push({\n        path: \"/payment\",\n      });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.red-line::before {\n  background: #fd5656;\n}\n.prompt {\n  padding: 18px 12px;\n  background: #fff;\n\n  .title {\n    font-size: 22px;\n    color: #333333;\n    font-weight: bold;\n  }\n  .note {\n    font-size: 12px;\n    color: #666666;\n    margin-top: 10px;\n    .note-count {\n      display: flex;\n      align-items: center;\n      p {\n        transform: translateY(1px);\n      }\n    }\n    /deep/.van-count-down {\n      font-size: 17px;\n      color: #fd5656;\n      margin: 0px 3px;\n      font-weight: bold;\n    }\n  }\n}\n\n.content {\n  padding: 10px 0px;\n  background: #fff;\n  .theAmountOf {\n    position: absolute;\n    right: 16px;\n    top: 6px;\n  }\n  img {\n    width: 16px;\n    height: 16px;\n    vertical-align: middle;\n  }\n  /deep/.van-cell {\n    align-items: center;\n  }\n  /deep/.svg-icon {\n    width: 15px;\n    height: 15px;\n  }\n}\n</style>"]}]}